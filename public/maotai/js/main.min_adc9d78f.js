function _mooFilterBuildUniqueId(t,e,i,n){return i.__event__id__||(i.__event__id__=__functionContextIndex++),"string"==typeof e&&(e=i[e]),e.__event__id__||(e.__event__id__=__functionIndex++),i.__event__id__+"_"+t+"_"+e.__event__id__}function _mooCallAllHook(t,e){var i=[];if(0==i.length)for(var n=0;n<arguments.length;n++)i.push(arguments[n]);for(var o in __moo_filter.all){var r=__moo_filter.all[o];for(var s in r){var a=r[s];a["function"]&&(i[1]=e,e=a["function"].apply(a.context,i))}}return e}function addAction(t,e,i,n){return void 0===n&&(n=100),addFilter(t,e,i,n)}function addFilter(t,e,i,n){void 0===n&&(n=100);var o=_mooFilterBuildUniqueId(t,e,i,n);return __moo_filter[t]||(__moo_filter[t]={}),__moo_filter[t][n]||(__moo_filter[t][n]={}),__moo_filter[t][n][o]={"function":e,context:i},__moo_objects[i.__event__id__]||(__moo_objects[i.__event__id__]=[]),__moo_objects[i.__event__id__].push({idx:o,priority:n}),!0}function fvalue(t){return function(){return t}}function doAction(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];if(__moo_actions||(__moo_actions=[]),__moo_actions[t]?__moo_actions[t]=1:__moo_actions[t]++,__moo_actions.all&&(__moo_current_filter.push(t),_mooCallAllHook.apply(_mooCallAllHook,e)),!__moo_filter[t])return void(__moo_filter.all&&__moo_current_filter.pop());var n=__moo_filter[t];for(var o in n){var r=null,s=__moo_filter[t][o];for(var a in s){var h=s[a];if(h["function"]&&(r=h["function"].apply(h.context,e)),r&&1==r.cancel)break}if(r&&1==r.cancel)break}__moo_current_filter.pop()}function didAction(t){return __moo_actions&&__moo_actions[t]?__moo_actions[t]:!1}function applyFilters(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];var n=[],o=e[0],r=o;if(__moo_filter.all){n=[t],__moo_current_filter.push(t);for(var s=0;s<e.length;s++)n.push(e[s]);r=_mooCallAllHook.apply(_mooCallAllHook,n)}if(!__moo_filter[t])return __moo_filter.all&&__moo_current_filter.pop(),r;if(__moo_filter.all||__moo_current_filter.push(t),0==n.length){n=[t];for(var s=0;s<e.length;s++)n.push(e[s])}for(var a in __moo_filter[t]){var h=__moo_filter[t][a];for(var l in h){var c=h[l];if(c["function"]){n[1]=o;var r=c["function"].apply(c.context,n.slice(1,n.length));"undefined"!=typeof r&&(o=r)}}}return __moo_current_filter.pop(),o}function removeFilter(t,e,i,n){return void 0===i&&(i=__event_context),void 0===n&&(n=100),e=_mooFilterBuildUniqueId(t,e,i,n),removeFilterByBase(t,n,e,i)}function removeFilterByBase(t,e,i,n){var o=__moo_filter[t]&&__moo_filter[t][e]&&__moo_filter[t][e][i];if(o){delete __moo_filter[t][e][i],null==__moo_filter[t][e]&&delete __moo_filter[t][e],null==__moo_filter[t]&&delete __moo_filter[t];for(var r=__moo_objects[n.__event__id__],s=r.length-1;s>=0;s--){var a=r[s];a.idx==i&&a.priority==e&&r.splice(s,1)}}return o}function removeAllFilters(t,e){return void 0===e&&(e=!1),__moo_filter[t]&&(!1!==e&&__moo_filter[t][e]?delete __moo_filter[t][e]:delete __moo_filter[t]),!0}function hasAction(t,e){return hasFilter(t,e,null)}function hasFilter(t,e,i){void 0===e&&(e=!1),void 0===i&&(i=__event_context);var n=__moo_filter.hasOwnProperty(t);if(!1===e||0==n)return n;var o=_mooFilterBuildUniqueId(t,e,i,!1);if(!o)return!1;var r;for(r in __moo_filter[t]){var s=parseInt(r);if(__moo_filter[t][s][o])return r}return!1}function removeAction(t,e,i,n){return void 0===n&&(n=100),removeFilter(t,e,i,n)}function removeAllAction(t,e){return removeAllFilters(t,e)}function removeEventsByTarget(t){for(var e=t.__event__id__,i=__moo_objects[e],n=/^\d+\_(.*?)\_\d+$/gi;i&&i.length;){n.lastIndex=0;var o=i[0],r=n.exec(o.idx);r&&removeFilterByBase(r[1],o.priority,o.idx,t)}delete __moo_objects[e]}var __reflect=this&&this.__reflect||function(t,e,i){t.__class__=e,i?i.push(e):i=[e],t.__types__=t.__types__?i.concat(t.__types__):i},__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},__awaiter=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))(function(o,r){function s(t){try{h(n.next(t))}catch(e){r(e)}}function a(t){try{h(n["throw"](t))}catch(e){r(e)}}function h(t){t.done?o(t.value):new i(function(e){e(t.value)}).then(s,a)}h((n=n.apply(t,e||[])).next())})},__generator=this&&this.__generator||function(t,e){function i(t){return function(e){return n([t,e])}}function n(i){if(o)throw new TypeError("Generator is already executing.");for(;h;)try{if(o=1,r&&(s=r[2&i[0]?"return":i[0]?"throw":"next"])&&!(s=s.call(r,i[1])).done)return s;switch(r=0,s&&(i=[0,s.value]),i[0]){case 0:case 1:s=i;break;case 4:return h.label++,{value:i[1],done:!1};case 5:h.label++,r=i[1],i=[0];continue;case 7:i=h.ops.pop(),h.trys.pop();continue;default:if(s=h.trys,!(s=s.length>0&&s[s.length-1])&&(6===i[0]||2===i[0])){h=0;continue}if(3===i[0]&&(!s||i[1]>s[0]&&i[1]<s[3])){h.label=i[1];break}if(6===i[0]&&h.label<s[1]){h.label=s[1],s=i;break}if(s&&h.label<s[2]){h.label=s[2],h.ops.push(i);break}s[2]&&h.ops.pop(),h.trys.pop();continue}i=e.call(t,h)}catch(n){i=[6,n],r=0}finally{o=s=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}var o,r,s,a,h={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return a={next:i(0),"throw":i(1),"return":i(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a},BaseContainer=function(t){function e(){var e=t.call(this)||this;return e._isDisposed=!1,e._forceDispose=!0,e.addEventListener(egret.Event.REMOVED_FROM_STAGE,e._base_onRemovedHandler,e),e.addEventListener(egret.Event.ADDED_TO_STAGE,e._base_onAddToStage,e),e}return __extends(e,t),Object.defineProperty(e.prototype,"forceDispose",{get:function(){return this._forceDispose},set:function(t){this._forceDispose=t},enumerable:!0,configurable:!0}),e.prototype.addCreatBackFun=function(t){},e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this)},e.prototype.removeRemovedFromStage=function(){this.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this._base_onRemovedHandler,this)},e.prototype.ui=function(t){return this[t]},e.prototype._base_onRemovedHandler=function(t){this.dispose()},e.prototype._base_onAddToStage=function(t){},e.prototype.initDisplayHandler=function(){},e.prototype.onDisplayName=function(){return!0},e.prototype.onFocus=function(){},e.prototype.onBlur=function(){},e.prototype.dispose=function(){this._forceDispose&&(this._isDisposed=!0,removeEventsByTarget(this),egret.Tween.removeTweens(this))},e}(eui.Component);__reflect(BaseContainer.prototype,"BaseContainer",["eui.UIComponent","egret.DisplayObject"]);var GameAnimation=function(){function t(t,e){void 0===e&&(e=null),this._overTime=0,this._curSteps=0,this._delay=0,this._curDelay=0,this._loop=!1,this._duration=t,this._ease=e}return t.runAnimation=function(e,i){t.animations.hasOwnProperty(e.hashCode)||(t.animations[e.hashCode]=[]),t.animations[e.hashCode].push(i)},t.prototype.delay=function(t){return this._delay=t,this._curDelay=t,this},t.prototype.loop=function(t){return this._loop=t,this},t.clearTarget=function(e){if("undefined"!=typeof e&&null!=e&&t.animations.hasOwnProperty(e.hashCode)){for(var i=t.animations[e.hashCode];i.length>0;)i.shift().dispose();0==t.animations[e.hashCode].length&&delete t.animations[e.hashCode]}},t.clearAnimation=function(e){var i=e.getTarget();if("undefined"!=typeof i&&null!=i&&t.animations.hasOwnProperty(i.hashCode)){var n=t.animations[i.hashCode].indexOf(e);-1!=n&&t.animations[i.hashCode].splice(n,1),e.dispose(),0==t.animations[i.hashCode].length&&delete t.animations[i.hashCode]}},t.prototype._tick=function(t){if(this._curDelay<this._delay)return this._curDelay+=t,void(this._curDelay>=this._delay&&this._complete());this._overTime+=t,t=this._overTime/this._duration,this._loop&&(t=this._overTime%this._duration/this._duration),t=t>1?1:t;var e=1>t?t:1;e=e>0?e:0,this._ease&&(t=this._ease(e)),this.update(t);var i=Math.floor(this._overTime/this._duration);i>this._curSteps&&(0==this._delay&&this._complete(),this._curSteps=i,this._curDelay=0)},t.prototype._complete=function(){this._selector&&this._selector.apply(this._context,this._args),this.onComplete(),this._loop||t.clearAnimation(this)},t.prototype.onComplete=function(){},t.prototype.getTarget=function(){return this._target},t.prototype.onDispose=function(){},t.prototype.dispose=function(){this.onDispose(),egret.Ticker.getInstance().unregister(this._tick,this),this._selector=null,this._context=null,this._target=null},t.prototype.setComplete=function(t,e){void 0===e&&(e=null);for(var i=[],n=2;n<arguments.length;n++)i[n-2]=arguments[n];return this._selector=t,this._context=e,this._args=i,this},t.prototype.update=function(t){},t.prototype.run=function(t){this._run(t)},t.prototype._run=function(e,i){void 0===i&&(i=!0),this._target=e,i&&egret.Ticker.getInstance().register(this._tick,this),t.runAnimation(e,this)},t.animations={},t}();__reflect(GameAnimation.prototype,"GameAnimation");var BaseClass=function(){function t(){}return t.getInstance=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=this;if(!i._instance){var n=t.length;0==n?i._instance=new i:1==n?i._instance=new i(t[0]):2==n?i._instance=new i(t[0],t[1]):3==n?i._instance=new i(t[0],t[1],t[2]):4==n?i._instance=new i(t[0],t[1],t[2],t[3]):5==n&&(i._instance=new i(t[0],t[1],t[2],t[3],t[4]))}return i._instance},t}();__reflect(BaseClass.prototype,"BaseClass");var BaseBoxContainer=function(t){function e(e){void 0===e&&(e=null);var i=t.call(this)||this;return i.created=!1,i._boxAnim=e,i.addEventListener(egret.Event.REMOVED_FROM_STAGE,i.onRemoveFromStageHandler,i),i}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.boxDisplay&&null==this._boxAnim&&(this._boxAnim=new BoxAnimation),App.StageUtils.getStage().addEventListener(egret.Event.RESIZE,this.onBoxResize,this),this.onBoxResize(),this.ui("backButton")&&this.ui("backButton").addEventListener(egret.TouchEvent.TOUCH_TAP,this.gotoCity,this)},e.prototype.onBoxResize=function(){for(var t in this)t.indexOf("upRoot")>-1&&(this.ui(t).y=0),t.indexOf("centerRoot")>-1&&(this.ui(t).x=.5*egret.MainContext.instance.stage.stageWidth,this.ui(t).y=.5*egret.MainContext.instance.stage.stageHeight),t.indexOf("scaleRoot")>-1&&(this.ui(t).scaleX=this.ui(t).scaleY=App.StageUtils.getStage().stageHeight/App.GAME_HEIGHT),t.indexOf("downRoot")>-1&&(this.ui(t).y=App.StageUtils.getStage().stageHeight);this.ui("MaskLayer")&&(this.ui("MaskLayer").width=StageUtils.getInstance().getWidth()),this.ui("MaskLayer")&&(this.ui("MaskLayer").height=StageUtils.getInstance().getHeight())},e.prototype.onMaskHandler=function(){},Object.defineProperty(e.prototype,"maskDisplay",{get:function(){return this.ui("MaskLayer")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"boxDisplay",{get:function(){return this.ui("boxRoot")},enumerable:!0,configurable:!0}),e.prototype.showBoxAnimation=function(){this._boxAnim&&(egret.setTimeout(function(){GameSound.playEffectSound("effect_menu")},this,140),this._boxAnim.show(this,function(){doAction("box_animation_done")},this))},e.prototype.closeBoxAnimation=function(){this._boxAnim?this._boxAnim.close():App.DisplayUtils.removeFromParent(this)},e.prototype.onRemoveFromStageHandler=function(t){App.StageUtils.getStage().removeEventListener(egret.Event.RESIZE,this.onBoxResize,this),this.created=!1,egret.callLater(function(){doAction("box_removed")},this)},e.prototype.gotoCity=function(t){void 0===t&&(t=null),ModuleOpenManager.removeFromParent(this.className)},e.prototype.dispose=function(){t.prototype.dispose.call(this),App.StageUtils.getStage().removeEventListener(egret.Event.RESIZE,this.onBoxResize,this),this.ui("backButton")&&this.ui("backButton").removeEventListener(egret.TouchEvent.TOUCH_TAP,this.gotoCity,this),ModuleOpenManager.Caches[this.hashCode]&&ModuleOpenManager.CacheList.indexOf(this.className)>-1&&App.EgretExpandUtils.removeFromParent(this),delete ModuleOpenManager.Caches[this.hashCode]},e}(BaseContainer);__reflect(BaseBoxContainer.prototype,"BaseBoxContainer");var egret;!function(t){var e=function(){function e(){this._direction=t.ScrollDirection.BOTH,this._initX=0,this._initY=0,this.hScroll=!0,this.vScroll=!0,this.moved=!1,this.animating=!1,this.distX=0,this.distY=0,this.absDistX=0,this.absDistY=0,this.dirX=0,this.dirY=0,this.startX=0,this.startY=0,this.pointX=0,this.pointY=0,this.beginPos=new t.Point,this.movePos=new t.Point,this._minX=0,this._minY=0,this._targetMoveList=null,this._selectMoveList=null,this._needCallMoveEndCB=!1,this._onlyCheckTail=!0,this._moveEndCB=null,this._moveEndCBObj=null,this._moveCount=0,this._canMove=!0,this._runBeginMark=!1,this._moveBeginCB=null,this._moveBeginCBObj=null,this.startTime=0,this.steps=[],this._moveToNumCB=null,this._moveToNumCBObj=null,this._gapNum=0,this.lockMove=!1}return e}();t.MooScrollViewOption=e,__reflect(e.prototype,"egret.MooScrollViewOption");var i=function(){function t(){}return t.BOTH="both",t.HORIZONTAL="horizontal",t.VERTICAL="vertical",t}();t.ScrollDirection=i,__reflect(i.prototype,"egret.ScrollDirection");var n=function(i){function n(){var n=i.call(this)||this;return n._stopPlayAnim=!0,n._canPlayAnim=!0,n.mooScrollViewOption=new e,n.contY=0,n._scorllTip=!0,n.touchEnabled=!0,n.options={x:0,y:0,bounce:!0,bounceLock:!1,momentum:!0,useTransform:!0},n.scrollRect=new t.Rectangle(0,0,100,100),n.addEventListener(t.Event.ADDED_TO_STAGE,n.onAddToStageHandler,n),n.addEventListener(t.Event.REMOVED_FROM_STAGE,n.onRemoveFromStageHandler,n),n}return __extends(n,i),Object.defineProperty(n.prototype,"direction",{get:function(){return this.mooScrollViewOption._direction},set:function(e){switch(this.mooScrollViewOption._direction=e,this.mooScrollViewOption._direction){case t.ScrollDirection.BOTH:this.mooScrollViewOption.hScroll=!0,this.mooScrollViewOption.vScroll=!0;break;case t.ScrollDirection.HORIZONTAL:this.mooScrollViewOption.hScroll=!0,this.mooScrollViewOption.vScroll=!1;break;case t.ScrollDirection.VERTICAL:this.mooScrollViewOption.hScroll=!1,this.mooScrollViewOption.vScroll=!0}},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"stopPlayAnim",{set:function(t){this._stopPlayAnim=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"canMove",{get:function(){return this.mooScrollViewOption._canMove},set:function(t){this.mooScrollViewOption._canMove=t},enumerable:!0,configurable:!0}),n.prototype.onAddToStageHandler=function(t){this.scrollStart()},n.prototype.onRemoveFromStageHandler=function(t){this.removeListeners()},n.prototype.$setWidth=function(t){return i.prototype.$setWidth.call(this,t),this._viewWidth=t,this.scrollRect.width=t,this.resetGraphics(),!1},n.prototype.$setHeight=function(t){return i.prototype.$setHeight.call(this,t),this._viewHeight=t,this.scrollRect.height=t,this._viewWidth=this._viewWidth||0,this._viewHeight=this._viewHeight||0,this.resetGraphics(),!1},n.prototype.resetGraphics=function(){this.graphics.clear(),this.graphics.beginFill(16777215,0),this._viewWidth=this._viewWidth||0,this._viewHeight=this._viewHeight||0,this.graphics.drawRect(0,0,this._viewWidth,this._viewHeight),this.graphics.endFill()},n.prototype.setContainer=function(t,e,i){if(this._container&&this._container.parent&&this._container.parent.removeChild(this._container),this._container=t,this.mooScrollViewOption._initWidth=e,this.mooScrollViewOption._initHeight=i,this._container.touchEnabled=!0,null!=this._container.parent){if(this._container.parent==this)return;this._container.parent.removeChild(this._container)}this._container.y=this.contY,this.addChildAt(this._container,0)},n.prototype.getInitWidth=function(){return this.mooScrollViewOption._initWidth||this._container.width},n.prototype.getInitHeight=function(){return this.mooScrollViewOption._initHeight||this._container.height},n.prototype.maxScrollX=function(){return Math.min(-this.getInitWidth()+this.width,0)},n.prototype.maxScrollY=function(){return Math.min(-this.getInitHeight()+this.height,0)},n.prototype._start=function(e){if(!this.mooScrollViewOption.lockMove&&(this.mooScrollViewOption.moved=!1,this.mooScrollViewOption.animating=!1,this.mooScrollViewOption.distX=0,this.mooScrollViewOption.distY=0,this.mooScrollViewOption.absDistX=0,this.mooScrollViewOption.absDistY=0,this.mooScrollViewOption.dirX=0,this.mooScrollViewOption.dirY=0,this._container)){var i=this._getPos();(i.x!=this.mooScrollViewOption._initX||i.y!=this.mooScrollViewOption._initY)&&(this.mooScrollViewOption.steps=[],this._setPos(i.x,i.y)),this.mooScrollViewOption.startX=this.mooScrollViewOption._initX,this.mooScrollViewOption.startY=this.mooScrollViewOption._initY,this.mooScrollViewOption.pointX=e.stageX,this.mooScrollViewOption.pointY=e.stageY,this.mooScrollViewOption.beginPos.x=e.stageX,this.mooScrollViewOption.beginPos.y=e.stageY,this.mooScrollViewOption.startTime=t.getTimer(),t.MainContext.instance.stage.addEventListener(t.TouchEvent.TOUCH_END,this._end,this),t.MainContext.instance.stage.addEventListener(t.TouchEvent.TOUCH_MOVE,this._move,this)}},Object.defineProperty(n.prototype,"scorllTip",{set:function(t){this._scorllTip=t},enumerable:!0,configurable:!0}),n.prototype._move=function(e){if(this.mooScrollViewOption._canMove&&(this.mooScrollViewOption.movePos.x=e.stageX,this.mooScrollViewOption.movePos.y=e.stageY,!(t.Point.distance(this.mooScrollViewOption.movePos,this.mooScrollViewOption.beginPos)<20))){App.StageUtils.getStage().touchChildren=!1;var i=e.stageX-this.mooScrollViewOption.pointX,n=e.stageY-this.mooScrollViewOption.pointY,o=this.mooScrollViewOption._initX+i,r=this.mooScrollViewOption._initY+n,s=t.getTimer();this.mooScrollViewOption.pointX=e.stageX,this.mooScrollViewOption.pointY=e.stageY,(o>0||o<this.maxScrollX())&&(o=this.options.bounce?this.mooScrollViewOption._initX+i/2:o>=0||this.maxScrollX()>=0?0:this.maxScrollX()),(r>0||r<this.maxScrollY())&&(r=this.options.bounce?this.mooScrollViewOption._initY+n/2:r>=0||this.maxScrollY()>=0?0:this.maxScrollY()),this.mooScrollViewOption.distX+=i,this.mooScrollViewOption.distY+=n,this.mooScrollViewOption.absDistX=Math.abs(this.mooScrollViewOption.distX),this.mooScrollViewOption.absDistY=Math.abs(this.mooScrollViewOption.distY),this.mooScrollViewOption.absDistX<6&&this.mooScrollViewOption.absDistY<6||(this.mooScrollViewOption.moved=!0,this._setPos(o,r),this.mooScrollViewOption.dirX=i>0?-1:0>i?1:0,this.mooScrollViewOption.dirY=n>0?-1:0>n?1:0,s-this.mooScrollViewOption.startTime>300&&(this.mooScrollViewOption.startTime=s,this.mooScrollViewOption.startX=this.mooScrollViewOption._initX,this.mooScrollViewOption.startY=this.mooScrollViewOption._initY),this.mooScrollViewOption._moveCount++,this.mooScrollViewOption._moveCount%3==0&&(this.mooScrollViewOption._moveCount=0))}},n.prototype._end=function(e){if(App.StageUtils.getStage().touchChildren=!0,t.MainContext.instance.stage.removeEventListener(t.TouchEvent.TOUCH_END,this._end,this),t.MainContext.instance.stage.removeEventListener(t.TouchEvent.TOUCH_MOVE,this._move,this),this.mooScrollViewOption.movePos.y!=e.stageY&&(this.mooScrollViewOption.movePos.y=e.stageY),this.mooScrollViewOption.movePos.y-this.mooScrollViewOption.beginPos.y<-20&&Math.abs(this.mooScrollViewOption._initY)-(this._container.height-this.height)>this.mooScrollViewOption._gapNum&&this.mooScrollViewOption._moveToNumCB)return this._canPlayAnim=!1,void this.mooScrollViewOption._moveToNumCB.call(this.mooScrollViewOption._moveToNumCBObj);var i,n={dist:0,time:0},o={dist:0,time:0},r=t.getTimer()-this.mooScrollViewOption.startTime,s=this.mooScrollViewOption._initX,a=this.mooScrollViewOption._initY;return this.mooScrollViewOption.moved?(300>r&&this.options.momentum&&(n=s?this._momentum(s-this.mooScrollViewOption.startX,r,-this.mooScrollViewOption._initX,this.getInitWidth()-this.width+this.mooScrollViewOption._initX,this.options.bounce?this.width:0):n,o=a?this._momentum(a-this.mooScrollViewOption.startY,r,-this.mooScrollViewOption._initY,this.maxScrollY()<0?this.getInitHeight()-this.height+this.mooScrollViewOption._initY:0,this.options.bounce?this.height:0):o,s=this.mooScrollViewOption._initX+n.dist,a=this.mooScrollViewOption._initY+o.dist,(this.mooScrollViewOption._initX>0&&s>0||this.mooScrollViewOption._initX<this.maxScrollX()&&s<this.maxScrollX())&&(n={dist:0,time:0}),(this.mooScrollViewOption._initY>0&&a>0||this.mooScrollViewOption._initY<this.maxScrollY()&&a<this.maxScrollY())&&(o={dist:0,time:0})),n.dist||o.dist?(i=Math.max(Math.max(n.time,o.time),10),void this.scrollTo(this.mround(s),this.mround(a),i)):void this._fixPos(200)):void this._fixPos(200)},n.prototype.moveList=function(){this._container.youhua&&this._container.youhua(),this.mooScrollViewOption._targetMoveList&&this.mooScrollViewOption._selectMoveList&&this.mooScrollViewOption._selectMoveList.call(this.mooScrollViewOption._targetMoveList,this)},n.prototype.setMoveListEndCallback=function(t,e,i){void 0===i&&(i=!0),this.mooScrollViewOption._moveEndCB=t,this.mooScrollViewOption._moveEndCBObj=e,this.mooScrollViewOption._onlyCheckTail=i},n.prototype.setMoveListEndNumCallback=function(t,e,i,n){void 0===n&&(n=!0),this.mooScrollViewOption._gapNum=t,this.mooScrollViewOption._moveToNumCB=e,this.mooScrollViewOption._moveToNumCBObj=i},n.prototype.setMoveListBeginCallback=function(t,e){this.mooScrollViewOption._moveBeginCB=t,this.mooScrollViewOption._moveBeginCBObj=e},n.prototype.setMoveListCallback=function(t,e){this.mooScrollViewOption._targetMoveList=t,this.mooScrollViewOption._selectMoveList=e},n.prototype.setScrollRect=function(t,e,i){void 0===i&&(i=0),0==i?this._setPos(-(t-this.mooScrollViewOption._minX),-(e-this.mooScrollViewOption._minY)):this.scrollTo(-t,-e,i)},n.prototype.setMinPosition=function(t,e){this.mooScrollViewOption._minX=t,this.mooScrollViewOption._minY=e},n.prototype._setPos=function(t,e){this._container&&(this.mooScrollViewOption.hScroll?(this._container.x=t-this.mooScrollViewOption._minX,this.mooScrollViewOption._initX=t):0,this.mooScrollViewOption.vScroll?(this._container.y=e-this.mooScrollViewOption._minY,this.mooScrollViewOption._initY=e):0,this.moveList())},n.prototype._getPos=function(){var t=this._container.x+this.mooScrollViewOption._minX,e=this._container.y+this.mooScrollViewOption._minY;return{x:1*t,y:1*e}},n.prototype.mround=function(t){return t>>0},n.prototype._fixPos=function(e){var i=this.getFixPosY(),n=this.getFixPosX();n==this.mooScrollViewOption._initX&&i==this.mooScrollViewOption._initY?(this.mooScrollViewOption.moved&&(this.mooScrollViewOption.moved=!1),(this.mooScrollViewOption._needCallMoveEndCB||!this.mooScrollViewOption._onlyCheckTail)&&(this.mooScrollViewOption._needCallMoveEndCB=!1,this.mooScrollViewOption._moveEndCB&&(this._canPlayAnim=!1,this.mooScrollViewOption._moveEndCB.call(this.mooScrollViewOption._moveEndCBObj))),this.mooScrollViewOption._runBeginMark&&this.mooScrollViewOption._moveBeginCB&&(this.mooScrollViewOption._runBeginMark=!1,this.mooScrollViewOption._moveBeginCB.call(this.mooScrollViewOption._moveBeginCBObj))):((this.mooScrollViewOption._direction==t.ScrollDirection.HORIZONTAL&&0!=n||this.mooScrollViewOption._direction==t.ScrollDirection.VERTICAL&&0!=i)&&(this.mooScrollViewOption._needCallMoveEndCB=!0),0==n&&0==i&&(this.mooScrollViewOption._runBeginMark=!0),this.scrollTo(n,i,e||0))},n.prototype.getFixPosY=function(){return this.mooScrollViewOption._initY>=0||this.maxScrollY()>0?0:this.mooScrollViewOption._initY<this.maxScrollY()?this.maxScrollY():this.mooScrollViewOption._initY},n.prototype.getFixPosX=function(){return this.mooScrollViewOption._initX>=0?0:this.mooScrollViewOption._initX<this.maxScrollX()?this.maxScrollX():this.mooScrollViewOption._initX},n.prototype.scrollTo=function(t,e,i){this._stopAni(),this.mooScrollViewOption.steps.push({x:t,y:e,time:i||0}),this._startAni()},n.prototype._startAni=function(){var e,i,n,o=this,r=this.mooScrollViewOption._initX,s=this.mooScrollViewOption._initY,a=Date.now();if(!this.mooScrollViewOption.animating){if(!this.mooScrollViewOption.steps.length)return void this._fixPos(400);e=this.mooScrollViewOption.steps.shift(),e.x==r&&e.y==s&&(e.time=0),this.mooScrollViewOption.animating=!0,this.mooScrollViewOption.moved=!0,n=function(){var h,l,c=Date.now();return c>=a+e.time?(o._setPos(e.x,e.y),o.mooScrollViewOption.animating=!1,void o._startAni()):(c=(c-a)/e.time-1,i=Math.sqrt(1-c*c),h=(e.x-r)*i+r,l=(e.y-s)*i+s,o._setPos(h,l),void(o.mooScrollViewOption.animating&&t.callLater(n,this)))},n()}},n.prototype._stopAni=function(){this.mooScrollViewOption.steps=[],this.mooScrollViewOption.moved=!1,this.mooScrollViewOption.animating=!1},n.prototype._momentum=function(t,e,i,n,o){var r=6e-4,s=Math.abs(t)/e,a=s*s/(2*r),h=0,l=0;return t>0&&a>i?(l=o/(6/(a/s*r)),i+=l,s=s*i/a,a=i):0>t&&a>n&&(l=o/(6/(a/s*r)),n+=l,s=s*n/a,a=n),a*=0>t?-1:1,h=s/r,{dist:a,time:this.mround(h)}},n.prototype.scrollStart=function(){this.addEventListener(t.TouchEvent.TOUCH_BEGIN,this._start,this)},n.prototype.removeListeners=function(){this.removeEventListener(t.TouchEvent.TOUCH_BEGIN,this._start,this),t.MainContext.instance.stage.removeEventListener(t.TouchEvent.TOUCH_END,this._end,this),t.MainContext.instance.stage.removeEventListener(t.TouchEvent.TOUCH_MOVE,this._move,this)},Object.defineProperty(n.prototype,"useOverflow",{set:function(t){this.options.bounce=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"lockMove",{get:function(){return this.mooScrollViewOption.lockMove},enumerable:!0,configurable:!0}),n.prototype.getPosX=function(){return this._container?this._container.x:0},n.prototype.getPosY=function(){return this._container?this._container.y:0},n}(t.Sprite);t.MooScrollView=n,__reflect(n.prototype,"egret.MooScrollView")}(egret||(egret={}));var BaseCacheManager=function(){function t(t,e,i){void 0===e&&(e=20),void 0===i&&(i=40),this._items=[],this._itemIndex=-1,this._compareCount=e,this._expand=i,this.expand(t)}return t.prototype.expand=function(t){for(;t--;)this._items.push(this.createItem())},t.prototype._pop=function(){this._itemIndex++,this.checkItemIndex();var t=this._items[this._itemIndex];return t},t.prototype.createItem=function(){return null},t.prototype.checkItemIndex=function(){for(;this._items[this._itemIndex]&&1==this._items[this._itemIndex].used;)this._itemIndex++;if(this._itemIndex>=this._items.length-1){var t=this._items.filter(this.findUsed,this);t.length>this._items.length-this._compareCount?this.expand(this._expand):(this._itemIndex=0,this.checkItemIndex())}},t.prototype.onStage=function(){this._itemIndex=0},t.prototype.clear=function(){for(var t=0;t<this._items.length;t++)this._items[t].used=!1;this._itemIndex=0},t.prototype.findUsed=function(t){return t.used},t}();__reflect(BaseCacheManager.prototype,"BaseCacheManager");var ProxyErrorCode=function(){function t(){}return t.ERROR_DATA=-3,t.TIME_OUT=-4,t.ERROR_REQUEST=-5,t}();__reflect(ProxyErrorCode.prototype,"ProxyErrorCode");var ProxyBase=function(t){function e(e){void 0===e&&(e={});var i=t.call(this)||this;return i._isTimeout=!1,i._timeoutId=null,i.showMsg=!0,i.mask=!0,i._reloadTimes=0,i._isIOError=!1,i._listeners=[],i._params=i.formatParams(e),i._params&&(i._params.hasOwnProperty("mask")&&(i.mask=i._params.mask,delete i._params.mask),i._params.hasOwnProperty("showMsg")&&(i.showMsg=i._params.showMsg,delete i._params.showMsg)),i}return __extends(e,t),Object.defineProperty(e,"proxyOnLoading",{get:function(){return this._loading.slice()},enumerable:!0,configurable:!0}),e.checkToLoad=function(t){e._loading.length>=1?e._waiting.push(t)>4&&console.warn("阻塞风险 "+e._waiting.length):e.addToLoading(t)},e.onLoadingEnd=function(t){var i=t.target;e.removeFromLoading(i),e._waiting.length&&e.addToLoading(e._waiting.shift())},e.addToLoading=function(t){e._loading.push(t),t.addEventListener(ProxyEvent.ERROR,e.onLoadingEnd,this),t.addEventListener(ProxyEvent.REQUEST_SUCCEED,e.onLoadingEnd,this),t.loadHandler()},e.removeFromLoading=function(t){t.removeEventListener(ProxyEvent.ERROR,e.onLoadingEnd,this),t.removeEventListener(ProxyEvent.REQUEST_SUCCEED,e.onLoadingEnd,this);var i=e._loading.indexOf(t);i>=0&&e._loading.splice(i,1)},e.prototype.formatParams=function(t){if(t&&t.hasOwnProperty("mod")){var e=t.mod;if(e.indexOf(".")>-1){var i=e.split(".");t.mod=i[0],t["do"]=i[1]}}return t},Object.defineProperty(e.prototype,"requestUrl",{get:function(){return this._requestUrl},set:function(t){this._requestUrl=t},enumerable:!0,configurable:!0}),e.prototype.loadHandler=function(){var t=this;this._requestUrl||(this._requestUrl="http://106.53.83.233:443/countUser");var i=-1==this._requestUrl.indexOf("?")?this._requestUrl+"?":this._requestUrl,n=applyFilters(ProxyAction.BEGIN_LOAD,this);if(this._status=ProxyStatus.REQUEST,doAction(ProxyAction.REQUEST,this),n===this||n===!0){this._status=ProxyStatus.WAIT,doAction(ProxyAction.WAIT,this);var o=(App.hashKey,this.getParamString());this._isIOError=!1;var r=new egret.HttpRequest;r.responseType=egret.HttpResponseType.TEXT;var i=i.substring(0,i.lastIndexOf("?"));r.open(i,egret.HttpMethod.POST),r.setRequestHeader("Content-Type","application/json"),r.send(o),r.addEventListener(egret.Event.COMPLETE,this.onComplete,this),r.addEventListener(egret.IOErrorEvent.IO_ERROR,this.onError,this),this._timeoutId=egret.setTimeout(function(){r.removeEventListener(egret.Event.COMPLETE,t.onComplete,t),r.removeEventListener(egret.IOErrorEvent.IO_ERROR,t.onError,t),console.log("timeout!!!!!!!!!"),t._errorCode=ProxyErrorCode.TIME_OUT,t._errorMessage=LangueManager.langueConfig[224],t._isTimeout=!0,doAction(HomeEvent.SHOW_FLOAT,t._errorMessage),doAction(ProxyAction.TIMEOUT,t),t.dispatchEvent(new ProxyEvent(ProxyEvent.TIME_OUT,t)),t.dispatchEvent(new ProxyEvent(ProxyEvent.ERROR,t))},this,e._timeout)}},e.prototype.clearTimeoutHandler=function(){this._timeoutId&&egret.clearTimeout(this._timeoutId)},e.prototype.load=function(){e.checkToLoad(this)},Object.defineProperty(e.prototype,"isTimeout",{get:function(){return this._isTimeout},enumerable:!0,configurable:!0}),e.prototype.proxyDone=function(){var t=1==this.getParamByName("reload");!t||t&&this._isResponseSucceed?this.clearEventListener():this._isIOError&&(4==this._reloadTimes?(console.log("重试达到四次"),this.clearEventListener()):egret.setTimeout(this.load,this,3e3),this._reloadTimes++)},e.prototype.onError=function(t){console.log("onError!!!!!!!!!"),this._isRequestSucceed=!1,this._isIOError=!0,this._errorMessage=LangueManager.langueConfig[136],this._errorCode=ProxyErrorCode.ERROR_REQUEST,egret.clearTimeout(this._timeoutId),this.dispatchEvent(new ProxyEvent(ProxyEvent.REQUEST_FAIL,this)),this.dispatchEvent(new ProxyEvent(ProxyEvent.ERROR,this)),doAction(ProxyAction.REQUEST_ERROR,this),doAction(ProxyAction.RESPONSE,this),this.proxyDone()},e.prototype.onResponse=function(t){this._responseData=t,this._isResponseSucceed=!1,this._status=ProxyStatus.RESPONSE,GameUtils.serverTime=t.t,this._responseData&&this._responseData.hasOwnProperty("status")&&(this._isResponseSucceed=200==this._responseData.status),this.dispatchEvent(new ProxyEvent(ProxyEvent.REQUEST_SUCCEED,this)),this._errorCode=this._responseData?this._responseData.status:ProxyErrorCode.ERROR_DATA,this._errorMessage=this._responseData.data.errorMsg,this._isRequestSucceed=!0,doAction(ProxyAction.REQUEST_SUCCEED,this),doAction(ProxyAction.RESPONSE,this),this._isResponseSucceed?(doAction(ProxyAction.RESPONSE_SUCCEED,this),this.dispatchEvent(new ProxyEvent(ProxyEvent.RESPONSE_SUCCEED,this))):(GameUtils.showErrorMess(this),doAction(ProxyAction.RESPONSE_ERROR,this),this.dispatchEvent(new ProxyEvent(ProxyEvent.RESPONSE_ERROR,this)),this.dispatchEvent(new ProxyEvent(ProxyEvent.ERROR,this))),this.proxyDone()},e.prototype.onComplete=function(t){egret.clearTimeout(this._timeoutId);var e,i=t.target;try{e=MyJSON.parse(i.response,"Proxy: requestUrl:"+this.requestUrl)}catch(n){}this.onResponse(e)},e.prototype.getParamByName=function(t){return this._params?this._params[t]:null},e.prototype.hasParamByName=function(t){return this._params?this._params.hasOwnProperty(t):!1
},Object.defineProperty(e.prototype,"params",{get:function(){return this._params},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"responseData",{get:function(){return this._responseData},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isResponseSucceed",{get:function(){return this._isResponseSucceed},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isRequestSucceed",{get:function(){return this._isRequestSucceed},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"errorMessage",{get:function(){return this._errorMessage},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"errorCode",{get:function(){return this._errorCode},enumerable:!0,configurable:!0}),e.prototype.getParamString=function(){return null},e.prototype.addEventListener=function(e,i,n,o,r){void 0===o&&(o=!1),void 0===r&&(r=0),t.prototype.addEventListener.call(this,e,i,n,o,r),this._listeners.push({type:e,listener:i,thisObj:n,capture:o,priority:r})},e.prototype.removeEventListener=function(e,i,n,o){t.prototype.removeEventListener.call(this,e,i,n,o);for(var r=this._listeners.length,s=r-1;s>=0;s--){var a=this._listeners[s];a.type==e&&a.listener==i&&a.thisObj==n&&this._listeners.splice(s,1)}},e.prototype.clearEventListener=function(){for(;this._listeners.length>0;){var t=this._listeners[0];this.removeEventListener(t.type,t.listener,t.thisObj,t.capture)}},e._waiting=[],e._loading=[],e.token="",e.frontProxyKeys=["mask","cache","autoMerge"],e._timeout=1e4,e}(egret.EventDispatcher);__reflect(ProxyBase.prototype,"ProxyBase");var SocketMessage=function(){function t(){}return t.prototype.receive=function(t){var e=this.decode(this.readSocket(t));if(e){ProxyCache.setSocketCache(e);var i=e.moduleName+"."+e.methodName;App.MessageCenter.dispatch(i,e.result)}},t.prototype.send=function(t,e){var i=this.encode(e);i&&this.writeSocket(t,i)},t.prototype.readSocket=function(t){return App.trace("readSocket需要子类重写"),null},t.prototype.decode=function(t){return App.trace("decode需要子类重写，根据项目的协议结构解析"),null},t.prototype.writeSocket=function(t,e){App.trace("writeSocket需要子类重写")},t.prototype.encode=function(t){return App.trace("encode需要子类重写，根据项目的协议结构解析"),null},t}();__reflect(SocketMessage.prototype,"SocketMessage",["ISocketMessage"]);var BaseSound=function(){function t(){this._cache={},this._loadingCache=new Array}return t.prototype.dealSoundTimer=function(){for(var t=egret.getTimer(),e=Object.keys(this._cache),i=0,n=e.length;n>i;i++){var o=e[i];this.checkCanClear(o)&&t-this._cache[o]>=SoundManager.CLEAR_TIME&&(delete this._cache[o],RES.destroyRes(o))}},t.prototype.getSound=function(t){var e=RES.getRes(t);if(e)this._cache[t]&&(this._cache[t]=egret.getTimer());else{if(-1!=this._loadingCache.indexOf(t))return null;this._loadingCache.push(t),RES.getResAsync(t,this.onResourceLoadComplete,this)}return e},t.prototype.onResourceLoadComplete=function(t,e){var i=this._loadingCache.indexOf(e);-1!=i&&(this._loadingCache.splice(i,1),this._cache[e]=egret.getTimer(),this.loadedPlay(e))},t.prototype.loadedPlay=function(t){},t.prototype.checkCanClear=function(t){return!0},t}();__reflect(BaseSound.prototype,"BaseSound");var AnimTimeLine=function(){function t(t,e,i,n,o){this._setNum=0,this.typeOverNum=24,this._end=0,this._lastIndex=0,this._isPlay=!1,this._time1=6800,this._time2=7300,this._num=0,this.game=t,this.Num=e,this._end=i,this._fun=n,this._ob=o,this.doAnim()}return t.prototype.clearType=function(){for(var t=1;t<=this.typeOverNum;++t)this.game.ui("over_"+t).alpha=0},t.prototype.doAnim=function(){var t=this;this.playSound(),this.clearType(),this._isPlay=!0,egret.Tween.get(this).wait(this._time1).call(function(){egret.Tween.removeTweens(t),t._isPlay=!1,t.Num=t._num,t.playLight()},this),egret.Tween.get(this).to({Num:this.setEndIndex()-1},this._time2,egret.Ease.cubicInOut)},t.prototype.playSound=function(){GameSound.playEffectSound("effect_bet_1"),egret.Tween.get(this).wait(1e3).call(function(){GameSound.playEffectSound("effect_round")},this)},t.prototype.playLight=function(){this.Num=this._end;var t=this.game.ui("over_"+this._end);t&&(t.alpha=1),this._fun&&this._ob&&this._fun.call(this._ob)},t.prototype.setEndIndex=function(){var t=RandomUtils.getInstance().limitInteger(3,4)*this.typeOverNum+this._end;return t},t.prototype.returnIndex=function(t){var e=t%this.typeOverNum;return 0==e?this.typeOverNum:e},Object.defineProperty(t.prototype,"Num",{get:function(){return this._setNum},set:function(t){this._setNum=t,this.setAnim()},enumerable:!0,configurable:!0}),t.prototype.setAnim=function(){if(this._isPlay){var t=this.returnIndex(Math.ceil(this.Num));if(this._lastIndex!=t){var e=this.game.ui("over_"+t);e.alpha=1,-1==this.game.playEndIndexList.indexOf(t)&&egret.Tween.get(e).to({alpha:0},400),this._lastIndex=t}}},t.prototype.dispose=function(){this.game=null},t}();__reflect(AnimTimeLine.prototype,"AnimTimeLine");var RequestStatus=function(){function t(){}return t.SUCCEED=1,t.ERROR=2,t}();__reflect(RequestStatus.prototype,"RequestStatus");var ModuleOpenManager=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.openUIByClassName=function(t,i){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];e.loadToOpen.apply(e,[t,i].concat(n))},e.removeFromParent=function(t){if(t instanceof egret.DisplayObjectContainer&&e.Caches[t.className]&&e.CacheList.indexOf(t.className)>-1)App.EgretExpandUtils.removeFromParent(t);else{if("string"==typeof t){if(t=e.Caches[t],!t)return}GameContainerLayer.removeFromParent(t)}delete e.Caches[t.className]},e.loadToOpen=function(t,i){void 0===i&&(i="box");for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];var r=ClassConfig.Groups[t]||[];n.splice(0,0,t,r,i),e.openAfterLoadComplete.apply(this,n)},e.openAfterLoadComplete=function(t,i,n){var o=this;void 0===n&&(n="box");for(var r=[],s=3;s<arguments.length;s++)r[s-3]=arguments[s];r.splice(0,0,t,n),i.length?(App.EasyLoading.showLoading(),App.ResourceUtils.loadResource([],i,function(){App.EasyLoading.hideLoading(),e.openHandler.apply(o,r)},function(t,e,i){void 0===e&&(e=null),void 0===i&&(i=null)},this,1)):e.openHandler.apply(this,r)},e.openHandler=function(t,i){void 0===i&&(i="box");for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];var r=egret.getDefinitionByName(t),s=new r;return s.parentLayer=i,s.className=t,GameContainerLayer.getInstance()._addContainer(i,s,n),e.Caches[t]=s,s instanceof BaseBoxContainer&&s.showBoxAnimation(),s},e.cleanLayer=function(t){for(var i in e.Caches)e.Caches[i].parentLayer==t&&(e.removeFromParent(e.Caches[i]),delete e.Caches[i])},e.dispose=function(){this.LayersCache={},this.Caches={}},e.CacheList=[""],e.LayersCache={},e.Caches={},e.currentOpenModule=null,e}(BaseClass);__reflect(ModuleOpenManager.prototype,"ModuleOpenManager");var ClassConfig=function(){function t(){}return t.Groups={SignLayer:["sign"],RechargeLayer:["recharge"],GetMoneyLayer:["recharge"],RewardLayer:["reward"]},t}();__reflect(ClassConfig.prototype,"ClassConfig");var FilePath=function(){function t(){}return t.File_BuildAnimPath="resource/animation/build/",t.File_Npc="resource/animation/npc/",t.File_MiracleFlaPath="resource/animation/miracle/",t.File_OtherFlaPath="resource/animation/other/",t.File_FishFlaPath="resource/animation/fish/",t}();__reflect(FilePath.prototype,"FilePath");var ResManager=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.getProtoData=function(t){return this.getConfigData("protobuf")[t]},e.prototype.getIconData=function(){return this.getConfigData("item")},e.prototype.getNewData=function(){return this.getConfigData("item1")},e.prototype.getButtonData=function(){return this.getConfigData("buttonList")},e.prototype.getSignData=function(){return this.getConfigData("sign")},e.prototype.getLuckData=function(t){this.getConfigData("luckEven");return 1==t?this.getConfigData("luckBule"):this.getConfigData("luckYellow")},e.prototype.getSysData=function(t){return this.getConfigData("sys")[0]},e.prototype.getConfigData=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];t.indexOf("_json")<0&&(t+="_json");var n=RES.getRes(t);if(n){for(;e.length;)n=n[e.shift()];return n}},e}(BaseClass);__reflect(ResManager.prototype,"ResManager");var TextFieldManager=function(t){function e(e,i){var n=t.call(this,i)||this;return n._name=null,n._name=e,n}return __extends(e,t),e.getInstance=function(t,i){return void 0===t&&(t="normal"),void 0===i&&(i=0),this._instances[t]||(this._instances[t]=new e(t,i)),this._instances[t]},e.clear=function(){for(var t in e._instances)e._instances[t].clear()},e.onStage=function(){for(var t in e._instances)e._instances[t].onStage()},e.setFont=function(t,e){switch(e){case LangueManager.fn1:t.fontFamily="simhei"}},e.setStyle=function(t,e,i,n,o){void 0===e&&(e=!1),void 0===i&&(i=7422787),void 0===n&&(n=16777215),void 0===o&&(o=2),t.fontFamily=DisplayUtils.fontSet(),-1!=i&&(t.textColor=i),-1!=n&&(t.strokeColor=n,t.stroke=o),t.bold=e},e.getTxt=function(t,e){void 0===e&&(e=8);for(var i=0,n="",o=!1,r=0;r<t.length;r++){var s=t.charCodeAt(r);if(s>=1&&126>=s||s>=65376&&65439>=s?i++:i+=2,n+=t[r],i>=e){o=!0;break}}var t=o?n+"...":n;return t},e._instances={},e}(BaseCacheManager);__reflect(TextFieldManager.prototype,"TextFieldManager");var TimerManager=function(t){function e(){var e=t.call(this)||this;return e._handlers=null,e._delHandlers=null,e._currTime=null,e._currFrame=null,e._count=null,e._timeScale=null,e._leaveTime=0,e.fpsStep=1,e._handlers=[],e._delHandlers=[],e._currTime=egret.getTimer(),e._currFrame=0,e._count=0,e._timeScale=1,egret.Ticker.getInstance().register(e.onEnterFrame,e),e}return __extends(e,t),e.prototype.leave=function(){this._leaveTime=this._currTime},e.prototype.join=function(){if(this._leaveTime==this._currTime){var t=egret.getTimer()-this._leaveTime;Time.resetTimely(t);for(var e=0;e<this._count;e++){var i=this._handlers[e];i.dealTime+=t}}this._leaveTime=0},e.prototype.setTimeScale=function(t){this._timeScale=t},e.prototype.getTimeScale=function(){return this._timeScale},e.prototype.onEnterFrame=function(){if(this._currFrame++,0==this._currFrame%this.fpsStep){this._currTime=egret.getTimer();for(var t=0;t<this._count;t++){var e=this._handlers[t],i=e.userFrame?this._currFrame:this._currTime;i>=e.exeTime&&(e.method.call(e.methodObj,(this._currTime-e.dealTime)*this._timeScale,e.alreadyRepeatCount),e.dealTime=this._currTime,e.exeTime+=e.delay,e.repeat||(e.repeatCount>1?(e.repeatCount--,e.alreadyRepeatCount++):(e.complateMethod&&e.complateMethod.apply(e.complateMethodObj),this._delHandlers.push(e))))}for(;this._delHandlers.length;){var e=this._delHandlers.pop();this.remove(e.method,e.methodObj)}}},e.prototype.create=function(t,e,i,n,o,r,s){if(!(0>e||0>i||null==n)){this.remove(n,o);var a=ObjectPool2.pop("TimerHandler");a.userFrame=t,a.repeat=0==i,a.alreadyRepeatCount=1,a.repeatCount=i,a.delay=e,a.method=n,a.methodObj=o,a.complateMethod=r,a.complateMethodObj=s,a.exeTime=e+(t?this._currFrame:this._currTime),a.dealTime=this._currTime,this._handlers.push(a),this._count++}},e.prototype.doTimer=function(t,e,i,n,o,r){void 0===o&&(o=null),void 0===r&&(r=null),this.create(!1,t,e,i,n,o,r)},e.prototype.doFrame=function(t,e,i,n,o,r){void 0===o&&(o=null),void 0===r&&(r=null),this.create(!0,t,e,i,n,o,r)},Object.defineProperty(e.prototype,"count",{get:function(){return this._count},enumerable:!0,configurable:!0}),e.prototype.remove=function(t,e){for(var i=0;i<this._count;i++){var n=this._handlers[i];if(n.method==t&&n.methodObj==e){this._handlers.splice(i,1),n.method=n.methodObj=null,ObjectPool2.push(n),this._count--;break}}},e.prototype.removeAll=function(t){for(var e=0;e<this._count;e++){var i=this._handlers[e];i.methodObj==t&&(this._handlers.splice(e,1),i.method=i.methodObj=null,i.complateMethod=i.complateMethodObj=null,ObjectPool2.push(i),this._count--,e--)}},e.prototype.isExists=function(t,e){for(var i=0;i<this._count;i++){var n=this._handlers[i];if(n.method==t&&n.methodObj==e)return!0}return!1},e}(BaseClass);__reflect(TimerManager.prototype,"TimerManager");var TimerHandler=function(){function t(){this.delay=0,this.repeat=null,this.repeatCount=0,this.alreadyRepeatCount=1,this.userFrame=null,this.exeTime=0,this.method=null,this.methodObj=null,this.complateMethod=null,this.complateMethodObj=null,this.dealTime=0}return t.prototype.clear=function(){this.method=null,this.methodObj=null,this.complateMethod=null,this.complateMethodObj=null},t}();__reflect(TimerHandler.prototype,"TimerHandler");var ArrayUtils=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.emptyArr=function(t){for(var e=t.length-1,i=e;i>=0;i--)t.splice(i,1)},e.prototype.objChangeArr=function(t){var e=[];for(var i in t)e.push(t[i]);return e},e.prototype.creatArr=function(t,e,i){var n=t,e=e,o=i,r=[],s=n/o,a=0;if(1>s){var h=Math.floor(n/o);a=e*h+o}else if(1==s)a=t;else if(s>1)if(n%e==0)a=t;else{var l=n%e;a=t-l+e}for(var c=0;a>c;c++){var u={};r.push(u)}return r},e.prototype.dataReplace=function(t,e){for(var t=t,e=e;t.length;){var i=t.shift();e.pop(),e.unshift(i)}return e},e.prototype.changeTwoDimensionalArray=function(t,e){for(var i=t,e=e,n=i.length,o=Math.floor(n/e),r=[],s=[],a=0;o*e>a;a++)s.push(i.shift()),s.length==e&&(r.push(s),s=[]);if(i.length){n=i.length;for(var h=0;n>h;h++)s.push(i.shift());r.push(s)}return r},e.prototype.getRandomItem=function(t){var e=t.length;return e=Math.floor(Math.random()*e),t[e]},e.prototype.clearEmptyItem=function(t){for(var e=0;e<t.length;e++)(null==t[e]||""==t[e]||"undefined"==typeof t[e])&&(t.splice(e,1),e-=1);return t},e.prototype.deleteRepeating=function(t){t.sort();for(var e=[t[0]],i=1;i<t.length;i++)t[i]!==e[e.length-1]&&e.push(t[i]);return e},e.prototype.deleteRepeating2=function(t){t.sort();for(var e=[t[0]],i=1;i<t.length;i++)t[i]!==e[e.length-1]&&e.push(t[i]);return e},e.prototype.upsetArr=function(t){var e=t;return e.sort(function(){return.5-Math.random()}),e},e.prototype.SortByProps=function(t,e,i){var n=[],o=!0;if(i.length<1)for(var r in t){if(t[r]>e[r]){n.push(1);break}if(t[r]!==e[r]){n.push(-1);break}n.push(0)}else for(var s=0;s<i.length;s++){var a=i[s];for(var h in a){if(o="asc"===a[h],t[h]>e[h]){n.push(o?1:-1);break}if(t[h]!==e[h]){n.push(o?-1:1);break}n.push(0)}}for(var l=0;l<n.length;l++)if(1===n[l]||-1===n[l])return n[l];return 0},e}(BaseClass);__reflect(ArrayUtils.prototype,"ArrayUtils");var AverageUtils=function(){function t(t){void 0===t&&(t=10),this.nums=[],this.numsLen=0,this.numSum=0,this.maxNum=t}return t.prototype.push=function(t){this.numsLen>this.maxNum&&(this.numsLen--,this.numSum-=this.nums.shift()),this.nums.push(t),this.numSum+=t,this.numsLen++},t.prototype.getValue=function(){return this.numSum/this.numsLen},t.prototype.clear=function(){this.nums.splice(0),this.numsLen=0,this.numSum=0},t}();__reflect(AverageUtils.prototype,"AverageUtils");var CommonUtils=function(t){function e(){var e=t.call(this)||this;return e.labelIsOverLenght=function(t,e){var i=null;i=1e5>e?e:1e6>e?Math.floor(e/1e3/10).toString()+LangueManager.getText("183"):Math.floor(e/1e4).toString()+LangueManager.getText(183),t.text=i},e}return __extends(e,t),e.prototype.isChn=function(t){var e=/^[\u4E00-\u9FA5]+$/;return e.test(t)?!0:!1},e.prototype.copyDataHandler=function(t){var e;if(t instanceof Array)e=[];else{if(!(t instanceof Object))return t;e={}}for(var i=Object.keys(t),n=0,o=i.length;o>n;n++){var r=i[n];e[r]=this.copyDataHandler(t[r])}return e},e.prototype.lock=function(){var t=egret.MainContext.instance.stage;t.touchEnabled=t.touchChildren=!1},e.prototype.unlock=function(){var t=egret.MainContext.instance.stage;t.touchEnabled=t.touchChildren=!0},e.prototype.isArray=function(t){return t instanceof Array},e.prototype.isObject=function(t){var e=t.toString();return e.indexOf("object")>-1},e.prototype.strlen=function(t){for(var e=0,i=0;i<t.length;i++){var n=t.charCodeAt(i);n>=1&&126>=n||n>=65376&&65439>=n?e++:e+=2}return e},e.prototype.toNumberArr=function(t){for(var e=0;e<t.length;e++)t[e]=parseFloat(t[e]);return t},e.prototype.randomNumberByLimit=function(t,e){var i=e-t+1,n=Math.floor(Math.random()*i+t);return n},e}(BaseClass);__reflect(CommonUtils.prototype,"CommonUtils");var DateUtils=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.getFormatBySecond=function(t,e){void 0===e&&(e=1);var i="";switch(e){case 1:i=this.getFormatBySecond1(t);break;case 2:i=this.getFormatBySecond2(t);break;case 3:i=this.getFormatBySecond3(t);break;case 4:i=this.getFormatBySecond4(t);break;case 5:i=this.getFormatBySecond5(t);break;case 6:i=this.getFormatBySecond6(t);break;case 7:i=this.getFormatBySecond7(t);break;case 8:i=this.getFormatBySecond8();break;case 10:i=this.getFormatBySecond10(t)}return i},e.prototype.getFormatBySecond1=function(t){void 0===t&&(t=0);var e=Math.floor(t/3600);t%=3600;var i=Math.floor(t/60),n=t%60;return(e>=10?e:"0"+e)+":"+(i>=10?i:"0"+i)+":"+(n>=10?n:"0"+n)},e.prototype.getFormatBySecond3=function(t){void 0===t&&(t=0),t%=3600;var e=Math.floor(t/60),i=t%60;return(10>e?"0"+e:e)+":"+(10>i?"0"+i:i)},e.prototype.getFormatBySecond2=function(t){var e=new Date(t),i=e.getFullYear(),n=e.getMonth()+1,o=e.getDate(),r=e.getHours(),s=e.getMinutes(),a=e.getSeconds();return i+"-"+n+"-"+o+" "+r+":"+s+":"+a},e.prototype.getFormatBySecond4=function(t){var e=Math.floor(t/3600);return e>0?e>24?Math.floor(e/24)+LangueManager.getText("842"):e+LangueManager.getText("843"):Math.floor(t/60)+LangueManager.getText("844")},e.prototype.getFormatBySecond5=function(t){var e="",i=Math.floor(t/3600/24);t-=3600*i*24;var n=Math.floor(t/3600);t-=3600*n;var o=Math.floor(t/60),r=t%60;return 0!=i&&(e=e+i+LangueManager.getText("842")),0!=n&&(e=e+n+LangueManager.getText("845")),0!=o&&(e=e+o+LangueManager.getText("846")),0!=r&&(e=e+r+LangueManager.getText("847")),e},e.prototype.formatActivityTime=function(t){var i=Math.floor(t/86400),n=t%86400,o="";return i>0&&(o=""+i+LangueManager.getText("842")),o+=e.getInstance().getFormatBySecond(n)},e.prototype.getFormatBySecond6=function(t){var e=new Date(t),i=e.getFullYear(),n=e.getMonth()+1,o=e.getDate();return i+LangueManager.getText("848")+n+LangueManager.getText("849")+o+LangueManager.getText("850")},e.prototype.getFormatBySecond7=function(t){var e=new Date(t),i=e.getHours(),n=e.getMinutes(),o=e.getSeconds();return i+":"+n+":"+o},e.prototype.getFormatBySecond8=function(){var t=new Date,e=t.getFullYear(),i=t.getMonth()+1,n=i>9?i:"0"+i,o=t.getDate(),r=o>9?o:"0"+o;return e+"-"+n+"-"+r},e.prototype.foundTime=function(t){var e=this.getFormatBySecond8();return-1==t.indexOf(e)?t.split(" ")[0]:t.split(" ")[1].slice(0,5)},e.prototype.getFormatBySecond10=function(t){var e=new Date(t),i=e.getFullYear(),n=e.getMonth()+1,o=10>n?"0"+n:n,r=e.getDate(),s=10>r?"0"+r:r,a=e.getHours(),h=10>a?"0"+a:a,l=e.getMinutes(),c=10>l?"0"+l:l;return i+"-"+o+"-"+s+" "+h+":"+c},e}(BaseClass);__reflect(DateUtils.prototype,"DateUtils");var DeviceUtils=function(t){function e(){var e=t.call(this)||this;return e.deviceTypeArr=["iPhone","Android","Windows","Linux","Symbian","Macintosh"],e.windows0s={"Windows NT 6.4":"Windows 10","Windows NT 6.3":"Windows 8.1","Windows NT 6.2":"Windows 8","Windows NT 6.0":"Windows 8","Windows NT 6.1":"Windows 7","Windows NT 5.1":"Windows XP"},e}return __extends(e,t),Object.defineProperty(e.prototype,"IsHtml5",{get:function(){return egret.Capabilities.runtimeType==egret.RuntimeType.WEB},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"IsMobile",{get:function(){return egret.MainContext.deviceType==egret.MainContext.DEVICE_MOBILE},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"IsPC",{get:function(){return egret.MainContext.deviceType==egret.MainContext.DEVICE_PC},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"IsQQBrowser",{get:function(){return this.IsHtml5&&-1!=navigator.userAgent.indexOf("MQQBrowser")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"IsIEBrowser",{get:function(){return this.IsHtml5&&-1!=navigator.userAgent.indexOf("MSIE")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"IsFirefoxBrowser",{get:function(){return this.IsHtml5&&-1!=navigator.userAgent.indexOf("Firefox")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"IsChromeBrowser",{get:function(){return this.IsHtml5&&-1!=navigator.userAgent.indexOf("Chrome")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"IsSafariBrowser",{get:function(){return this.IsHtml5&&-1!=navigator.userAgent.indexOf("Safari")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"IsOperaBrowser",{get:function(){return this.IsHtml5&&-1!=navigator.userAgent.indexOf("Opera")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"DeviceOs",{get:function(){var t,e="";return t=this.IsHtml5?navigator.userAgent.toLowerCase():egret.Capabilities.os.toLowerCase(),-1!=t.indexOf("ipod")||-1!=t.indexOf("iphone")||-1!=t.indexOf("ipad")||-1!=t.indexOf("macintosh")||-1!=t.indexOf("ios")?e="ios":-1!=t.indexOf("windows")?e="windows":-1!=t.indexOf("android")?e="android":-1!=t.indexOf("symbian")?e="symbian":-1!=t.indexOf("linux")&&(e="linux"),e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"DeviceOsVersion",{get:function(){var t="";if(this.IsHtml5){var e=navigator.userAgent,i=App.StringUtils.getInBracketTxt(e);if(!i||i.length<1)return t;var n=i[0];if(i=n.split(";"),!i||i.length<1)return t;var o=i.length;if(-1!=n.indexOf("iPod")||-1!=n.indexOf("iPhone")||-1!=n.indexOf("iPad")||-1!=n.indexOf("Macintosh"))for(var r=0;o>r;r++){var s=i[r],a=s.indexOf("OS");if(-1!=a){var h=s.indexOf(" ",a+3);t=s.substring(a+3,h);break}}else if(-1!=n.indexOf("Windows NT"))for(var r=0;o>r;r++){var s=i[r];if(-1!=s.indexOf("Windows NT")){t=this.windows0s[s];break}}else if(-1!=n.indexOf("Windows Phone"))for(var r=0;o>r;r++){var s=i[r];if(-1!=s.indexOf("0S")){t=s;break}}else if(-1!=n.indexOf("Android"))for(var r=0;o>r;r++){var s=i[r],a=s.indexOf("Android");if(-1!=a){t=s.substring(a+8);break}}else if(-1!=n.indexOf("Symbian"))for(var r=0;o>r;r++){var s=i[r];if(-1!=s.indexOf("OS")){t=s;break}}else-1!=n.indexOf("Linux")&&(t=n)}return t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isAndroid",{get:function(){return"android"==this.DeviceOs},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"DeviceWAndH",{get:function(){var t="";return t=this.IsHtml5?window.screen.width+"*"+window.screen.height:App.StageUtils.getWidth()+"*"+App.StageUtils.getHeight()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"DeviceUA",{get:function(){var t="";return this.IsHtml5&&(t=navigator.userAgent),t},enumerable:!0,configurable:!0}),e}(BaseClass);__reflect(DeviceUtils.prototype,"DeviceUtils");var DisplayUtils=function(t){function e(){var e=t.call(this)||this;return App.TimerManager.doTimer(18e4,0,e.removeHeadCache,e),e}return __extends(e,t),e.prototype.removeHeadCache=function(){for(var t in GameUtils.headUrlDic)delete GameUtils.headUrlDic[t]},e.prototype.loadCrossImg=function(t,i,n){if(void 0===n&&(n=!0),i){if("webgl"!=egret.Capabilities.renderMode)return t.visible=n,t.startLoad(i),void(t.gameAnchorX=t.gameAnchorY=.5);var o=new Image;o.crossOrigin="*",o.src=i,o.onload=function(){var i=e.getBase64Image(o),n=e.getInstance().getTextureByBase64(i),r=new egret.Bitmap(n);r.anchorOffsetX=r.width>>1,r.anchorOffsetY=r.height>>1;var s=t.parent.getChildIndex(t);t.parent.addChildAt(r,s),t.visible=!1}}},e.prototype.getTextureByBase64=function(t){var e=new Image;e.src=t;var i=new egret.Texture;return i._setBitmapData(new egret.BitmapData(e)),i},e.getBase64Image=function(t){var e=document.createElement("canvas");e.width=t.width,e.height=t.height;var i=e.getContext("2d");i.drawImage(t,0,0,t.width,t.height);var n=t.src.substring(t.src.lastIndexOf(".")+1).toLowerCase(),o=e.toDataURL("image/"+n);return o},e.prototype.removeFromParent=function(t){t&&t.parent&&t.parent.removeChild(t)},e.prototype.addOneNotLoadArmature=function(t,e,i,n,o){void 0===o&&(o=null),n&&App.EasyLoading.showLoading();var r=App.ResourceUtils.getDBResourceArr([t]);o&&(r=r.concat(o)),App.ResourceUtils.loadResource(r,[],function(){n&&App.EasyLoading.hideLoading(),e.apply(i,[t])},null,this)},e.prototype.addOneNewOtherAnimation=function(t,e,i,n,o,r,s,a,h,l,c,u){var p=this;void 0===n&&(n=1),void 0===o&&(o=!1),void 0===r&&(r=0),void 0===s&&(s=null),void 0===a&&(a=!1),void 0===h&&(h=0),void 0===l&&(l=0),void 0===c&&(c=null),void 0===u&&(u=null);var d;return App.DisplayUtils.addOneNotLoadArmature(e,function(){d=DragonBonesFactory.getInstance().makeArmature(t,e,1);var i=s?s:GameContainerLayer.getInstance().getLayerByType(GameContainerLayer.UI_TIP_TYPE);a&&(d.x=.5*App.StageUtils.getWidth(),d.y=.5*App.StageUtils.getHeight()),(0!=h||0!=l)&&(d.x=h,d.y=l),App.EgretExpandUtils.addChild(i,d),d.play("1",n),1==r?d.scaleY=App.StageUtils.getHeight()/1136:"",d.touchEnabled=o,n&&d.addCompleteCallFunc(function(){u&&c&&c.apply(u),d&&(d.stop(),App.EgretExpandUtils.removeFromParent(d),d.destroy(),d=null)},p)},this,!0),d},e.fontSet=function(){return"ios"==App.DeviceUtils.DeviceOs?"SimHei,STHeiti,HelveticaNeue":"windows"==App.DeviceUtils.DeviceOs?"SimHei":"android"==App.DeviceUtils.DeviceOs?LangueManager.fn1+",Droid Sans Fallback,SimHei,Noto Sans CJK,HelveticaNeue":"symbian"==App.DeviceUtils.DeviceOs?"SimHei":("linux"==App.DeviceUtils.DeviceOs,"SimHei")},e.getStageHeight=function(){return App.StageUtils.getStage().stageHeight},e.removeAllChildren=function(t){for(;t.numChildren;)t.removeChildAt(0)},e.clearChildren=function(t){if(t instanceof BaseContainer)t.dispose();else if(t instanceof egret.DisplayObjectContainer)for(var i=t;i.numChildren>0;){var n=i.removeChildAt(0);e.clearChildren(n)}},e.isVisible=function(t){for(;t.visible&&t.parent;)t=t.parent;return t.visible},e}(BaseClass);__reflect(DisplayUtils.prototype,"DisplayUtils");var EgretExpandUtils=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.addChild=function(t,e){t&&e&&t.addChild(e)},e.prototype.addChildAt=function(t,e,i){t&&e&&t.addChildAt(e,i)},e.prototype.removeFromParent=function(t){t&&t.className&&ModuleOpenManager.Caches[t.className]?ModuleOpenManager.removeFromParent(t.className):t&&t.parent&&t.parent.removeChild(t)},e.prototype.removeArmatureFromParent=function(t){t instanceof DragonBonesArmature&&(t.destroy(),t=null)},e.prototype.removeChildAt=function(t,e){t&&t.removeChildAt(e)},e.prototype.removeAllChild=function(t){if(t)for(;t.numChildren;)t.removeChildAt(0)},e.prototype.setTextFieldInputType=function(t,e){t.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){t._inputUtils.stageText.inputElement.type=e},this)},e}(BaseClass);__reflect(EgretExpandUtils.prototype,"EgretExpandUtils");var FilterUtils=function(){function t(){}return t.alphaFilter=[new egret.ColorMatrixFilter([.3,0,0,0,0,0,.3,0,0,0,0,0,.3,0,0,0,0,0,1,0])],t.grayFilter=[new egret.ColorMatrixFilter([.3,.6,0,0,0,.3,.6,0,0,0,.3,.6,0,0,0,0,0,0,1,0])],t.grayFilterAndGolw=[new egret.ColorMatrixFilter([.3,.6,0,0,0,.3,.6,0,0,0,.3,.6,0,0,0,0,0,0,1,0]),new egret.GlowFilter(65280,1,20,20,4)],t.golwFilter=[new egret.GlowFilter(65280,1,20,20,4)],t}();__reflect(FilterUtils.prototype,"FilterUtils");var MathUtils=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.getAngle=function(t){return 180*t/Math.PI},e.numFix=function(t){var e=t.toString(),i=parseInt(t),n="";return n=e.length>7?(i/1e7).toFixed(1)+LangueManager.getText("222"):e.length>6?(i/1e6).toFixed(1)+LangueManager.getText("220"):e.length>4?(i/1e4).toFixed(1)+LangueManager.getText("221"):e},e.prototype.getRadian2=function(t,e,i,n){var o=i-t,r=n-e;return Math.atan2(r,o)},e.prototype.getDistance=function(t,e,i,n){var o=i-t,r=n-e,s=o*o+r*r;return Math.sqrt(s)},e.isNumber=function(t){return"number"==typeof t&&!isNaN(t)},e}(BaseClass);__reflect(MathUtils.prototype,"MathUtils");var ObjectPool2=function(){function t(){this._objs=null,this._objs=new Array}return t.prototype.pushObj=function(t){this._objs.push(t)},t.prototype.popObj=function(){return this._objs.length>0?this._objs.pop():null},t.prototype.clear=function(){for(;this._objs.length>0;)this._objs.pop()},t.pop=function(e){for(var i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];t._content[e]||(t._content[e]=[]);var o=t._content[e];if(o.length)return o.pop();var r,s=egret.getDefinitionByName(e),a=i.length;return 0==a?r=new s:1==a?r=new s(i[0]):2==a?r=new s(i[0],i[1]):3==a?r=new s(i[0],i[1],i[2]):4==a?r=new s(i[0],i[1],i[2],i[3]):5==a&&(r=new s(i[0],i[1],i[2],i[3],i[4])),r.ObjectPoolKey=e,r},t.popWithExtraKey=function(e,i){t._content[e]||(t._content[e]=[]);var n,o=t._content[e];if(o.length)for(var r=0;r<o.length;r++)if(o[r].extraKey==i){n=o[r],o.splice(r,1);break}if(!n){var s=egret.getDefinitionByName(e);n=new s(i),n.extraKey=i,n.ObjectPoolKey=e}return n},t.push=function(e){if(null==e)return!1;var i=e.ObjectPoolKey;return t._content[i]?(t._content[i].push(e),!0):!1},t.clear=function(){t._content={}},t.clearClass=function(e,i){void 0===i&&(i=null);for(var n=t._content[e];n&&n.length;){var o=n.pop();i&&o[i](),o=null}t._content[e]=null,delete t._content[e]},t.dealFunc=function(e,i){var n=t._content[e];if(null!=n){var o=0,r=n.length;for(o;r>o;o++)n[o][i]()}},t._content={},t}();__reflect(ObjectPool2.prototype,"ObjectPool2");var RandomUtils=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.limit=function(t,e){t=Math.min(t,e),e=Math.max(t,e);var i=e-t;return t+Math.random()*i},e.prototype.limitInteger=function(t,e){return Math.round(this.limit(t,e))},e.prototype.randomArray=function(t){var e=Math.floor(Math.random()*t.length);return t[e]},e}(BaseClass);__reflect(RandomUtils.prototype,"RandomUtils");var ResourceUtils=function(t){function e(){var e=t.call(this)||this;return e._onConfigComplete=null,e._onConfigCompleteTarget=null,e._groups=null,e._groupIndex=0,e._groups={},RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,e.onResourceLoadComplete,e),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,e.onResourceProgress,e),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,e.onResourceError,e),e}return __extends(e,t),e.prototype.loadGroup=function(t,e,i,n,o){void 0===o&&(o=null),this._groups[t]=[e,i,n,o],RES.loadGroup(t)},e.prototype.loadGroups=function(t,e,i,n,o){RES.createGroup(t,e,!0),this.loadGroup(t,i,n,o)},e.prototype.onResourceLoadComplete=function(t){var e=t.groupName;if(this._groups[e]){var i=this._groups[e][0],n=this._groups[e][2];null!=i&&i.call(n),this._groups[e]=null,delete this._groups[e]}},e.prototype.onResourceProgress=function(t){var e=t.groupName;if(this._groups[e]){var i=this._groups[e][1],n=this._groups[e][2];null!=i&&i.call(n,t.itemsLoaded,t.itemsTotal)}},e.prototype.onResourceError=function(t){var e=t.groupName;if(this._groups[e]){var i=this._groups[e][3],n=this._groups[e][2];null!=i&&i.call(n)}},e.prototype.loadResource=function(t,e,i,n,o,r){void 0===t&&(t=[]),void 0===e&&(e=[]),void 0===i&&(i=null),void 0===n&&(n=null),void 0===o&&(o=null),void 0===r&&(r=0);for(var s=0,a=0,h=e.length;h>a;a++){var l=RES.getGroupByName(e[a]);l&&(s+=l.length)}if(s+=t.length,0==s)return void i.call(o);var c=t.concat(e),u="loadGroup"+this._groupIndex++;RES.createGroup(u,c,!0),this._groups[u]=[i,n,o],RES.loadGroup(u,r)},e.prototype.getDBResourceArr=function(t){for(var e=[],i=0;i<t.length;i++)e.push(t[i]+DragonBonesFactory.SKE),e.push(t[i]+DragonBonesFactory.TEX_J),e.push(t[i]+DragonBonesFactory.TEX_P);return e},e.prototype.disposeRes=function(t){for(var e=0;e<t.length;e++)RES.destroyRes(t[e])},e.prototype.initQQhallImg=function(){},e}(BaseClass);__reflect(ResourceUtils.prototype,"ResourceUtils");var StageUtils=function(t){function e(){var e=t.call(this)||this;return e.mouseX=0,e.mouseY=0,e}return __extends(e,t),e.prototype.getHeight=function(){return App.StageUtils.getStage().stageHeight},e.prototype.getWidth=function(){return App.StageUtils.getStage().stageWidth
},e.prototype.getStage=function(){return egret.MainContext.instance.stage},e.prototype.setXY=function(t){this.mouseX=t.stageX,this.mouseY=t.stageX,console.log(this.getStageX,this.getStageY)},Object.defineProperty(e.prototype,"getStageX",{get:function(){return this.mouseX},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"getStageY",{get:function(){return this.mouseY},enumerable:!0,configurable:!0}),e}(BaseClass);__reflect(StageUtils.prototype,"StageUtils");var StringUtils=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.trimSpace=function(t){return t.replace(/^\s*(.*?)[\s\n]*$/g,"$1")},e.prototype.Trim=function(t,e){void 0===e&&(e="g");var i;return i=t.replace(/(^\s+)|(\s+$)/g,""),"g"==e.toLowerCase()&&(i=i.replace(/\s/g,"")),i},e.prototype.replaceCharByStr=function(t){return t=t.replace(/\\/g,"\\")},e.prototype.getStringLengthAndNum=function(t,e){for(var i=t.split(""),n=i.length,o=0,r=0,s=!1,a=0;n>a;a++){var h=i[a];o+=this.isChinese(h)?2:1,s||(o==e?(r=a,s=!0):o>e&&(r=a-1,s=!0))}return{len:o,index:r+1}},e.prototype.strlen=function(t){for(var e=0,i=0;i<t.length;i++){var n=t.charCodeAt(i);n>=1&&126>=n||n>=65376&&65439>=n?e++:e+=2}return e},e.prototype.isABCAndNumber=function(t){var e=/^[A-Za-z0-9]+$/;return e.test(t)?!0:!1},e.del_html_tags=function(t,e,i){var n=new RegExp(e,"g");return t.replace(n,i)},e.getStrMiddleTags=function(t,e,i){return t?this.del_html_tags(this.del_html_tags(t,e,""),i,""):""},e.prototype.getInBracketTxt=function(t){for(var e=new RegExp("\\((.| )+?\\)","igm"),i=t.match(e),n=0;n<i.length;n++){var o=i[n];i[n]=o.substring(1,o.length-1)}return i},e.subString=function(t,e,i){void 0===i&&(i="");var n=new egret.ByteArray;return n.writeUTFBytes(t),n.position=0,n.length>e?n.readUTFBytes(e)+i:t},e.prototype.isChinese=function(t){var e=/^[u4E00-u9FA5]+$/;return e.test(t)?!1:!0},e}(BaseClass);__reflect(StringUtils.prototype,"StringUtils");var AutoReleasePoolObject=function(){function t(){this._counter=1}return t.prototype.retain=function(){this._counter++},t.prototype.release=function(){this._counter--,0==this._counter&&this.onRelease()},t.prototype.autorelease=function(){},t.prototype.onRelease=function(){},t}();__reflect(AutoReleasePoolObject.prototype,"AutoReleasePoolObject");var ObjectPool=function(){function t(t){this._objects=[],this._data={name:t}}return t.prototype.pop=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(0==this._objects.length){var i=BaseFactory.getInstance("objectPool").newClass(this._data);this._objects.push(i)}var n=this._objects.shift();return n.initialize.apply(n,t),n},t.prototype.push=function(t){t&&-1==this._objects.indexOf(t)&&(t.clear(),this._objects.push(t))},t.prototype.clear=function(){for(;this._objects.length;)this._objects.shift().clear()},t.getInstance=function(e){return this._pools.hasOwnProperty(e)||(t._pools[e]=new t(e)),t._pools[e]},t.push=function(e,i){t.getInstance(e).push(i)},t.pop=function(e){for(var i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];var o=t.getInstance(e);return o.pop.apply(o,i)},t.clear=function(e){var i=t.getInstance(e);i.clear(),delete t._pools[e]},t._pools={},t}();__reflect(ObjectPool.prototype,"ObjectPool");var gameMain,Main=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.DEBUG=!0,e.ONLINE=!0,e.gameUrl="",e}return __extends(e,t),e.prototype.createChildren=function(){t.prototype.createChildren.call(this);egret.localStorage.getItem("language");App.languageType=1,RES.setMaxLoadingThread(8),gameMain=this,this.gameUrl="scene";var e=this.stage.stageHeight/this.stage.stageWidth;1.34>e||e>1.775?(this.stage.scaleMode=egret.StageScaleMode.SHOW_ALL,1.5>e&&this.stage.setContentSize(640,960)):this.stage.scaleMode=egret.StageScaleMode.FIXED_WIDTH,MyJSON.init(),new ProxyListenerManager,egret.lifecycle.addLifecycleListener(function(t){}),egret.lifecycle.onPause=function(){egret.ticker.pause()},egret.lifecycle.onResume=function(){egret.ticker.resume()};var i=new AssetAdapter;egret.registerImplementation("eui.IAssetAdapter",i),egret.registerImplementation("eui.IThemeAdapter",new ThemeAdapter),this.runGame()["catch"](function(t){console.log(t)})},e.prototype.runGame=function(){return __awaiter(this,void 0,void 0,function(){var t,e;return __generator(this,function(i){switch(i.label){case 0:return[4,this.loadResource()];case 1:return i.sent(),[4,RES.getResAsync("description_json")];case 2:return t=i.sent(),[4,platform.login()];case 3:return i.sent(),[4,platform.getUserInfo()];case 4:return e=i.sent(),console.log(e),[2]}})})},e.prototype.loadResource=function(){return __awaiter(this,void 0,void 0,function(){var t,e,i,n;return __generator(this,function(o){switch(o.label){case 0:return o.trys.push([0,4,,5]),t=new LoadingUI,this.addChildAt(GameContainerLayer.getInstance(),0),App.EgretExpandUtils.addChild(GameContainerLayer.getInstance().getLayerByType(GameContainerLayer.UI_TIP_TYPE),t),e="resource/default.rescopy"+App.languageType+".json",i=this.DEBUG?"resource/default.res.json":e+"?v="+App.version,[4,RES.loadConfig(i,"resource/")];case 1:return o.sent(),[4,this.loadTheme()];case 2:return o.sent(),[4,RES.loadGroup("preload",0,t)];case 3:return o.sent(),App.EgretExpandUtils.removeFromParent(t),this.creatLoadView(),[3,5];case 4:return n=o.sent(),console.error(n),[3,5];case 5:return[2]}})})},e.prototype.loadTheme=function(){var t=this;return new Promise(function(e,i){var n=t.DEBUG?"resource/default.thm.json":"resource/default.thm.json?v="+App.version,o=new eui.Theme(n,t.stage);o.addEventListener(eui.UIEvent.COMPLETE,function(){e()},t)})},e.prototype.creatLoadView=function(){this.loadingView=new LoadingLayer,App.EgretExpandUtils.addChild(GameContainerLayer.getInstance().getLayerByType(GameContainerLayer.UI_TIP_TYPE),this.loadingView),RES.loadGroup("game"),this.loadingView.setViewText(LangueManager.getText("11")),RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this)},e.prototype.onResourceLoadError=function(t){},e.prototype.onItemLoadError=function(t){},e.prototype.onResourceProgress=function(t){(t.groupName==this.gameUrl||"game"==t.groupName)&&(this.loadingView.visible=!0,this.loadingView.onProgress(t.itemsLoaded,t.itemsTotal))},e.prototype.onResourceLoadComplete=function(t){t.groupName==this.gameUrl?this.creatScene():"game"==t.groupName&&this.createGame()},e.prototype.createGame=function(){var t=new FloatingTipsLayer;GameContainerLayer.addToTipContainer(t),this.creatLogin()},e.prototype.loadSceneRes=function(){RES.loadGroup(this.gameUrl),this.loadingView.onProgress(0,0)},e.prototype.creatLogin=function(){ModuleOpenManager.openUIByClassName("LoginLayer",GameContainerLayer.UI_BOX_TYPE)},e.prototype.creatScene=function(){this.setLoadingHide();var t=new GameScene;GameContainerLayer.addToCommonContainer(t)},e.prototype.setLoadingHide=function(){this.loadingView&&(this.loadingView.visible=!1)},e}(eui.UILayer);__reflect(Main.prototype,"Main");var MyJSON=function(){function t(){}return t.init=function(){var t=JSON.parse;JSON.parse=function(e){if(!e)return console.log("JSON.parse_ERROR："+e),null;var i=null;try{i=t(e)}catch(n){console.log("JSON.parse_ERROR："+e)}return i}},t.parse=function(t,e){if(!t)return console.log("JSON.parse_ERROR："+e+" --- "+t),null;var i=null;try{i=JSON.parse(t)}catch(n){console.log("JSON.parse_ERROR："+e+" --- "+t)}return i},t}();__reflect(MyJSON.prototype,"MyJSON");var DebugPlatform=function(){function t(){}return t.prototype.getUserInfo=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2,{nickName:"username"}]})})},t.prototype.login=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2]})})},t}();__reflect(DebugPlatform.prototype,"DebugPlatform",["Platform"]),window.platform||(window.platform=new DebugPlatform);var App=function(){function t(){}return Object.defineProperty(t,"MessageCenter",{get:function(){return MessageCenter.getInstance(0)},enumerable:!0,configurable:!0}),Object.defineProperty(t,"TimerManager",{get:function(){return TimerManager.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(t,"DateUtils",{get:function(){return DateUtils.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(t,"MathUtils",{get:function(){return MathUtils.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(t,"RandomUtils",{get:function(){return RandomUtils.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(t,"DisplayUtils",{get:function(){return DisplayUtils.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(t,"StageUtils",{get:function(){return StageUtils.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(t,"SoundManager",{get:function(){return SoundManager.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(t,"StringUtils",{get:function(){return StringUtils.getInstance()},enumerable:!0,configurable:!0}),t.trace=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];console.log.apply(console,t)},Object.defineProperty(t,"DeviceUtils",{get:function(){return DeviceUtils.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(t,"EgretExpandUtils",{get:function(){return EgretExpandUtils.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(t,"ResourceUtils",{get:function(){return ResourceUtils.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(t,"ArrayUtils",{get:function(){return ArrayUtils.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(t,"EasyLoading",{get:function(){return EasyLoading.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(t,"ResManager",{get:function(){return ResManager.getInstance()},enumerable:!0,configurable:!0}),t.getSocket=function(){return Socket.getInstance()},t.version=-1,t.languageType=-1,t.userid="-1",t.token="",t.mailToken="",t.GAME_WIDTH=640,t.GAME_HEIGHT=1136,t}();__reflect(App.prototype,"App");var GameContainerLayer=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.lock=function(t){this.touchChildren=this.touchEnabled=!t},e.getInstance=function(){return null==e._instance&&(e._instance=new e,e._instance.init()),e._instance},e.addToTipContainer=function(t){for(var i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];t=e.formatContainer(t);var o=e.getInstance();return o._addContainer(e.UI_TIP_TYPE,t,i),t},e.removeFromParent=function(t){if(t instanceof BaseBoxContainer){var e=t;e.closeBoxAnimation()}else App.DisplayUtils.removeFromParent(t)},e.addToCommonContainer=function(t){for(var i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];var o=e.getInstance();o._addContainer(e.UI_COMMON_TYPE,t,i)},e.hasHistory=function(){var t=e.getInstance();return t.hasHistory()},e.clearHistory=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];var n=e.getInstance();n.clearHistory.apply(n,t)},e.getComponents=function(){var t=e.getInstance(),i=[];return i=i.concat(t._moduleLayer._children),i=i.concat(t._boxLayer._children),i=i.concat(t._topBoxLayer._children)},e.saveVisibles=function(){this._isVisibleSaved=!0;for(var t=e.getComponents(),i=0;i<t.length;i++)e._visibleState[t[i].hashCode]=t[i].visible},e.restoreVisibles=function(){for(var t=e.getComponents(),i=0;i<t.length;i++)e._visibleState.hasOwnProperty(t[i].hashCode)&&(t[i].visible=e._visibleState[t[i].hashCode]);e._visibleState={},e._isVisibleSaved=!1},e.setVisibles=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.saveVisibles();for(var n=e.getComponents(),o=0;o<n.length;o++){for(var r=!1,s=0;s<t.length;s++)if(n[o]instanceof t[s]){r=!0;break}r||(n[o].visible=!1)}},e.addToModuleContainer=function(t){for(var i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];var o=e.getInstance(),r=arguments,s=e.formatContainer(t);return o._history.push(r),o._addContainer(e.UI_MODULE_TYPE,s,i),s.isModule=!0,s},e.removeAllBox=function(){var t=e.getInstance();t.removeAllBox()},e.removeAllTopBox=function(){var t=e.getInstance();t.removeTopBox()},e.getBoxNum=function(){var t=e.getInstance();return t.getBoxNum()},e.getBoxName=function(){var t=e.getInstance();return t.getBoxName()},e.prototype.getBoxNum=function(){return this._boxLayer.numChildren},e.prototype.getBoxName=function(){return 0==this.getBoxNum()?null:this._boxLayer.getChildAt(0).__class__},e.formatContainer=function(t){if(t instanceof egret.DisplayObject)return t;var e=egret.getDefinitionByName(t.toString());return new e},e.prototype.createContainer=function(t){void 0===t&&(t=null);var e=new egret.DisplayObjectContainer;return e.width=0,e.height=0,this.addChild(e),null!=t&&(e.name=t),e},e.prototype.init=function(){this._commonLayer=this.createContainer("common"),this._moduleLayer=this.createContainer("modulebox"),this._boxLayer=this.createContainer("box"),this._topBoxLayer=this.createContainer("topbox"),this._tooltipLayer=this.createContainer("tooltip"),this._guideLayer=this.createContainer("guide"),this._tipLayer=this.createContainer("tip")},e.prototype.getLayerByType=function(t){var i;switch(t){case e.UI_TIP_TYPE:i=this._tipLayer;break;case e.UI_GUIDE_TYPE:i=this._guideLayer;break;case e.UI_TOOLTIP_TYPE:i=this._tooltipLayer;break;case e.UI_BOX_TYPE:i=this._boxLayer;break;case e.UI_TOP_BOX_TYPE:i=this._topBoxLayer;break;case e.UI_COMMON_TYPE:i=this._commonLayer;break;case e.UI_MODULE_TYPE:i=this._moduleLayer}return i},e.prototype.removeTopBox=function(){DisplayUtils.removeAllChildren(this._topBoxLayer)},e.prototype.removeAllBox=function(){DisplayUtils.removeAllChildren(this._boxLayer),DisplayUtils.removeAllChildren(this._topBoxLayer)},e.prototype.removeBoxChildren=function(t){for(var e=0;e<t.numChildren;e++){var i=t.getChildAt(e);App.DisplayUtils.removeFromParent(i)}},e.prototype.removeMoule=function(){for(var t=0;t<this._moduleLayer.numChildren;t++){var e=this._moduleLayer.getChildAt(t);App.DisplayUtils.removeFromParent(e)}},e.prototype._addContainer=function(t,i,n,o){var r;switch(t){case e.UI_TIP_TYPE:r=this._tipLayer;break;case e.UI_GUIDE_TYPE:r=this._guideLayer;break;case e.UI_TOOLTIP_TYPE:r=this._tooltipLayer;break;case e.UI_BOX_TYPE:r=this._boxLayer,e.IS_SINGLE_BOX&&this.removeBoxChildren(this._boxLayer);break;case e.UI_TOP_BOX_TYPE:this.removeBoxChildren(this._topBoxLayer),r=this._topBoxLayer;break;case e.UI_COMMON_TYPE:r=this._commonLayer;break;case e.UI_MODULE_TYPE:for(r=this._moduleLayer,this.removeBoxChildren(this._topBoxLayer),this.removeBoxChildren(this._boxLayer);r.numChildren>0;)e.removeFromParent(r.getChildAt(0));DisplayUtils.removeAllChildren(r);break;default:r=o,r&&DisplayUtils.removeAllChildren(r)}if(i){var s=[].concat(n);s.length>0&&s[s.length-1]&&s[s.length-1].hasOwnProperty("group")&&s.splice(s.length-1,1),r&&r.addChild(i),i.updateViewByParams&&i.updateViewByParams.apply(i,s),i.initDisplayHandler&&i.initDisplayHandler.apply(i,[])}},e.createView=function(t){for(var i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];return t=e.formatContainer(t),t.updateViewByParams&&t.updateViewByParams.apply(t,i),t.initDisplayHandler&&t.initDisplayHandler.apply(t,[]),t},e.prototype.isCanClearTime=function(){var t=this._tipLayer.numChildren>0||this._tooltipLayer.numChildren>0||this._guideLayer.numChildren>0||this._topBoxLayer.numChildren>0||this._boxLayer.numChildren>0||this._moduleLayer.numChildren>0;return t},e.prototype.haveChild=function(){return this._boxLayer.numChildren>0},e.UI_TIP_TYPE="tip",e.UI_GUIDE_TYPE="guide",e.UI_TOOLTIP_TYPE="tooltip",e.UI_TOP_BOX_TYPE="topBox",e.UI_BOX_TYPE="box",e.UI_COMMON_TYPE="common",e.UI_MODULE_TYPE="module",e.IS_SINGLE_BOX=!1,e._visibleState={},e._isVisibleSaved=!1,e}(egret.DisplayObjectContainer);__reflect(GameContainerLayer.prototype,"GameContainerLayer");var BezierAnimation=function(t){function e(e,i,n,o,r){void 0===i&&(i=!0),void 0===n&&(n=null),void 0===o&&(o=null),void 0===r&&(r=null);var s=t.call(this,e,n)||this;return s._points=[],s._canRotate=i,s._cf=o,s._co=r,s}return __extends(e,t),e.prototype.appendPoint=function(t){return this._points.length<4&&this._points.push(t),this},e.prototype.appendXY=function(t,e){return this._points.length<4&&this._points.push(new egret.Point(t,e)),this},e.prototype.update=function(i){if(4==this._points.length){var n=Math.pow(1-i,3)*this._points[0].x+3*this._points[1].x*i*(1-i)*(1-i)+3*this._points[2].x*i*i*(1-i)+this._points[3].x*Math.pow(i,3),o=Math.pow(1-i,3)*this._points[0].y+3*this._points[1].y*i*(1-i)*(1-i)+3*this._points[2].y*i*i*(1-i)+this._points[3].y*Math.pow(i,3);this._target.x=n,this._target.y=o,this._canRotate&&(this._target.rotation=e.getDegress(i,this._points[0],this._points[1],this._points[2],this._points[3]))}t.prototype.update.call(this,i)},e.prototype.onComplete=function(){t.prototype.onComplete.call(this),this._cf&&this._co&&this._cf.call(this._co)},e.prototype.run=function(e){t.prototype._run.call(this,e)},e.getDegress=function(t,e,i,n,o){var r=new egret.Point((1-t)*e.x+t*i.x,(1-t)*e.y+t*i.y),s=new egret.Point((1-t)*i.x+t*n.x,(1-t)*i.y+t*n.y),a=new egret.Point((1-t)*n.x+t*o.x,(1-t)*n.y+t*o.y),h=new egret.Point((1-t)*r.x+t*s.x,(1-t)*r.y+t*s.y),l=new egret.Point((1-t)*s.x+t*a.x,(1-t)*s.y+t*a.y),c=l.x-h.x,u=h.y-l.y,p=Math.atan2(-u,c),d=180*p/Math.PI;return d},e}(GameAnimation);__reflect(BezierAnimation.prototype,"BezierAnimation");var AssetAdapter=function(){function t(){}return t.prototype.getAsset=function(t,e,i){function n(n){e.call(i,n,t)}if(RES.hasRes(t)){var o=RES.getRes(t);o?n(o):RES.getResAsync(t,n,this)}else RES.getResByUrl(t,n,this,RES.ResourceItem.TYPE_IMAGE)},t}();__reflect(AssetAdapter.prototype,"AssetAdapter",["eui.IAssetAdapter"]);var DragonBonesArmature=function(t){function e(e){var i=t.call(this)||this;return i._lastUseTime=0,i._armature=e,i.addChild(i._armature),i._completeCalls=[],i._frameCalls=[],i._isPlay=!1,i._playName="",i.addEventListener(egret.Event.REMOVED_FROM_STAGE,i.onRemoveFromStage,i),i}return __extends(e,t),e.prototype.addListeners=function(){this._armature.addEventListener(dragonBones.EventObject.COMPLETE,this.completeHandler,this),this._armature.armature.eventDispatcher.addDBEventListener(dragonBones.EventObject.FRAME_EVENT,this.frameHandler,this)},e.prototype.removeListeners=function(){this._armature.removeEventListener(dragonBones.AnimationEvent.COMPLETE,this.completeHandler,this),this._armature.armature.eventDispatcher.removeDBEventListener(dragonBones.EventObject.FRAME_EVENT,this.frameHandler,this)},e.prototype.completeHandler=function(t){for(var e=0,i=this._completeCalls.length;i>e;e++){var n=this._completeCalls[e];n[0].apply(n[1],[t.animationState.name].concat(n[2]))}t.animationName==this._playName&&(this._playName="")},e.prototype.frameHandler=function(t){for(var e=0,i=this._frameCalls.length;i>e;e++){var n=this._frameCalls[e];n[0].apply(n[1],[t.bone,t.frameLabel])}},e.prototype.play=function(t,e){void 0===e&&(e=void 0),this._playName=t,this._lastUseTime=Math.floor(Date.now()/1e3),this.start(),void 0==e?this.getAnimation().play(t,0):this.getAnimation().play(t,e),this.getArmature().animation.timeScale=1},e.prototype.start=function(){this._isPlay||(this._isPlay=!0,this.addListeners(),this.getArmature().animation.play())},e.prototype.stop=function(){this._isPlay&&(this._isPlay=!1,this._playName="",this.removeListeners(),this.getArmature().animation.stop())},e.prototype.destroy=function(){this.isDestroy||(this.isDestroy=!0,egret.Tween.removeTweens(this),App.DisplayUtils.removeFromParent(this),this.stop(),this.removeChildren(),null!=this._armature&&(DragonBonesFactory.getInstance().destroyCreateArmature(this),this._armature.dispose(),this._armature=null),this._completeCalls&&(this._completeCalls.length=0,this._completeCalls=null),this._frameCalls&&(this._frameCalls.length=0,this._frameCalls=null))},e.prototype.removeAllCompleteCalls=function(){this._completeCalls&&(this._completeCalls.length=0)},e.prototype.addCompleteCallFunc=function(t,e,i){if(this._completeCalls){for(var n=0;n<this._completeCalls.length;n++){var o=this._completeCalls[n];if(o[0]==t&&o[1]==e)return}this._completeCalls.unshift([t,e,i])}},e.prototype.removeCompleteCallFunc=function(t,e){if(this._completeCalls)for(var i=0;i<this._completeCalls.length;i++){var n=this._completeCalls[i];n[0]==t&&n[1]==e&&(this._completeCalls.splice(i,1),i--)}},e.prototype.addFrameCallFunc=function(t,e){if(this._frameCalls){for(var i=0;i<this._frameCalls.length;i++){var n=this._frameCalls[i];if(n[0]==t&&n[1]==e)return}this._frameCalls.push([t,e])}},e.prototype.removeFrameCallFunc=function(t,e){if(this._frameCalls)for(var i=0;i<this._frameCalls.length;i++){var n=this._frameCalls[i];n[0]==t&&n[1]==e&&(this._frameCalls.splice(i,1),i--)}},e.prototype.onRemoveFromStage=function(t){this.stop()},e.prototype.getArmature=function(){return this._armature},e.prototype.getAnimation=function(){return this._armature.animation},e.prototype.getBone=function(t){return this._armature.armature.getBone(t)},e.prototype.getPlayName=function(){return this._playName},e.prototype.getBoneDisplay=function(t){return t.slot.getDisplay()},e.prototype.changeBoneImg=function(t,e){this._armature.armature.getSlot(t).display=e},e.prototype.changeBoneArm=function(t,e){this._armature.armature.getSlot(t).childArmature=e},e.prototype.changeBoneSkin=function(t,e){void 0===e&&(e=[]);var i=dragonBones.EgretFactory.factory.getArmatureData(t).defaultSkin;dragonBones.EgretFactory.factory.replaceSkin(this._armature.armature,i,!1,e)},Object.defineProperty(e.prototype,"lastUseTime",{get:function(){return this._lastUseTime},set:function(t){this._lastUseTime=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isPlay",{get:function(){return this._isPlay},enumerable:!0,configurable:!0}),e}(egret.DisplayObjectContainer);__reflect(DragonBonesArmature.prototype,"DragonBonesArmature");var DragonBonesFactory=function(t){function e(){var e=t.call(this)||this;return e.createArmatures={},e.createArmaturesFromFileDic={},e.averageUtils=new AverageUtils,e.factory=new dragonBones.EgretFactory,e.clocksLen=0,e.files=[],App.TimerManager.doTimer(5e3,0,e.checkDestroyCreateArmature,e),e}return __extends(e,t),e.prototype.initArmatureFile=function(t,e,i){t&&e&&i||egret.warn("**动画数据有误**",t,e,i),-1==this.files.indexOf(t.name)&&(this.addSkeletonData(t),this.addTextureAtlas(e,i),this.files.push(t.name))},e.prototype.removeArmatureFileAndRes=function(t){this.removeArmatureFile(t)&&(RES.exists(t+e.SKE)&&RES.destroyRes(t+e.SKE),RES.destroyRes(t+e.TEX_P),RES.destroyRes(t+e.TEX_J))},e.prototype.removeArmatureFile=function(t){var e=this.files.indexOf(t);return-1!=e?(this.removeCreateArmatures(t),this.removeSkeletonData(t),this.removeTextureAtlas(t),this.files.splice(e,1),!0):!1},e.prototype.removeCreateArmatures=function(t){for(var e=Object.keys(this.createArmatures),i=e.length,n=0;i>n;n++){var o=e[n],r=o.split(":")[0];if(r==t)for(;this.createArmatures[o]&&this.createArmatures[o].length;){var s=this.createArmatures[o][0];s.destroy(),s=null}}},e.prototype.clear=function(){for(;this.files.length;)this.removeArmatureFile(this.files[0])},e.prototype.addSkeletonData=function(t){this.factory.parseDragonBonesData(t)},e.prototype.addTextureAtlas=function(t,e){this.factory.parseTextureAtlasData(e,t)},e.prototype.removeSkeletonData=function(t){this.factory.removeSkeletonData(t)},e.prototype.removeTextureAtlas=function(t){this.factory.removeTextureAtlas(t)},e.prototype.makeArmature=function(t,i,n,o){if(void 0===n&&(n=1),void 0===o&&(o=!1),-1==this.files.indexOf(i)){var r=RES.getRes(i+e.SKE),s=RES.getRes(i+e.TEX_P),a=RES.getRes(i+e.TEX_J);if(!r)return egret.warn("动画文件："+i+" 没有加载成功！！"),null;this.initArmatureFile(r,s,a)}var h=this.factory.buildArmatureDisplay(t);if(null==h)return egret.warn("不存在Armature： "+t),null;o&&(h.armature.cacheFrameRate=24);var l=new DragonBonesArmature(h);l.fromFile=i,l.armatureName=t,l.lastUseTime=Math.floor(Date.now()/1e3);var c=l.fromFile+":"+l.getArmature().name;return this.createArmatures[c]||(this.createArmatures[c]=[]),this.createArmaturesFromFileDic[l.fromFile]||(this.createArmaturesFromFileDic[l.fromFile]=0),this.createArmatures[c].push(l),this.createArmaturesFromFileDic[l.fromFile]+=1,l},e.prototype.destroyCreateArmature=function(t){var e=t.fromFile+":"+t.getArmature().name,i=this.createArmatures[e];if(i){for(var n=0,o=i.length;o>n;n++)if(i[n]==t){i.splice(n,1),this.createArmaturesFromFileDic[t.fromFile]-=1;break}0==i.length&&(this.createArmatures[e]=null,delete this.createArmatures[e]),0==this.createArmaturesFromFileDic[t.fromFile]&&(this.createArmaturesFromFileDic[t.fromFile]=null,delete this.createArmaturesFromFileDic[t.fromFile])}},e.prototype.checkDestroyCreateArmature=function(){for(var t=Math.floor(Date.now()/1e3),e=5,i=Object.keys(this.createArmatures),n=i.length,o=0;n>o;o++){var r=i[o],s=r.split(":")[0],a=this.createArmatures[r];if(a){for(var h=a.length-1;h>=0;h--){var l=a[h];l.stage||l.autoDestroy&&t-l.lastUseTime>e&&(l.destroy(),l=null)}0==a.length&&(this.createArmatures[r]=null,delete this.createArmatures[r]),this.createArmaturesFromFileDic[s]<=0&&(this.createArmaturesFromFileDic[s]=null,delete this.createArmaturesFromFileDic[s],this.removeArmatureFileAndRes(s),console.log("定时销毁DB文件: ",r))}}},e.prototype.changeAllArm=function(t,e){var i=this;void 0===e&&(e=1);for(var n=Object.keys(this.createArmatures),o=n.length,r=0;o>r;r++){var s=n[r];if(this.createArmatures[s]){var a=this.createArmatures[s];a.forEach(function(n){t==AllType.play?i.isPlay||(i.isPlay=!0,n.start()):t==AllType.stop?i.isPlay&&(i.isPlay=!1,n.stop()):t==AllType.time&&(n.getAnimation().timeScale=e)},this)}}},e.SKE="_ske_json",e.TEX_J="_tex_json",e.TEX_P="_tex_png",e}(BaseClass);__reflect(DragonBonesFactory.prototype,"DragonBonesFactory");var AllType;!function(t){t[t.stop=1]="stop",t[t.play=2]="play",t[t.time=3]="time"}(AllType||(AllType={}));var BaseFactory=function(){function t(){this._types=[]}return t.prototype.inject=function(t,e,i,n){void 0===i&&(i="class"),void 0===n&&(n=0),this._types.push({keywords:t.split(" "),classType:e,priority:n,type:i}),this._types.sort(function(t,e){return e.priority-t.priority})},t.prototype.equals=function(t,e){for(var i=[">=",">","<=","<","="],n=0;n<i.length;n++){var o=i[n];if(-1!=e.indexOf(o)){var r=e.split(o);if(r.length<2)return!1;var s=r[0],a=r[1];if(!t.hasOwnProperty(s))return!1;if(s=t[s],"boolean"==typeof s?a=new Boolean(a):"number"==typeof s&&(a=parseInt(a)),"="==o)return s==a;if(">="==o)return s>=a;if("<="==o)return a>=s;if(">"==o)return s>a;if("<"==o)return a>s}}return!1},t.prototype.hasProperty=function(t,e){return"!"==e[0]?!t.hasOwnProperty(e.substring(1)):t.hasOwnProperty(e)},t.prototype.check=function(t,e){var i=this.equals(t,e);return i?!0:this.hasProperty(t,e)?!0:!1},t.prototype.getClassType=function(t){var e=this,i=this._types.find(function(i){return i.keywords.every(function(i){if(i.indexOf("|")>-1){for(var n=i.split("|"),o=0;o<n.length;o++)if(e.check(t,n[o]))return!0;return!1}return e.check(t,i)})});return i?i:null},t.prototype.newClass=function(t){var e=this.getClassType(t);return"function"==e.type?e.classType(t):new e.classType(t)},t.getInstance=function(e){return t._inst.hasOwnProperty(e)||(t._inst[e]=new t),t._inst[e]},t._inst={},t}();__reflect(BaseFactory.prototype,"BaseFactory");var GameButton=function(t){function e(){var e=t.call(this)||this;return e._canScale=!0,e._scale=.9,e._y=-1,e.soundName="click",e}return __extends(e,t),e.prototype.showAnim=function(t,e,i){var n=this;this._x=e,this._y=i,this._db?t?(this._db.visible=!0,this._db.play("1",0)):(this._db.visible=!1,this._db.stop()):t&&App.DisplayUtils.addOneNotLoadArmature("item",function(){return n._db=DragonBonesFactory.getInstance().makeArmature("anim","item"),n._db.x=n._x,n._db.y=n._y,n._db.play("1",0),App.EgretExpandUtils.addChild(n,n._db),n._db},this,!0)},e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.mouseDown,this),this._option=new SimpleButtonOption,this._option._scaleX=this._option._scaleY=this.scaleX,this.addEventListener(egret.Event.REMOVED_FROM_STAGE,this._base_onRemovedHandler,this)},e.prototype.mouseDown=function(t){StageUtils.getInstance().getStage().addEventListener(egret.TouchEvent.TOUCH_END,this.mouseUp,this),this.chooseButton(2)},e.prototype.mouseUp=function(t){this.chooseButton(1),GameSound.playEffectSound(this.soundName),StageUtils.getInstance().getStage().removeEventListener(egret.TouchEvent.TOUCH_END,this.mouseUp,this)},e.prototype.chooseButton=function(t){if(this._canScale){var e=1==t?this._option._scaleX:this._option._scaleX*this._scale,i=1==t?this._option._scaleY:this._option._scaleY*this._scale;egret.Tween.removeTweens(this),egret.Tween.get(this).to({scaleX:e,scaleY:i},70)}else this.scaleX=this.scaleY=this._option._scaleX},Object.defineProperty(e.prototype,"canScale",{set:function(t){this._canScale=t},enumerable:!0,configurable:!0}),e.prototype.removeListeners=function(){this.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.mouseDown,this)},e.prototype._base_onRemovedHandler=function(t){this.removeListeners(),this.removeEventListener(egret.Event.ADDED_TO_STAGE,this._base_onRemovedHandler,this),StageUtils.getInstance().getStage().removeEventListener(egret.TouchEvent.TOUCH_END,this.mouseUp,this)},e.setButton=function(t,e,i,n,o,r,s,a,h){void 0===n&&(n=55),void 0===o&&(o=24),void 0===r&&(r=24),void 0===s&&(s=16777215),void 0===a&&(a=-1),void 0===h&&(h=egret.HorizontalAlign.CENTER),t.labelDisplay.includeInLayout=!1,t.labelDisplay.x=e,t.labelDisplay.y=i,t.labelDisplay.width=n,t.labelDisplay.height=o,t.labelDisplay.size=r,t.labelDisplay.textAlign=h,t.labelDisplay.textColor=s,-1!=a&&(t.labelDisplay.strokeColor=a),-1!=a&&(t.labelDisplay.stroke=2),t.labelDisplay.fontFamily=DisplayUtils.fontSet()},e.prototype.setIcon=function(t,e,i,n){void 0===n&&(n=1),""!=t&&(this._iconOver?this._iconOver.startLoad(t,null,null):(this._iconOver=egret.DynamicImage.create(t),this._iconOver.x=e,this._iconOver.y=i,this._iconOver.scaleX=this._iconOver.scaleY=n,this._iconOver.touchEnabled=!1,this.addChild(this._iconOver)))},e.prototype.setOtherTxt=function(t,e,i,n,o,r,s,a,h){void 0===i&&(i=0),void 0===n&&(n=0),void 0===o&&(o=7422787),void 0===r&&(r=16777215),void 0===s&&(s=egret.HorizontalAlign.LEFT),void 0===a&&(a=!1),void 0===h&&(h=0),""!=t&&(this._otherText||(this._otherText=GameUtils.createText(155,22,this,i,n,o,2,2,r,s))),this._otherText&&(this._otherText.x=i),this._otherText&&(this._otherText.y=n),this._otherText&&(this._otherText.text=t)},e.prototype.clearBD=function(){this._db&&App.EgretExpandUtils.removeArmatureFromParent(this._db),this._db=null},e.prototype.dispose=function(){this.clearBD(),this._iconOver&&(this._iconOver.destory(),this._iconOver=null),this._otherText=null},e}(eui.Button);__reflect(GameButton.prototype,"GameButton",["eui.UIComponent","egret.DisplayObject"]);var SimpleButtonOption=function(){function t(){}return t}();__reflect(SimpleButtonOption.prototype,"SimpleButtonOption");var NumberImgContainer=function(t){function e(e,i,n){void 0===i&&(i=!1),void 0===n&&(n=null);var o=t.call(this)||this;o.num="0",o.numberArr=[],o.numberLinkName=e,o._needExtension=i,o._setPadding=n;for(var r=0;10>r;r++){var s=new egret.Bitmap;o.numberArr.push(s)}return o}return __extends(e,t),Object.defineProperty(e.prototype,"showNum",{get:function(){return this.num},enumerable:!0,configurable:!0}),e.prototype.setNumber=function(t,e,i){if(void 0===e&&(e=-1),void 0===i&&(i=0),void 0!=t&&(t!=this.num||"0"==this.num)){"number"==typeof t&&(t=t.toString()),this.num=t;var n=t.length,o=t.split("");-1==e&&o.reverse();for(var r,s,a=0,h=0;this.numChildren>n;)s=this.getChildAt(0),s.texture=null,App.EgretExpandUtils.removeFromParent(s);
var l=this._needExtension?"_png":"";for(r=0;r<this.numChildren;r++)s=this.getChildAt(r),s.texture=RES.getRes(this.numberLinkName+o[r]+l),s.x=a*e+i,a+=null!=this._setPadding?this._setPadding:s.width,a+=i;for(r=this.numChildren;n>r;r++)s=this.getBitmap(),s.texture=RES.getRes(this.numberLinkName+o[r]+l),s.x=a*e+i,a+=null!=this._setPadding?this._setPadding:s.width,a+=i,h=Math.max(s.height,h),App.EgretExpandUtils.addChild(this,s);a&&(this.width=a,this.height=h)}},e.prototype.getBitmap=function(){for(var t=0;10>t;t++)if(!this.numberArr[t].parent)return this.numberArr[t]},e.prototype.reSet=function(t){for(void 0===t&&(t=!0);this.$children.length;)App.EgretExpandUtils.removeFromParent(this.$children[0]);t&&this.setNumber("0")},e.prototype.getGetNumberCount=function(){return this.numChildren},e.prototype.setNumberLinkName=function(t){this.numberLinkName=t},e.prototype.clearBit=function(){for(var t;this.numChildren>0;)t=this.getChildAt(0),t.texture=null,App.EgretExpandUtils.removeFromParent(t)},e.prototype.dispose=function(){this.clearBit(),this.numberArr.length=0,this.numberArr=null},e}(egret.Sprite);__reflect(NumberImgContainer.prototype,"NumberImgContainer");var ProgressUI=function(){function t(t,e){this._track=t,this._thumb=e,this._textureWidth=this._thumb.width,this._textureHeight=this._thumb.height}return t.prototype.updateProgress=function(t,e,i){void 0===i&&(i=!1),this._curBlood=t,this._maxBlood=e,this._isTweenBoo=i,this.update()},t.prototype.update=function(){if(this._thumb.mask||(this._thumb.mask=new egret.Rectangle(0,0,this._textureWidth,this._textureHeight)),this._isTweenBoo){var t=this._textureWidth*(this._curBlood/this._maxBlood),e=1.5*t;egret.Tween.removeTweens(this._thumb.mask),this.play=!0,egret.Tween.get(this._thumb.mask,{onChange:this.onChange,onChangeObj:this}).to({width:t},e).call(this.onComplete,this)}else this._thumb.mask.width=this._thumb.width*(this._curBlood/this._maxBlood),this._thumb.mask.height=this._thumb.height,this.onChange();this._thumb.mask=this._thumb.mask},t.prototype.playTime=function(t){this._thumb.mask||(this._thumb.mask=new egret.Rectangle(0,0,this._textureWidth,this._textureHeight)),this._thumb.mask.width=0;var e=this._textureWidth;egret.Tween.removeTweens(this._thumb.mask),this.play=!0,egret.Tween.get(this._thumb.mask,{onChange:this.onChange,onChangeObj:this}).to({width:e},t).call(this.onComplete,this),this._thumb.mask=this._thumb.mask},t.prototype.onComplete=function(){this.compFunc&&this.compObj&&(this.play=!1,egret.Tween.removeTweens(this._thumb.mask),this.compFunc.call(this.compObj))},t.prototype.onChange=function(){this.func&&this.funcObj&&this.play&&this.func.call(this.funcObj,this._thumb.mask.width)},t.prototype.onsetChange=function(t,e){this.func=t,this.funcObj=e},t.prototype.completeFunc=function(t,e){this.compFunc=t,this.compObj=e},t.prototype.getMaskWidth=function(){return this._thumb.mask.width},Object.defineProperty(t.prototype,"width",{get:function(){return this._textureWidth},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"visible",{set:function(t){this._track&&(this._track.visible=t),this._thumb&&(this._thumb.visible=t)},enumerable:!0,configurable:!0}),t.prototype.stop=function(){this._thumb&&this._thumb.mask&&egret.Tween.removeTweens(this._thumb.mask)},t.prototype.dispose=function(){this._thumb&&this._thumb.mask&&egret.Tween.removeTweens(this._thumb.mask),this._track=null,this._thumb.mask=null,this._thumb=null,this.func=null,this.funcObj=null,this.compFunc=null,this.compObj=null},t}();__reflect(ProgressUI.prototype,"ProgressUI");var __moo_filter_id=0,__moo_filter={},__moo_actions=null,__moo_current_filter=[],__event_context=this,__functionContextIndex=1,__functionIndex=1,__moo_objects={},HttpConst=function(){function t(){}return t.Send_mail="email/token?email=",t.auth_register="auth/register",t.User_login="auth.login",t.withdrawal_address="withdrawal-addresses",t.withdrawal_addAddress="withdrawal-addresses/%0%/select",t.withdrawal_removeAddress="withdrawal-addresses/%0%/delete",t.withdrawal_withdrawal="withdrawals",t.withdrawal_charges="charges",t.lottery_luck="lottery/lucky",t.lottery_hilomp="lottery/hilomp",t.AddressServer_getHistoryList="AddressServer.getHistoryList",t.AddressServer_getWithHistoryList="AddressServer.getWithHistoryList",t.UserServer_info="UserServer.info",t.SignServer_sign="sign-in",t.online_award="online/award",t.change_getUser="change_getUser",t.countUser="/countUser",t}();__reflect(HttpConst.prototype,"HttpConst");var ProxyAction=function(){function t(){}return t.WAIT="proxy_status_wait",t.RESPONSE="proxy_status_response",t.BEGIN_LOAD="load_proxy",t.REQUEST="proxy_status_reqeust",t.REQUEST_SUCCEED="proxy_request_succeed",t.RESPONSE_SUCCEED="proxy_response_succeed",t.REQUEST_ERROR="proxy_request_error",t.RESPONSE_ERROR="proxy_response_error",t.TIMEOUT="proxy_timeout",t.MULTIPROXY_ERROR="multiproxy_response_error",t.MULTIPROXY_SUCCEED="multiproxy_response_succeed",t}();__reflect(ProxyAction.prototype,"ProxyAction");var ThemeAdapter=function(){function t(){}return t.prototype.getTheme=function(t,e,i,n){function o(t){e.call(n,t)}function r(e){e.resItem.url==t&&(RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,r,null),i.call(n))}"undefined"!=typeof generateEUI?egret.callLater(function(){e.call(n,generateEUI)},this):(RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,r,null),RES.getResByUrl(t,o,this,RES.ResourceItem.TYPE_TEXT))},t}();__reflect(ThemeAdapter.prototype,"ThemeAdapter",["eui.IThemeAdapter"]);var ProxyCache=function(t){function e(){var e=t.call(this)||this;return e._cacheData={},e}return __extends(e,t),Object.defineProperty(e,"instance",{get:function(){return this._instance||(this._instance=new e),this._instance},enumerable:!0,configurable:!0}),e.prototype.reset=function(){var t=this._cacheData.Server.getList;this._cacheData={Server:{getList:t}}},e.prototype.setCache=function(t){var e=t.params;if(e.hasOwnProperty("cache")&&e.cache===!0){var i=t.responseData,n=i.data;for(var o in n){var r=o.split("."),s=r[0],a=r[1],h=!0;this._cacheData.hasOwnProperty(s)||(this._cacheData[s]={},h=!1),this._cacheData[s][a]=n[o]}}},e.prototype.setSocketCache=function(t){for(var e in t)if(e.indexOf(".")>-1){var i=e.split("."),n=i[0],o=i[1],r=!0;this._cacheData.hasOwnProperty(n)||(this._cacheData[n]={},r=!1),this._cacheData[n][o]=t[e]}},e.prototype.setCache1=function(t,e){var i=t.split("."),n=i[0],o=i[1];this._cacheData.hasOwnProperty(n)||(this._cacheData[n]={}),this._cacheData[n][o]=e},e.prototype.getCache=function(t,e){if(void 0===t&&(t=null),void 0===e&&(e=null),null==t)return this._cacheData;if(this.isCache(t,e)){var i=this.formatParmas(t,e);return this._cacheData[i[0]][i[1]]}return null},e.prototype.formatParmas=function(t,e){if(void 0===e&&(e=null),null==e){var i=t.split(".");t=i[0],e=i[1]}return[t,e]},e.prototype.isCache=function(t,e){void 0===e&&(e=null);var i=this.formatParmas(t,e);return this._cacheData.hasOwnProperty(i[0])&&this._cacheData[i[0]].hasOwnProperty(i[1])},e.prototype.clearCache=function(t,e){void 0===e&&(e=null);var i=this.formatParmas(t,e);this._cacheData.hasOwnProperty(i[0])&&this._cacheData[i[0]].hasOwnProperty(i[1])&&delete this._cacheData[i[0]][i[1]]},e.setCache=function(t){e.instance.setCache(t)},e.setCache1=function(t,i){e.instance.setCache1(t,i)},e.setSocketCache=function(t){e.instance.setSocketCache(t)},e.getCache=function(t){return void 0===t&&(t=null),e.instance.getCache(t)},e.reset=function(){return e.instance.reset()},e.isCache=function(t,i){return void 0===i&&(i=null),e.instance.isCache(t,i)},e.clearCache=function(t,i){void 0===i&&(i=null),e.instance.clearCache(t,i)},e._instance=null,e}(egret.DisplayObject);__reflect(ProxyCache.prototype,"ProxyCache");var ProxyEvent=function(t){function e(e,i,n,o){var r=t.call(this,e,n,o)||this;return r._responseData=i.responseData,r._errorCode=i.errorCode,r._errorMessage=i.errorMessage,r._isRequestSucceed=i.isRequestSucceed,r._isResponseSucceed=i.isResponseSucceed,r}return __extends(e,t),Object.defineProperty(e.prototype,"responseData",{get:function(){return this._responseData},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"errorCode",{get:function(){return this._errorCode},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"errorMessage",{get:function(){return this._errorMessage},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isResponseSucceed",{get:function(){return this._isResponseSucceed},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isRequestSucceed",{get:function(){return this._isRequestSucceed},enumerable:!0,configurable:!0}),e.CANCEL="cancel",e.REQUEST_SUCCEED="requestSucceed",e.REQUEST_FAIL="fail",e.RESPONSE_SUCCEED="respnseSucceed",e.RESPONSE_ERROR="error",e.ERROR="global_error",e.TIME_OUT="timeout",e}(egret.Event);__reflect(ProxyEvent.prototype,"ProxyEvent");var ProxyListenerManager=function(){function t(){this._requestCount=0,this._loadingLayer=null,this.initListeners()}return t.prototype.initListeners=function(){addAction("proxy_status_wait",this.loadingStatusWait,this),addAction("proxy_status_response",this.loadingStatusResponse,this),addAction("proxy_response_succeed",this.responseCacheFilter,this),addAction("proxy_request_error",this.requestError,this),addAction("proxy_response_error",this.responseError,this),addAction("proxy_timeout",this.timeoutError,this),addAction("multiproxy_response_error",this.multiproxyError,this)},t.prototype.multiproxyError=function(t){this.checkRemoveLoadingLayer(t),this.checkReload(t)},t.prototype.loadingStatusWait=function(t){this.isMaskProxy(t)&&(0==this._requestCount&&(this._loadingLayer=GameContainerLayer.addToTipContainer("ProxyWaitLayer")),this._requestCount++)},t.prototype.loadingStatusResponse=function(t){this.checkRemoveLoadingLayer(t)},t.prototype.checkRemoveLoadingLayer=function(t){this.isMaskProxy(t)&&(this._requestCount>0&&this._requestCount--,0==this._requestCount&&this._loadingLayer&&(GameContainerLayer.removeFromParent(this._loadingLayer),this._loadingLayer=null))},t.prototype.checkReload=function(t){1==t.getParamByName("reload")||this.showMessage(t)},t.prototype.responseCacheFilter=function(t){},t.prototype.requestError=function(t){this.checkReload(t)},t.prototype.timeoutError=function(t){this.checkRemoveLoadingLayer(t),this.checkReload(t)},t.prototype.errorMessage=function(t){var e={};e=t.responseData?t.responseData.data||{}:{errorMsg:LangueManager.getText("3")};var i=t.errorCode,n=e.errorMsg||LangueManager.getText(i);return n+="(code:"+i+")"},t.prototype.showMessage=function(t){},t.prototype.responseError=function(t){this.showMessage(t)},t.prototype.isMaskProxy=function(t){return this.isOneMaskProxy(t)},t.prototype.isOneMaskProxy=function(t){return t.mask},t}();__reflect(ProxyListenerManager.prototype,"ProxyListenerManager");var ProxyStatus=function(){function t(){}return t.DEFAULT=1,t.REQUEST=2,t.WAIT=4,t.RESPONSE=8,t}();__reflect(ProxyStatus.prototype,"ProxyStatus");var LoadingUI=function(t){function e(){var e=t.call(this)||this;return e.createView(),e}return __extends(e,t),e.prototype.createView=function(){this.textField=new egret.TextField,this.addChild(this.textField),this.textField.y=800,this.textField.size=20,this.textField.width=640,this.textField.height=100,this.textField.textAlign="center"},e.prototype.onProgress=function(t,e){this.textField.text="Loading..."+t+"/"+e},e}(egret.Sprite);__reflect(LoadingUI.prototype,"LoadingUI",["RES.PromiseTaskReporter"]);var SingleProxy=function(t){function e(e){return void 0===e&&(e={}),t.call(this,e)||this}return __extends(e,t),e.prototype.getParamString=function(){var t={};for(var e in this._params)-1==ProxyBase.frontProxyKeys.indexOf(e)&&(t[e]=this._params[e]);return JSON.stringify(t)},e.prototype.load=function(){t.prototype.load.call(this)},e}(ProxyBase);__reflect(SingleProxy.prototype,"SingleProxy");var SocketListenerConst=function(){function t(){}return t.Server_errorCode="Server.errorCode",t.game_heart="game.heart",t}();__reflect(SocketListenerConst.prototype,"SocketListenerConst");var ProxySocket=function(){function t(){}return t.init=function(e,i){t.isStopReq=!1,App.MessageCenter.addListener(SocketConst.SOCKET_CONNECT,function(){console.log("SOCKET_CONNECT"),t.login(),t.onSocketContent(),e&&e.call(i)},this),App.MessageCenter.addListener(SocketConst.SOCKET_RECONNECT,function(){console.log("SOCKET_RECONNECT"),t.onSocketContent()},this),App.MessageCenter.addListener(SocketConst.SOCKET_START_RECONNECT,function(){console.log("SOCKET_START_RECONNECT")},this),App.MessageCenter.addListener(SocketConst.SOCKET_CLOSE,function(){console.log("SOCKET_CLOSE"),egret.Tween.get(this).wait(1e3).call(function(){t.isStopReq||App.getSocket().connect()},this)},this),App.MessageCenter.addListener(SocketConst.SOCKET_DATA,function(){console.log("SOCKET_DATA")},this),App.MessageCenter.addListener(SocketConst.SOCKET_NOCONNECT,function(){console.log("SOCKET_NOCONNECT"),egret.Tween.get(this).wait(3e3).call(function(){t.isStopReq||App.getSocket().connect()},this)},this),App.MessageCenter.addListener(SocketConst.SOCKET_DEBUG_INFO,function(){console.log("SOCKET_DEBUG_INFO")},this),App.MessageCenter.addListener(SocketListenerConst.Server_errorCode,function(t){return 8888==t.code?(this.isNosRecognized(),void ModuleOpenManager.openUIByClassName("CommonPopupLayer",GameContainerLayer.UI_TOP_BOX_TYPE,function(t){t==ConfirmType.ok&&GameUtils.exitGame()},this,{msg:LangueManager.getText("101")},!1,"")):void doAction(HomeEvent.SHOW_FLOAT,LangueManager.getText("62",t.msg,t.code))},this),App.MessageCenter.addListener(SocketListenerConst.game_heart,function(e){t.clearHeartCount()},this),t.initServer()},t.isNosRecognized=function(){App.getSocket().close(),t.isStopReq=!0,clearTimeout(t.timeoutObj)},t.onSocketContent=function(){t.sendCount=0,t.start()},t.reset=function(){clearTimeout(t.timeoutObj)},t.start=function(){t.timeoutObj=setTimeout(function(){App.getSocket().send("Server","ping",[]),t.sendCount++>3?(App.MessageCenter.dispatch(SocketConst.SOCKET_CLOSE),clearTimeout(t.timeoutObj)):t.reset()},t.timeout)},t.clearHeartCount=function(){t.sendCount=0},t.initServer=function(){App.getSocket().initServer(new ByteArrayMessage),App.getSocket().connect()},t.login=function(){App.getSocket().send("game","heart",[App.userid.toString(),"test"])},t.isShowLog=!1,t.isStopReq=!1,t.timeout=5e3,t.sendCount=0,t.timeoutObj=null,t}();__reflect(ProxySocket.prototype,"ProxySocket");var Socket=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._needReconnect=!0,e._maxReconnectCount=1,e._reconnectCount=0,e}return __extends(e,t),e.prototype.addEvents=function(){this._socket.addEventListener(egret.ProgressEvent.SOCKET_DATA,this.onReceiveMessage,this),this._socket.addEventListener(egret.Event.CONNECT,this.onSocketOpen,this),this._socket.addEventListener(egret.Event.CLOSE,this.onSocketClose,this),this._socket.addEventListener(egret.IOErrorEvent.IO_ERROR,this.onSocketError,this)},e.prototype.removeEvents=function(){this._socket.removeEventListener(egret.ProgressEvent.SOCKET_DATA,this.onReceiveMessage,this),this._socket.removeEventListener(egret.Event.CONNECT,this.onSocketOpen,this),this._socket.removeEventListener(egret.Event.CLOSE,this.onSocketClose,this),this._socket.removeEventListener(egret.IOErrorEvent.IO_ERROR,this.onSocketError,this)},e.prototype.onSocketOpen=function(){this._reconnectCount=0,this._connectFlag?App.MessageCenter.dispatch(SocketConst.SOCKET_RECONNECT):App.MessageCenter.dispatch(SocketConst.SOCKET_CONNECT),this._connectFlag=!0,this._isConnecting=!0},e.prototype.onSocketClose=function(t){this._needReconnect?(this.reconnect(),App.MessageCenter.dispatch(SocketConst.SOCKET_START_RECONNECT)):(this.close(),App.MessageCenter.dispatch(SocketConst.SOCKET_CLOSE)),this._isConnecting=!1},e.prototype.onSocketError=function(t){console.log("连接错误error"),this._needReconnect?this.reconnect():(this.close(),App.MessageCenter.dispatch(SocketConst.SOCKET_NOCONNECT)),this._isConnecting=!1},e.prototype.onReceiveMessage=function(t){this._msg.receive(this._socket)},e.prototype.initServer=function(t){this._msg=t},e.prototype.connect=function(){return App.DeviceUtils.IsHtml5&&!window.WebSocket?void console.log("不支持WebSocket"):(this._socket&&this.close(),this._socket=new egret.WebSocket,console.log("WebSocket: "+GameUtils.wsUrl),this._socket.type=egret.WebSocket.TYPE_BINARY,this.addEvents(),void(GameUtils.wsUrl&&this._socket.connectByUrl(GameUtils.wsUrl)))},e.prototype.reconnect=function(){this.close(),this._reconnectCount++,this._reconnectCount<this._maxReconnectCount?this.connect():(this._reconnectCount=0,this._connectFlag?App.MessageCenter.dispatch(SocketConst.SOCKET_CLOSE):App.MessageCenter.dispatch(SocketConst.SOCKET_NOCONNECT))},e.prototype.send=function(t,e,i){return this._isConnecting?void this._msg.send(this._socket,{moduleName:t,methodName:e,params:i}):void console.log("socket连接已断开")},e.prototype.close=function(){this._socket&&(this.removeEvents(),this._socket.close()),this._socket=null,this._isConnecting=!1,this._connectFlag=!1},e.prototype.isConnecting=function(){return this._isConnecting},e.prototype.debugInfo=function(t){App.MessageCenter.dispatch(SocketConst.SOCKET_DEBUG_INFO,t)},e}(BaseClass);__reflect(Socket.prototype,"Socket");var SocketConst=function(){function t(){}return t.SOCKET_CONNECT="SOCKET_CONNECT",t.SOCKET_RECONNECT="SOCKET_RECONNECT",t.SOCKET_START_RECONNECT="SOCKET_START_RECONNECT",t.SOCKET_CLOSE="SOCKET_CLOSE",t.SOCKET_DATA="SOCKET_DATA",t.SOCKET_NOCONNECT="SOCKET_NOCONNECT",t.SOCKET_DEBUG_INFO="SOCKET_DEBUG_INFO",t.KEY_MODULE="c",t.KEY_METHOD="m",t.KEY_DATA="data",t.KEY_SERVICE="",t.KEY_MODULE_S="s",t.KEY_METHOD_S="m",t.KEY_DATA_S="args",t}();__reflect(SocketConst.prototype,"SocketConst");var ByteArrayMessage=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._buffer=new egret.ByteArray,e}return __extends(e,t),e.prototype.readSocket=function(t){return t.readBytes(this._buffer),this._buffer},e.prototype.receive=function(e){t.prototype.receive.call(this,e),0!=this._buffer.bytesAvailable&&this._buffer.clear()},e.prototype.writeSocket=function(t,e){var i=App.Proto.RequestProto,n=new i(e).toBuffer(),o=new egret.ByteArray(n),r=new egret.ByteArray;r.writeBytes(o),null!=r&&0!=r.length&&(r.position=0,t.writeBytes(r,0,r.bytesAvailable))},e.prototype.encode=function(t){if(null==t)return null;var e={};return e[SocketConst.KEY_MODULE_S]=t.moduleName.toLowerCase()+SocketConst.KEY_SERVICE,e[SocketConst.KEY_METHOD_S]=t.methodName,t.params&&(e[SocketConst.KEY_DATA_S]=t.params),e},e.prototype.decode=function(t){if(null==t)return null;var e=null;t.position=0;var i=t.buffer,n=new DataView(i.slice(0,2)),o=n.getInt16(0),r=ResManager.getInstance().getProtoData(o),s=App.Proto[r.front_protobuf],a=s.decode(i.slice(2));return e=a,{moduleName:r.front_service,methodName:r.front_method,result:e}},e}(SocketMessage);__reflect(ByteArrayMessage.prototype,"ByteArrayMessage");var UserInfoMonitor=function(){function t(){this._state={},this._lengthState={}}return t.getInstance=function(){return t._instance||(t._instance=new t),t._instance},t.prototype.init=function(){this._inited||App.TimerManager.doTimer(1e3,0,this.refreshTimeFun,this)},t.prototype.refreshTimeFun=function(){GameUtils.serverTime+=1e3},t.prototype.refreshUserInfo=function(){},t.prototype.initByCache=function(){var e=GameUtils.getInfo();this.bindAttrChange("diamond",e.dimond,t.GC_CHANGED),this.bindAttrChange("gold",e.gold,t.SC_CHANGED)},t.prototype.bindAttrChange=function(t,e,i,n){void 0===n&&(n=1),1==n?this._state[t]=[e,i]:2==n?this._lengthState[t]=[e,i]:""},t.prototype.refreshByCache=function(){var t=GameUtils.getInfo();this.updateState(t)},t.prototype.updateState=function(t){for(var e in this._state)this.updateStateByKey(e,t[e])},t.prototype.updateStateByKey=function(t,e){this._state[t][0]!=e&&(this._state[t][0]=e,doAction(this._state[t][1],e))},t.prototype.dispose=function(){this._inited&&(this._inited=!1),removeEventsByTarget(this),App.TimerManager.removeAll(this),t._instance=null},t.SC_CHANGED="user_sc_count_changed",t.GC_CHANGED="user_gc_count_changed",t.mysticalOrder=null,t.isSeeLv=!1,t}();__reflect(UserInfoMonitor.prototype,"UserInfoMonitor");var GameUtils=function(){function t(){}return t.showErrorMess=function(e){if(e.params){if(8888==e.errorCode)return void ModuleOpenManager.openUIByClassName("CommonPopupLayer",GameContainerLayer.UI_TOP_BOX_TYPE,function(e){e==ConfirmType.ok&&t.exitGame()},this,{msg:LangueManager.getText("101")},!1,"");var i=LangueManager.getText(e.errorCode.toString());i+="(code:"+e.errorCode+")",doAction(HomeEvent.SHOW_FLOAT,i)}},t.exitGame=function(){DeviceUtils.getInstance().IsHtml5?location.reload():location.reload()},t.getCenterY=function(e){return(t.getWinHeight()-1136)/2+e},t.getLayoutY=function(e){return t.getWinHeight()-1136+e},t.getLayoutW=function(e){return t.getWinWidth()-640+e},t.getWinHeight=function(){return App.StageUtils.getStage().stageHeight},t.getWinWidth=function(){return App.StageUtils.getStage().stageWidth},Object.defineProperty(t,"soundOpen",{get:function(){return!0},set:function(t){GameManager.getInstance().setSound()},enumerable:!0,configurable:!0}),t.createText=function(t,e,i,n,o,r,s,a,h,l,c,u){void 0===n&&(n=0),void 0===o&&(o=0),void 0===r&&(r=0),void 0===s&&(s=3),void 0===a&&(a=0),void 0===h&&(h=0),void 0===l&&(l=egret.HorizontalAlign.LEFT),void 0===c&&(c=!1),void 0===u&&(u=0);var p=new egret.TextField;return-1!=t&&(p.width=t),p.fontFamily=DisplayUtils.fontSet(),p.size=e,p.textColor=r,p.x=n,p.y=o,p.lineSpacing=s,p.textAlign=l,p.lineSpacing=3,p.bold=c,p.borderColor=u,p.stroke=a,p.strokeColor=h,i.addChild(p),p},t.getHeadByUrl=function(e,i,n){null!=t.headUrlDic[e]?i.call(n,t.headUrlDic[e]):this.getHeadTexture(e,i,n)},t.getHeadTexture=function(e,i,n){var o=new egret.ImageLoader;o.crossOrigin="anonymous",o.once(egret.Event.COMPLETE,function(o){t.headUrlDic[e]=o.currentTarget.data,i&&n&&i.call(n,o.currentTarget.data)},this);try{o.load(e)}catch(r){i&&n&&i.call(n,null)}},t.copy=function(t){var e=document.createElement("input");e.value=t,document.body.appendChild(e),e.select(),e.setSelectionRange(0,e.value.length),document.execCommand("Copy"),document.body.removeChild(e),console.log("复制成功")},t.createTabList=function(t,e,i,n,o,r,s,a,h,l,c,u,p){void 0===c&&(c=!0),void 0===u&&(u=!0),void 0===p&&(p=0);var d=new egret.MooTableView(t.width,t.height);d.scorllTip=c,d.x=u&&h==egret.ScrollDirection.HORIZONTAL?t.x+(t.width>>1):t.x,d.y=t.y-p,d.contY=p,t.parent.addChild(d),d.setContainer(t,t.width,t.height),d.setCreateItemTimeOut(16);var _=function(t){var c=new CollectionBase(t,s,a,h);return c.itemWidth=i,c.itemHeight=n,c.paddingX=o,c.paddingY=r,u||(c.alignmentHorizontal=AlignmentConst.left),c.setCreateCallback(function(){var t=GameContainerLayer.createView(l);return t.anchorOffsetX=c.itemWidth>>1,t.anchorOffsetY=c.itemHeight>>1,e&&e.push(t),t},this),c};return _(d)},t.getInfo=function(){return ProxyCache.getCache(HttpConst.UserServer_info)},t.getGuide=function(){},t.getTriggerId=function(){return t.getGuide().step},t.getGuide2Id=function(){return t.getGuide().softIds},t.webParam=function(t){return decodeURI(egret.getOption(t))},t.checkInput=function(t,e){void 0===e&&(e=!1),t.type=egret.TextFieldType.INPUT,e&&(t.inputType=egret.TextFieldInputType.PASSWORD,t.displayAsPassword=!0,t.text="")},t.getTokenStr=function(t){return t.slice(0,10)+"**********"+t.slice(t.length-10,t.length)},t.checkLengthAndExp=function(t,e,i){if(t.length>i||t.length<e)return doAction(HomeEvent.SHOW_FLOAT,LangueManager.getText("29")),!1;var n=new RegExp(/^[0-9A-Za-z]+$/);if(!n.test(t))return doAction(HomeEvent.SHOW_FLOAT,LangueManager.getText("28")),!1;var o=new RegExp(/[A-Za-z].*[0-9]|[0-9].*[A-Za-z]/);return o.test(t)?!0:(doAction(HomeEvent.SHOW_FLOAT,LangueManager.getText("28")),!1)},t.prototype.createBitmap=function(t){var e=new egret.Bitmap,i=RES.getRes(t);return e.texture=i,e},t.serverTime=-1,t.wsUrl="",t.headUrlDic={},t}();__reflect(GameUtils.prototype,"GameUtils");var ConfirmType;!function(t){t[t.cancel=0]="cancel",t[t.ok=1]="ok"}(ConfirmType||(ConfirmType={}));var GameSound=function(){function t(){}return t.playEffectSound=function(e){""!=e&&SoundManager.getInstance().playEffect(e+t.WAV)},t.WAV="_wav",t}();__reflect(GameSound.prototype,"GameSound");var SoundBg=function(t){function e(){var e=t.call(this)||this;return e._currBg="",e}return __extends(e,t),e.prototype.stop=function(){this._currSoundChannel&&this._currSoundChannel.stop(),this._currSoundChannel=null,this._currSound=null,this._currBg=""},e.prototype.play=function(t,e){if(this._volume=e,this._currBg!=t){this.stop(),this._currBg=t;var i=this.getSound(t);i&&this.playSound(i)}},e.prototype.continuePlay=function(){if(this._currSoundChannel){var t=this._currSoundChannel.volume,e=this._currSoundChannel.position;this._currSoundChannel.stop(),this._currSoundChannel=this._currSound.play(e,0),this._currSoundChannel.volume=t}},e.prototype.playSound=function(t){t&&(this._currSound=t,this._currSoundChannel=this._currSound.play(0,0),this._currSoundChannel.volume=this._volume)},e.prototype.loadedPlay=function(t){this._currBg==t&&this.playSound(RES.getRes(t))},e.prototype.checkCanClear=function(t){return this._currBg!=t},e}(BaseSound);__reflect(SoundBg.prototype,"SoundBg");var SoundEffects=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.play=function(t,e){void 0===e&&(e=.5),this._volume=e;var i=this.getSound(t);i&&this.playSound(i)},e.prototype.playSound=function(t){if(t){var e=t.play(0,1);e.volume=this._volume}},e.prototype.loadedPlay=function(t){this.playSound(RES.getRes(t))},e}(BaseSound);__reflect(SoundEffects.prototype,"SoundEffects");var SoundManager=function(t){function e(){var e=t.call(this)||this;return e.bg=new SoundBg,e.effect=new SoundEffects,e.bgOn=GameUtils.soundOpen,e.effectOn=!0,e}return __extends(e,t),e.prototype.playEffect=function(t){this.effectOn&&this.effect.play(t)},e.prototype.playBg=function(t,e){void 0===e&&(e=.5),this.currBg!=t&&this.bg&&this.bg.stop(),this.currBg=t,this.bgOn&&this.bg.play(t,e)},e.prototype.continuePlayBg=function(){this.bg.continuePlay()},e.prototype.stopBg=function(){this.bg.stop()},e.prototype.setEffectOn=function(t){this.effectOn=t},e.prototype.setBgOn=function(t){this.bgOn=t,this.bgOn?this.currBg&&this.playBg(this.currBg):this.stopBg()},e.CLEAR_TIME=18e4,e}(BaseClass);__reflect(SoundManager.prototype,"SoundManager");var AnimNext=function(t){function e(e,i,n){var o=t.call(this)||this;o._playTime=1e3,o._imgList=[],o._index=0,o._playTime=e;for(var r=0;n>r;++r)o._imgList.push(i+r);return o._img=new egret.Bitmap,o.addChild(o._img),o.playLoop(),o}return __extends(e,t),e.prototype.playLoop=function(){var t=this;this._img.texture=RES.getRes(this._imgList[this._index]+"_png"),egret.Tween.get(this).wait(this._playTime).call(function(){t._index=t._index==t._imgList.length-1?0:++t._index,t.playLoop()},this)},e.prototype.dispose=function(){t.prototype.dispose.call(this),egret.Tween.removeTweens(this),this._imgList.length=0,this._imgList=null,this._img.texture=null,this._imgList=null},e}(BaseContainer);__reflect(AnimNext.prototype,"AnimNext");var AnimNum=function(t){function e(){var e=t.call(this)||this;return e._isPlay=!1,e._time1=3600,e._time2=4100,e._begin=0,e._endY=0,e._imgResList=["b_0","b_1","b_2","b_3","b_4","b_5","b_6","b_7","b_8","b_9"],e._imgH=35,e._imgList=[],e._maxShowNum=3,e.currShowNum=-1,e._container=new egret.DisplayObjectContainer,e.addChild(e._container),e.creatImg(),e}return __extends(e,t),e.prototype.creatImg=function(){for(var t=0;t<this._maxShowNum;++t){var e=new egret.Bitmap,i=RES.getRes(this._imgResList[t]);e.texture=i,this._imgList.push(e),e.y=t*this._imgH*-1,this._container.addChild(e)}this._mask=new egret.Bitmap;var n=RES.getRes("black1_png");this._mask.texture=n,this._mask.x=-10,this._mask.y=-10,this._mask.width=40,this._mask.height=40,this.addChild(this._mask),this._container.mask=this._mask},e.prototype.doAnim=function(t,e,i){var n=this;GameSound.playEffectSound("effect_random"),this._isPlay||(this._end=t,this._fun=e,this._ob=i,this._isPlay=!0,this.resetUI(),this.currShowNum=this._begin,egret.Tween.get(this._container).wait(this._time1).call(function(){egret.Tween.removeTweens(n._container),n._isPlay=!1,n._begin=n._end,n._fun&&n._ob&&n._fun.call(n._ob)},this),egret.Tween.get(this._container,{onChange:this.onChange,onChangeObj:this}).to({y:this.getEndY()},this._time2,egret.Ease.cubicOut))},e.prototype.onChange=function(){if(this._isPlay){var t=Math.floor(this._container.y/this._imgH);if(this.currShowNum!=this._begin+t){this.currShowNum=this._begin+t;var e=this._imgList.shift();e.texture=RES.getRes(this._imgResList[this.returnIndex(this.currShowNum)]),e.y=this._imgList[this._imgList.length-1].y-this._imgH,this._imgList.push(e)}}},e.prototype.returnIndex=function(t){var e=(t+2)%this._imgResList.length;return e},e.prototype.resetUI=function(){var t=this;this._container.y=0,this._imgList.forEach(function(e,i){e.y=i*t._imgH*-1},this),this.currShowNum=this._begin},e.prototype.getEndY=function(){var t=RandomUtils.getInstance().limitInteger(3,4)*this._imgResList.length;return t+=this._begin<=this._end?this._end-this._begin:this._imgResList.length-(this._begin-this._end),t*this._imgH},e.prototype.dispose=function(){},e}(BaseContainer);__reflect(AnimNum.prototype,"AnimNum");var LangueManager=function(){function t(){}return t.getText=function(e){for(var i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];var o=t.langueConfig[""+e];""==o&&doAction(HomeEvent.SHOW_FLOAT,e+""),o=1==App.languageType?o.split("|")[0]:o.split("|")[1];for(var r=i.length,s=0;r>s;s++)o=o.replace("%0%",i[s]);return o},t.getStateStr=function(e){var i=t.langueConfig[e+83+""];return i=1==App.languageType?i.split("|")[0]:i.split("|")[1]},t.fn1="黑体",t.fn2="微软雅黑",t.langueConfig={0:"",1:"基础数据加载|Loadig",2:"当前网络不稳定!|Server connection failed",3:"服务器连接失败!|Server connection failed",4:"服务器请求失败!|Server connection failed",5:"请求超时|Server connection failed",8:"资源加载|Loadig",10:"获取登录及服务器信息|Loadig",11:"游戏UI、动画、音效等加载|Loadig",12:"用户数据请求中|Loadig",13:"数据请求失败，3秒后将重试!|Server connection failed",14:"账号:|Enter  your email address",15:"密码:|Enter  your password",16:"账号:( 邮箱账号 )|Enter  your email address",17:"请输入正确的邮箱格式!|Please enter the correct email format!",18:"请输入邮箱地址!|Please enter email address!",19:"请输入密码!|Please enter your password!",20:"记住账号|Keep me email address",21:"同意用户注册协议|I agree to the Terms of Use",22:"邮箱验证码:|Email confirmation code",23:"密码:( 8~16位任意字符 )|Enter  your password",24:"确认密码:再次输入密码|Confirm Password",25:"两次的密码不同|Two different passwords",26:"请同意注册协议|I agree to the Terms of Use",27:"请输入邮箱验证码|Please enter the Email confirmation code",28:"密码必须由数字和字母组成!|The password must be composed of numbers and letters!",29:"密码必须为8-16位的字符串|The password must be a string of 8-16 bits",30:"第一天|Day 1",31:"第二天|Day 2",32:"第三天|Day 3",33:"第四天|Day 4",34:"第五天|Day 5",35:"第六天|Day 6",36:"第七天|Day 7",52:"提币|Withdraw",53:"我的财富|Coins",54:"提币数量|Withdraw Amount",55:"提交|Submit",56:"请选择提币地址|Withdraw Address",57:"请填写提币数量|Please fill in the amount of the money",58:"选择地址|Withdraw Address",59:"地址不能多过5个|The address can't be more than 5",60:"添加地址|Add Address",61:"保存|Save",62:"备注|Notes",63:"邮箱验证:|Email confirmation code",64:"地址|Address",65:"请填写地址|Please Add Address",66:"充币|Deposit",67:"下一步|Next",68:"1.填写我的地址 ->|Deposit Address is required ->",69:"2.转账充币|Deposit Address",70:"提示：请填写您的恒星币账户地址(即公钥)，并用该账户对平台进行转币,完成充值。|Please don’t deposit any other digital assets except XMM to the above address.",71:"复制成功|Success",72:"转账完成后,5分钟之内,充值成功请用您的恒星账户向以下地址转币: |After the transfer is completed",73:"GAP4XN26VJPSSEZYAJJMVWDZFXUWEOQQWMYF24NFQM5TCDT4OODZPMOZ",74:"复制|Copy",75:"1|Please make sure that your computer and browser are secure and your information is protected from being tampered or leaked",76:"2|Your deposit address won’t change frequently. Any changes, we will inform you by announcement or email",77:"3|Please don’t deposit any other digital assets except XMM to the above address.",78:"4|Please don’t deposit any other digital assets except XMM to the above address.",79:"5|Please don’t deposit any other digital assets except XMM to the above address.",80:"时间|Date",81:"数量|Amount",82:"币种|Currency",100:"状态|State",83:"放弃|rejected",84:"审核中|Audit",85:"未通过|Don't pass",86:"提币中|Withdraw",87:"已完成|Completed",88:"充币中|deposit",89:"充币记录|Deposit History",90:"提币记录|Withdrawal History",91:"恭喜！你获得了%0%金币|Congratulations! You got %0% gold coins.",92:"请等待|Please wait",93:"注册成功!|register success!",94:"没有地址点击添加|No address click Add!",95:"请填写正确的地址|没有地址点击添加!",96:"www.baidu.com",97:"历史|History",98:"删除|Delete",99:"猛犸币|XMM",842:"天|day",843:"小时|h",844:"分钟|m",845:"时|h",846:"分|m",847:"秒|s",848:"年|y",849:"月|m",850:"日|d","-103":"邮件格式错误|mail error","-302":"什么错误|password error","-104":"密码错误|password error","-506":"押注不能大于奖池1倍|password error","-507":"押注不能大于奖池1倍|password error","-601":"已签到|password error","-701":"超过最多领奖次数|password error","-702":"领取时间未到|password error","-202":"未知错误|register error","-101":"注册失败|register error"},t
}();__reflect(LangueManager.prototype,"LangueManager");var AnimTimeLine2=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._time1=600,e._time2=700,e._oneTime=40,e}return __extends(e,t),e.prototype.setEndIndex=function(){var t=this.Num>=this._end?this.typeOverNum+this._end:this._end;return this._time1=60*t,this._time2=this._time1+600,t},e.prototype.doAnim=function(){var t=this;this._isPlay=!0,egret.Tween.get(this).to({Num:this.setEndIndex()-1},this._time2,egret.Ease.cubicOut),egret.Tween.get(this).wait(this._time1).call(function(){egret.Tween.removeTweens(t),t._isPlay=!1,t.Num=t._num,t.playLight()},this)},e.prototype.setAnim=function(){if(this._isPlay){var t=this.returnIndex(Math.ceil(this.Num));if(this._lastIndex!=t){GameSound.playEffectSound("effect_lucky_jump");var e=this.game.ui("over_"+t);e.alpha=1,-1==this.game.playEndIndexList.indexOf(t)&&egret.Tween.get(e).to({alpha:0},400),this._lastIndex=t}}},e}(AnimTimeLine);__reflect(AnimTimeLine2.prototype,"AnimTimeLine2");var BoxAnimation=function(){function t(){}return t.prototype.showAnimation=function(t,e){this._mask,this._boxOriginalScaleX=this._box.scaleX,this._boxOriginalScaleY=this._box.scaleY;var i=this._box.alpha;this._box.scaleX=this._box.scaleY=.7;var n=egret.Tween.get(this._box).to({scaleX:this._boxOriginalScaleX,scaleY:this._boxOriginalScaleY,alpha:i},700,egret.Ease.bounceOut);t&&n.call(t,e)},t.prototype.show=function(t,e,i){var n,o=this;this._mask=t.maskDisplay,this._box=t.boxDisplay,this._container=t,t.stage?this.showAnimation(e,i):(n=function(){t.removeEventListener(egret.Event.ADDED_TO_STAGE,n,o),o.showAnimation(e,i)},t.addEventListener(egret.Event.ADDED_TO_STAGE,n,o))},t.prototype.remove=function(){this._mask&&egret.Tween.removeTweens(this._mask),this._box&&egret.Tween.removeTweens(this._box),this._container&&(App.DisplayUtils.removeFromParent(this._container),this._container=null)},t.prototype.close=function(){var t=this;return this._mask&&egret.Tween.get(this._mask).to({alpha:0},150),this._box?(egret.Tween.get(this._box).wait(80).to({alpha:0},60),void egret.Tween.get(this._box).to({scaleX:this._boxOriginalScaleX/2,scaleY:this._boxOriginalScaleY/2},150,egret.Ease.backIn).call(function(){t.remove()})):void this.remove()},t}();__reflect(BoxAnimation.prototype,"BoxAnimation",["IBoxAnimation"]);var CollectionBase=function(){function t(t,e,i,n){void 0===e&&(e=1),void 0===i&&(i=1),void 0===n&&(n=egret.ScrollDirection.HORIZONTAL),this._numPerLine=1,this._numPerColumn=1,this._direction=egret.ScrollDirection.HORIZONTAL,this._itemWidth=0,this._itemHeight=0,this._paddingX=0,this._paddingY=0,this._alignmentH=AlignmentConst["default"],this._alignmentV=AlignmentConst["default"],this._tableView=t,this._numPerLine=e,this._numPerColumn=i,this._direction=n,this.tableView&&(this._listInitWidth=this.tableView.width),this.tableView&&(this._listInitHeight=this.tableView.height),this.direction==egret.ScrollDirection.HORIZONTAL&&(this.alignmentHorizontal=AlignmentConst.center),this.alignmentVertical=AlignmentConst["default"]}return Object.defineProperty(t.prototype,"tableView",{get:function(){return this._tableView},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"paddingX",{get:function(){return this._paddingX},set:function(t){this._paddingX=t,this.updateListPosByAlignment()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"paddingY",{get:function(){return this._paddingY},set:function(t){this._paddingY=t,this.updateListPosByAlignment()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"numPerLine",{get:function(){return this._numPerLine},set:function(t){this._numPerLine=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"numPerColumn",{get:function(){return this._numPerColumn},set:function(t){this._numPerColumn=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"direction",{get:function(){return this._direction},set:function(t){this._direction=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"itemWidth",{get:function(){return this._itemWidth},set:function(t){this._itemWidth=t,this.updateListPosByAlignment()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"itemHeight",{get:function(){return this._itemHeight},set:function(t){this._itemHeight=t,this.updateListPosByAlignment()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"alignmentHorizontal",{get:function(){return this._alignmentH},set:function(t){this._alignmentH=t,this.updateListPosByAlignment()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"alignmentVertical",{get:function(){return this._alignmentV},set:function(t){this._alignmentV=t,this.updateListPosByAlignment()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"datasoruce",{get:function(){return this._datasoruce},enumerable:!0,configurable:!0}),t.prototype.bind=function(t,e){void 0===e&&(e=!0),this._datasoruce=t;var i=this._itemWidth,n=this._itemHeight;this._direction==egret.ScrollDirection.HORIZONTAL?(n=this._itemHeight*this._numPerLine+(this._numPerLine-1)*this._paddingY,i=this._itemWidth+this._paddingX):this._direction==egret.ScrollDirection.VERTICAL?(i=this._itemWidth*this._numPerLine+(this._numPerLine-1)*this._paddingX,n=this._itemHeight+this._paddingY):(i=this._itemWidth*this._numPerColumn+(this._numPerColumn-1)*this._paddingX,n=this._itemHeight*this._numPerLine+(this._numPerLine-1)*this._paddingY),this.updateListPosByAlignment(),this._tableView.setList(this.formatDatasource(t),this.direction,this,i,n,e),this.updateListPosByAlignment()},t.prototype.createItemRenderer=function(){for(var t=new BaseContainer,e=0,i=0,n=0;n<this._numPerLine;n++)for(var o=0;o<this._numPerColumn;o++){var r=this.createSubItemRenderer();t.addChild(r),this._direction==egret.ScrollDirection.HORIZONTAL?(i+=.5*this._itemHeight,r.y=i,i+=.5*this._itemHeight+this._paddingY,r.x=.5*this._itemWidth):this._direction==egret.ScrollDirection.VERTICAL?(e+=.5*this._itemWidth,r.x=e,e+=.5*this._itemWidth+this._paddingX,r.y=.5*this._itemHeight):(e+=.5*this._itemWidth,r.x=e,e+=.5*this._itemWidth+this._paddingX,r.y=.5*this._itemHeight,i+=.5*this._itemHeight,r.y=i,i+=.5*this._itemHeight+this._paddingY,r.x=.5*this._itemWidth)}return t},t.prototype.formatDatasource=function(t){for(var e=[],i=Math.ceil(t.length/(this._numPerLine*this._numPerColumn)),n=0;i>n;n++)e.push(t.slice(n*(this._numPerLine*this._numPerColumn),(n+1)*(this._numPerLine*this._numPerColumn)));return e},t.prototype.updateItemRenderer=function(t,e,i){for(var n=0;n<t.numChildren;n++){var o=t.getChildAt(n);if(n<e.length){o.visible=!0;var r=o;r.__info__=e[n],r.setItemIndex&&r.setItemIndex(n+i*this.numPerLine),r.updateView(e[n])}else o.visible=!1}},t.prototype.setCreateCallback=function(t,e){void 0===e&&(e=null),this._createSubItemContext=e,this._createSubItemSelector=t},t.prototype.createSubItemRenderer=function(){return this._createSubItemSelector?this._createSubItemSelector.call(this._createSubItemContext):null},t.prototype.updateListPosByAlignment=function(){this.alignmentHorizontalHandler(),this.alignmentVerticalHandler()},t.prototype.alignmentHorizontalHandler=function(){if(this.alignmentHorizontal!=AlignmentConst["default"]&&this.tableView&&this._datasoruce){var t=this._datasoruce.length,e=this.itemWidth*t+this.paddingX*(t-1);switch(e>this._listInitWidth&&(e=this._listInitWidth),this.tableView.width=e,this.alignmentHorizontal){case AlignmentConst.center:this.tableView.anchorOffsetX=e>>1;break;case AlignmentConst.left:this.tableView.anchorOffsetX=0;break;case AlignmentConst.right:this.tableView.anchorOffsetX=e}}},t.prototype.alignmentVerticalHandler=function(){if(this.alignmentVertical!=AlignmentConst["default"]&&this.tableView&&this._datasoruce){var t=this._datasoruce.length,e=Math.ceil(t/this._numPerLine),i=this.itemHeight*e+this.paddingY*(e-1);switch(i>this._listInitHeight&&(i=this._listInitHeight),this.tableView.height=i,this.alignmentVertical){case AlignmentConst.center:this.tableView.anchorOffsetY=i>>1;break;case AlignmentConst.top:this.tableView.anchorOffsetY=0;break;case AlignmentConst.down:this.tableView.anchorOffsetY=i}}},t}();__reflect(CollectionBase.prototype,"CollectionBase");var AlignmentConst;!function(t){t[t["default"]=0]="default",t[t.center=1]="center",t[t.left=2]="left",t[t.right=3]="right",t[t.top=4]="top",t[t.down=5]="down"}(AlignmentConst||(AlignmentConst={}));var egret;!function(t){var e=function(e){function i(i,n){void 0===i&&(i=-1),void 0===n&&(n=-1);var o=e.call(this)||this;return o._scale9Info=null,o._isLoaded=!1,o._gameAnchorX=0,o._gameAnchorY=0,o._textWidth=i,o._textHeight=n,o.addEventListener(t.Event.ADDED_TO_STAGE,o.onAddToStageHandler,o),o.addEventListener(t.Event.REMOVED_FROM_STAGE,o.onRemoveFromStageHandler,o),o}return __extends(i,e),Object.defineProperty(i.prototype,"gameAnchorX",{get:function(){return this._gameAnchorX},set:function(t){this._gameAnchorX=t,this.refresh()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"gameAnchorY",{get:function(){return this._gameAnchorY},set:function(t){this._gameAnchorY=t,this.refresh()},enumerable:!0,configurable:!0}),i.prototype.onAddToStageHandler=function(t){-1==this.getRefIdx()&&(this._isLoaded||this._src&&this.load(this._src,this._onLoadComplete,this._onLoadCompleteThisObj))},i.prototype.getRefIdx=function(){var t=i._refCount[this._src];if(t&&t.length>0){var e=t.indexOf(this.hashCode);return e}return-1},i.prototype.refreshRef=function(){var t=i._refCount[this._src],e=this.getRefIdx();e>-1&&t.splice(e,1),t&&0==t.length&&delete i._refCount[this._src]},i.prototype.onRemoveFromStageHandler=function(t){this.refreshRef(),this.texture=null,this._isLoaded=!1},i.create=function(t,e,n,o,r){void 0===e&&(e=null),void 0===n&&(n=null),void 0===o&&(o=-1),void 0===r&&(r=-1);var s=new i(o,r);return s.startLoad(t,e,n),s},i.prototype.setScale9Info=function(t,e,i,n){this._scale9Info={left:t,top:e,right:i,bottom:n},this.updateScale9Grid()},i.prototype.startLoad=function(t,e,i){null!=this._src&&this.refreshRef(),this._src=t,this._onLoadComplete=e,this._onLoadCompleteThisObj=i,this._src&&this.load(t,e,i)},i.prototype.load=function(t,e,n){var o=this;if(t){this._src=t,i._refCount[this._src]||(i._refCount[this._src]=[]),-1==i._refCount[this._src].indexOf(this.hashCode)&&i._refCount[this._src].push(this.hashCode);var r=RES.getRes(t);if(null!=r)this._onLoadComplete=e,this._onLoadCompleteThisObj=n,this.resourceLoadComplete(r);else{if(this._onLoadComplete=e,this._onLoadCompleteThisObj=n,!t)return;if(RES.hasRes(t)){var s=this._src;RES.getResAsync(this._src,function(t){o.resourceLoadComplete(t,s)},this)}else{var s=this._src;RES.getResByUrl(this._src,function(t){o.resourceLoadComplete(t,s)},this)}}}},i.prototype.refresh=function(){if(this.texture){var t=this.width,e=this.height;this.anchorOffsetX=t*this._gameAnchorX,this.anchorOffsetY=e*this._gameAnchorY}},i.prototype.updateScale9Grid=function(){if(this._scale9Info&&this.texture){var e=this.texture.textureWidth-this._scale9Info.left-this._scale9Info.right,i=this.texture.textureHeight-this._scale9Info.top-this._scale9Info.bottom,n=new t.Rectangle(this._scale9Info.left,this._scale9Info.top,e,i);this.scale9Grid=n}},i.prototype.resourceLoadComplete=function(t,e){void 0===e&&(e=null),(this._src==e||null==e)&&(this.texture=t,this._isLoaded=!0,this.updateScale9Grid(),this._textWidth>0&&(this.width=this._textWidth),this._textHeight>0&&(this.height=this._textHeight),this.refresh(),this._onLoadComplete&&(this._onLoadComplete.call(this._onLoadCompleteThisObj,this),this._onLoadComplete=null,this._onLoadCompleteThisObj=null))},Object.defineProperty(i.prototype,"isLoaded",{get:function(){return this._isLoaded},enumerable:!0,configurable:!0}),i.prototype.onComplete=function(t,e){void 0===e&&(e=null),this._isLoaded?t.call(e):(this._onLoadComplete=t,this._onLoadCompleteThisObj=e)},Object.defineProperty(i.prototype,"src",{get:function(){return this._src},enumerable:!0,configurable:!0}),i.prototype.destory=function(){this._onLoadComplete=null,this._onLoadCompleteThisObj=null,this.texture=null,App.EgretExpandUtils.removeFromParent(this)},i._refCount={},i}(t.Bitmap);t.DynamicImage=e,__reflect(e.prototype,"egret.DynamicImage")}(egret||(egret={}));var HomeEvent=function(){function t(){}return t.SHOW_FLOAT="SHOW_FLOAT",t.GOT_NEWSYS="GOT_NEWSYS",t.ADD_NEWSYS="ADD_NEWSYS",t.setTouchEnabled="setTouchEnabled",t.CLOSE_SIGN="CLOSE_SIGN",t.REWARD_TIME="REWARD_TIME",t.CLICK_ADDRESS="CLICK_ADDRESS",t.REF_ADDRESS="REF_ADDRESS",t.REF_MONEY="REF_MONEY",t.REMOVE_COIN="REMOVE_COIN",t}();__reflect(HomeEvent.prototype,"HomeEvent");var MessageCenter=function(t){function e(e){var i=t.call(this)||this;return i.dict=null,i.type=0,i.type=e,i.dict={},i.eVec=new Array,i.lastRunTime=0,0==i.type&&App.TimerManager.doFrame(1,0,i.run,i),i}return __extends(e,t),e.prototype.addListener=function(t,e,i){var n=this.dict[t];null==n&&(n=new Array,this.dict[t]=n);var o=0,r=n.length;for(o;r>o;o++)if(n[o][0]==e&&n[o][1]==i)return;n.push([e,i])},e.prototype.removeListener=function(t,e,i){var n=this.dict[t];if(null!=n){var o=0,r=n.length;for(o;r>o;o++)if(n[o][0]==e&&n[o][1]==i){n.splice(o,1);break}0==n.length&&(this.dict[t]=null,delete this.dict[t])}},e.prototype.removeAll=function(t){for(var e=Object.keys(this.dict),i=0,n=e.length;n>i;i++){for(var o=e[i],r=this.dict[o],s=0;s<r.length;s++)r[s][1]==t&&(r.splice(s,1),s--);0==r.length&&(this.dict[o]=null,delete this.dict[o])}},e.prototype.dispatch=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];if(null!=this.dict[t]){var n=new MessageVo;n.type=t,n.param=e,0==this.type?this.eVec.push(n):1==this.type?this.dealMsg(n):console.log("MessageCenter未实现的类型")}},e.prototype.run=function(){var t=egret.getTimer(),e=t-this.lastRunTime>100;if(this.lastRunTime=t,e)for(;this.eVec.length>0;)this.dealMsg(this.eVec.shift());else for(;this.eVec.length>0&&(this.dealMsg(this.eVec.shift()),!(egret.getTimer()-t>5)););},e.prototype.dealMsg=function(t){for(var e=this.dict[t.type],i=0,n=e.length,o=null;n>i;)o=e[i],o[0].apply(o[1],t.param),e.length!=n&&(n=e.length,i--),i++;t.dispose(),t=null},e}(BaseClass);__reflect(MessageCenter.prototype,"MessageCenter");var MessageVo=function(){function t(){this.type=null,this.param=null}return t.prototype.dispose=function(){this.type=null,this.param=null},t}();__reflect(MessageVo.prototype,"MessageVo");var egret;!function(t){var e=function(e){function i(t,i){var n=e.call(this)||this;return n._currentIndex=0,n._needCreateMax=!0,n.removed=!1,n._createItemTimeOut=null,n._indexRule=0,n.$setWidth(t),n.$setHeight(i),n.removed=!1,n._itemArr=[],n._timeArr=[],n}return __extends(i,e),i.prototype.setCreateItemTimeOut=function(t){this._createItemTimeOut=t},i.prototype.setIndexRule=function(t){this._indexRule=t},i.prototype.reloadData=function(e){void 0===e&&(e=[]),this._dataArr=e||[];var i,n,o=0;if(this.direction==t.ScrollDirection.HORIZONTAL){i=this._itemWidth*this._dataArr.length,n=this._itemHeight;var r=this._container.x;o=Math.floor(-r/this._itemWidth)}else{i=this._itemWidth,n=this._itemHeight*this._dataArr.length;var s=this._container.y;o=Math.floor(-s/this._itemHeight)}this.mooScrollViewOption._initWidth=i,this.mooScrollViewOption._initHeight=n;for(var a=this._itemArr.length,h=0;a>h;h++){var l=this._itemArr[h];this.initItem(l,o+h)}this._currentIndex=o},i.prototype.setList=function(e,i,n,o,r,s){void 0===s&&(s=!0),this.removed=!1,this._dataArr=e||[],this._delegate=n,this._itemWidth=o,this._itemHeight=r,this._needCreateMax=s,this.direction=i;var a=new BaseContainer;this.direction==t.ScrollDirection.HORIZONTAL?(a.width=this._itemWidth*this._dataArr.length,a.height=this._itemHeight,this.setContainer(a,this._itemWidth*this._dataArr.length,this._itemHeight)):(a.width=this._itemWidth,a.height=this._itemHeight*this._dataArr.length,this.setContainer(a,this._itemWidth,this._itemHeight*this._dataArr.length)),this.initItemList()},i.prototype.initItemList=function(){var e=this;if(0!=this._itemWidth&&0!=this._itemHeight&&0!=this._viewWidth&&0!=this._viewHeight){var i=0;i=this.direction==t.ScrollDirection.HORIZONTAL?Math.ceil(this._viewWidth/this._itemWidth)+1:Math.ceil(this._viewHeight/this._itemHeight)+1,0==this._needCreateMax&&i>this._dataArr.length&&(i=this._dataArr.length),this._itemArr=[],this._timeArr=[];for(var n=this,o=0;i>o;o++)if(-1==this._createItemTimeOut){var r=n._delegate.createItemRenderer();n._container.addChild(r),0==this._indexRule&&r.parent.setChildIndex(r,0),n._itemArr.push(r),n.initItem(r,o),o==i-1&&doAction("tableView_createDone",this)}else this._timeArr.push(Time.setTimeout(function(t){var o=n._delegate.createItemRenderer();n._container.addChild(o),0==e._indexRule&&o.parent.setChildIndex(o,0),n._itemArr.push(o),n.initItem(o,t),t==i-1&&doAction("tableView_createDone",e)},n,this._createItemTimeOut||50*o,o));this._currentIndex=0}},i.prototype.getCurrent=function(){var e=0;if(this.direction==t.ScrollDirection.HORIZONTAL){var i=this._container.x;e=Math.floor(-i/this._itemWidth)}else{var n=this._container.y;e=Math.floor(-n/this._itemHeight)}return e>this._dataArr.length-this._itemArr.length?e=this._dataArr.length-this._itemArr.length:0>e&&(e=0),e},i.prototype.moveList=function(){if(!this.removed){var t=this.getCurrent();if(0>t);else if(t>=this._dataArr.length-this._itemArr.length+1);else if(t!=this._currentIndex){var i=t-this._currentIndex;if(Math.abs(i)>this._itemArr.length)for(var n=0,o=this._itemArr.length;o>n;n++){var r=this._itemArr[n];this.initItem(r,t+n)}else if(0>i)for(var n=0;-i>n;n++){var r=this._itemArr[this._itemArr.length-1];this.moveArrayItem(0,this._itemArr.length-1);var s=t+(-i-1)-n;this.initItem(r,s),0==this._indexRule?r.parent.setChildIndex(r,r.parent.numChildren-1):r.parent.setChildIndex(r,0)}else for(var o=this._itemArr.length,n=0;i>n;n++){var r=this._itemArr[0];this.moveArrayItem(this._itemArr.length-1,0);var s=0;i>=o?s=t+n:(s=t+o-1-(i-1-n),0==this._indexRule?r.parent.setChildIndex(r,0):r.parent.setChildIndex(r,r.parent.numChildren-1)),this.initItem(r,s)}this._currentIndex=t}e.prototype.moveList.call(this)}},i.prototype.moveArrayItem=function(t,e){var i=this._itemArr[e];this._itemArr.splice(e,1),t>this._itemArr.length-1?this._itemArr.push(i):this._itemArr.splice(t,0,i)},i.prototype.initItem=function(e,i){i>=this._dataArr.length?e.visible=!1:0>i?e.visible=!1:(e.visible=!0,this._delegate.updateItemRenderer(e,this._dataArr[i],i)),this.direction==t.ScrollDirection.HORIZONTAL?e.x=this._itemWidth*i:e.y=this._itemHeight*i+5},i.prototype.onRemoveFromStageHandler=function(t){if(e.prototype.onRemoveFromStageHandler.call(this,t),this.removed=!0,this._timeArr){for(;this._timeArr.length;)Time.clearTimeout(this._timeArr.shift());this._timeArr=null}this._itemArr&&(this._itemArr.length=0,this._itemArr=null),this._dataArr&&(this._dataArr.length=0,this._dataArr=null)},Object.defineProperty(i.prototype,"itemArr",{get:function(){return this._itemArr},enumerable:!0,configurable:!0}),i}(t.MooScrollView);t.MooTableView=e,__reflect(e.prototype,"egret.MooTableView")}(egret||(egret={}));var TimeInfo=function(){function t(t,e,i,n,o){this.isTimely=!1,this._listener=t,this._thisObject=e,this._time=i,this._oldTime=i,this._isOnce=n,this._params=o,o&&o.indexOf("timely")>-1&&(this.isTimely=!0)}return t.prototype.clear=function(){this._listener=null,this._thisObject=null},Object.defineProperty(t.prototype,"time",{get:function(){return this._time},set:function(t){this._time=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isPause",{get:function(){return this._isPause},set:function(t){this._isPause=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isOnce",{get:function(){return this._isOnce},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"leftTime",{get:function(){return this._time},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"timeId",{get:function(){return this._timeId},set:function(t){this._timeId=t},enumerable:!0,configurable:!0}),t.prototype.tick=function(t){var e=!0,i=t;if(this._time&&(this._time-=i,e=this._time<=0),e){var n=[].concat(this._params,i);this._listener.apply(this._thisObject,n),this._time=this._oldTime}return e},t}();__reflect(TimeInfo.prototype,"TimeInfo");var Time=function(){function t(){}return t.setInterval=function(e,i,n){for(var o=[],r=3;r<arguments.length;r++)o[r-3]=arguments[r];var s=new TimeInfo(e,i,n,!1,o);return t.setTime(s)},t.clearInterval=function(e){t.deleteTimeInfo(e)},t.setTimeout=function(e,i,n){for(var o=[],r=3;r<arguments.length;r++)o[r-3]=arguments[r];var s=new TimeInfo(e,i,n,!0,o);return t.setTime(s)},t.reset=function(){for(var e in t.timeObject)t.deleteTimeInfo(e)},t.getLeftTime=function(e){var i=t.timeObject[e];return i?i.leftTime:0},t.pauseInterval=function(e){var i=t.timeObject[e];i&&(i.isPause=!0)},t.resumeInterval=function(e){var i=t.timeObject[e];i&&(i.isPause=!1)},t.clearTimeout=function(e){t.deleteTimeInfo(e)},t.setTime=function(e){return 0==t.timeId&&egret.Ticker.getInstance().register(t.tick,null),t.timeId++,e.timeId=t.timeId,t.timeObject[t.timeId]=e,t.timeId},t.resetTimely=function(e){for(var i in t.timeObject){var n=t.timeObject[i];n&&n.isTimely&&(n.time+=e)}},t.deleteTimeInfo=function(e){t.timeObject[e]&&(t.timeObject[e].clear(),delete t.timeObject[e])},t.tick=function(e){for(var i in t.timeObject){var n=t.timeObject[i];n?!n.isPause&&n.tick(e)&&n.isOnce&&t.deleteTimeInfo(i):(console.log("Time "+i+" is undefined"),delete t.timeObject[i])}},t.timeObject={},t.timeId=0,t}();__reflect(Time.prototype,"Time");var GameManager=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.countUser=function(t,e){var i={name:t,msg:e},n=new SingleProxy({mod:HttpConst.countUser,mask:!1,cache:!0,p:i});n.addEventListener(ProxyEvent.RESPONSE_SUCCEED,function(t){t.responseData.data},this),n.load()},e}(BaseClass);__reflect(GameManager.prototype,"GameManager");var AnnouncementData=function(){function t(){this.id=0,this.des="",this.priority=0,this.time=1}return t}();__reflect(AnnouncementData.prototype,"AnnouncementData");var AnnouncementLayer=function(t){function e(){var e=t.call(this)||this;return e._isRuning=!1,e}return __extends(e,t),e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),addAction(HomeEvent.GOT_NEWSYS,this.checkShow,this),this._msgTxt=this.ui("msgTxt"),this.visible=!1,this.showMessage(),this.touchEnabled=!1,this.touchChildren=!1},e.prototype.checkShow=function(){this._isRuning||this.showMessage()},e.prototype.showMessage=function(){var t=AnnouncementManager.getInstance().getOneMsg();null==t?this.visible=!1:(this._isRuning=!0,this._msgTxt.text=t.des,this._msgTxt.x=500,this.visible=!0,egret.Tween.get(this._msgTxt).to({x:-450},7e3).call(this.showComplete,this))},e.prototype.showComplete=function(){this._isRuning=!1,this.showMessage()},e.prototype.dispose=function(){t.prototype.dispose.call(this),egret.Tween.removeTweens(this._msgTxt)},e}(BaseContainer);__reflect(AnnouncementLayer.prototype,"AnnouncementLayer");var AnnouncementManager=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._msgList=[],e._lStr=["75","76","77","78","79"],e}return __extends(e,t),e.prototype.init=function(){addAction(HomeEvent.ADD_NEWSYS,this.receiveNotice,this)},e.prototype.sortList=function(){for(var t={},e=ArrayUtils.getInstance().upsetArr(this._lStr),i=0;i<e.length;++i)t.msg=LangueManager.getText(e[i]),t.time=1,this.receiveNotice(t)},e.prototype.receiveNotice=function(t){var e=new AnnouncementData;e.des=t.msg,this._msgList.push(e),doAction(HomeEvent.GOT_NEWSYS)},e.prototype.getOneMsg=function(){if(this._msgList.length>0){var t=this._msgList.shift();return--t.time&&this._msgList.push(t),t}return this.sortList(),null},e}(BaseClass);__reflect(AnnouncementManager.prototype,"AnnouncementManager");var FloatingTipsLayer=function(t){function e(){var e=t.call(this)||this;return e._messArray=[],e._lastMess="",e}return __extends(e,t),e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),addAction(HomeEvent.SHOW_FLOAT,this.show,this),this.touchEnabled=!1,this.touchChildren=!1},e.prototype.getOne=function(){if(this._messArray.length==e.Mix){var t=this._messArray.shift();t.stopShow()}else var t=GameContainerLayer.createView("FloatingTipView");return t},e.prototype.show=function(t,e){return void(void 0===e&&(e=!0))},e.prototype.sortList=function(){var t=this;this._messArray.forEach(function(i,n){0==n?i.y=1==t._messArray.length?0:2==t._messArray.length?-70:-140:1==n?i.y=2==t._messArray.length?0:-70:i.y=70*-(e.Mix-n-1)})},e.Mix=3,e}(BaseContainer);__reflect(FloatingTipsLayer.prototype,"FloatingTipsLayer");var FloatingTipView=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),TextFieldManager.setStyle(this.ui("MessageLabel"),!0,16777215,0),this.touchEnabled=!1,this.touchChildren=!1},e.prototype.setMessage=function(t){var e=this;this.ui("MessageLabel").text=t,this.alpha=1,egret.Tween.get(this).wait(1e3).call(function(){egret.Tween.get(e).to({alpha:0},1e3).call(function(){GameContainerLayer.removeFromParent(e),egret.Tween.removeTweens(e)})})},e.prototype.stopShow=function(){GameContainerLayer.removeFromParent(this),egret.Tween.removeTweens(this),this.alpha=0},e}(BaseContainer);__reflect(FloatingTipView.prototype,"FloatingTipView");var GameHelpLayer=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.ui("closeBtn").addEventListener(egret.TouchEvent.TOUCH_TAP,this.onCloseBtn,this)},e.prototype.onCloseBtn=function(){App.EgretExpandUtils.removeFromParent(this)},e.prototype.dispose=function(){t.prototype.dispose.call(this),this.ui("closeBtn").removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onCloseBtn,this)},e}(BaseBoxContainer);__reflect(GameHelpLayer.prototype,"GameHelpLayer",["eui.UIComponent","egret.DisplayObject"]);var GameScene=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._step=0,e._currSelectColorIndex=0,e._currSelectImgIndex=0,e._currSelectTitleImgIndex=1,e.SELECT_XY=[{x:46,y:-306},{x:186,y:-306},{x:322,y:-306},{x:460,y:-306},{x:46,y:-223},{x:186,y:-223},{x:322,y:-223},{x:460,y:-223}],e}return __extends(e,t),e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.addListener(!0),this.init(),this.changeStep(STEP_TYPE.COLOR)},e.prototype.init=function(){this.ui("dr0").source="bg_0_png",this.ui("dr1").source="cloud_0_png",this.ui("dr2").source="dragon_0_png",this.ui("dr3").source="zhua_0_png",this.ui("dr4").source="zs_0_png",this.ui("dr5").source="tou_0_png",this.ui("select_img").x=this.SELECT_XY[this._currSelectColorIndex].x,this.ui("select_img").y=this.SELECT_XY[this._currSelectColorIndex].y,this.ui("select_img").visible=!1,TextFieldManager.setStyle(this.ui("name_text"),!0,16765838,14170674),TextFieldManager.setStyle(this.ui("time_text"),!0,16765838,14170674),GameUtils.checkInput(this.ui("name_input")),this.ui("skip_btn").visible=!1},e.prototype.changeStepToLogin=function(){App.EgretExpandUtils.removeFromParent(this),gameMain.creatLogin()},e.prototype.changeStepToColorOrName=function(){this._step===STEP_TYPE.COLOR&&this.changeStepToLogin(),this._step===STEP_TYPE.SELECT&&this.changeStep(STEP_TYPE.COLOR),this._step===STEP_TYPE.NAME&&this.changeStep(STEP_TYPE.SELECT)},e.prototype.changeStepToTitle=function(){this.changeStep(STEP_TYPE.SELECT)},e.prototype.changeStepToName=function(){this.changeStep(STEP_TYPE.NAME)},e.prototype.changeStepToShare=function(){return""===this.ui("name_input").text?void this.ui("name_input").setFocus():(this.changeStep(STEP_TYPE.SHARE),void GameManager.getInstance().countUser(this._name,this._currSelectTitleImgIndex))},e.prototype.changeStep=function(t){if(this._step=t,t===STEP_TYPE.COLOR)this.ui("leftBtn").visible=!0,this.ui("title2_img").visible=!1,this.ui("logo_img").visible=!1,this.ui("selectRoot").visible=!0,this.ui("shareRoot").visible=!1,this.ui("titleRoot").visible=!1,this.ui("windRoot").x=0,this.ui("windRoot").y=0,this.ui("windRoot").scaleX=this.ui("windRoot").scaleY=1,this.ui("nameRoot").visible=!1,this.setGuide("1");else if(t===STEP_TYPE.SELECT)this.ui("leftBtn").visible=!0,this.ui("title2_img").visible=!1,this.ui("logo_img").visible=!0,this.ui("selectRoot").visible=!1,this.ui("shareRoot").visible=!1,this.ui("titleRoot").visible=!0,this.ui("windRoot").x=0,this.ui("windRoot").y=0,this.ui("windRoot").scaleX=this.ui("windRoot").scaleY=1,this.ui("nameRoot").visible=!1;else if(t===STEP_TYPE.NAME)this.ui("leftBtn").visible=!0,this.ui("title2_img").visible=!1,this.ui("logo_img").visible=!0,this.ui("selectRoot").visible=!1,this.ui("shareRoot").visible=!1,this.ui("titleRoot").visible=!0,this.ui("windRoot").x=0,this.ui("windRoot").y=0,this.ui("windRoot").scaleX=this.ui("windRoot").scaleY=1,this.ui("nameRoot").visible=!0;else{this.ui("leftBtn").visible=!1,this.ui("title2_img").visible=!0,this.ui("logo_img").visible=!0,this.ui("selectRoot").visible=!1,this.ui("shareRoot").visible=!0,this.ui("titleRoot").visible=!1,this.ui("windRoot").x=85,this.ui("windRoot").y=97,this.ui("windRoot").scaleX=this.ui("windRoot").scaleY=.85,this.ui("nameRoot").visible=!1;var e=new Date;this.ui("time_text").text=e.getFullYear()+"."+Number(e.getMonth()+1)+"."+e.getDate()}},e.prototype.onColorHandle=function(t){var e=t.currentTarget,i=e.name;this._currSelectColorIndex=this.getIndex(i,"backBtn"),this.ui("select_img").x=this.SELECT_XY[this._currSelectColorIndex].x,this.ui("select_img").y=this.SELECT_XY[this._currSelectColorIndex].y,this.ui("select_img").visible=!0},e.prototype.getIndex=function(t,e){return Number(t.split(e)[1])},e.prototype.changeImg=function(t){if(this.ui("select_img").visible&&this._step!==STEP_TYPE.NAME&&this._step!==STEP_TYPE.SELECT&&this._step!==STEP_TYPE.SHARE){var e=t.currentTarget,i=e.name;this._currSelectImgIndex=this.getIndex(i,"dr"),this.changeColorImg()}},e.prototype.changeColorImg=function(){0===this._currSelectImgIndex&&(this.ui("dr"+this._currSelectImgIndex).source="bg_"+(this._currSelectColorIndex+1)+"_png"),1===this._currSelectImgIndex&&(this.ui("dr"+this._currSelectImgIndex).source="cloud_"+(this._currSelectColorIndex+1)+"_png"),2===this._currSelectImgIndex&&(this.ui("dr"+this._currSelectImgIndex).source="dragon_"+(this._currSelectColorIndex+1)+"_png"),3===this._currSelectImgIndex&&(this.ui("dr"+this._currSelectImgIndex).source="zhua_"+(this._currSelectColorIndex+1)+"_png"),4===this._currSelectImgIndex&&(this.ui("dr"+this._currSelectImgIndex).source="zs_"+(this._currSelectColorIndex+1)+"_png"),5===this._currSelectImgIndex&&(this.ui("dr"+this._currSelectImgIndex).source="tou_"+(this._currSelectColorIndex+1)+"_png")},e.prototype.changeTitleImg=function(){this._currSelectTitleImgIndex=7===this._currSelectTitleImgIndex?1:++this._currSelectTitleImgIndex,this.ui("title1_img").source=this._currSelectTitleImgIndex+"s_png",this.ui("title2_img").source=this._currSelectTitleImgIndex+"b_png"},e.prototype.onNameChange=function(t){this._name=t.currentTarget.text,this.ui("name_text").text=this._name},e.prototype.saveImg=function(){var t=this;this.ui("goBackBtn3").visible=!1;var e=new egret.RenderTexture;e.drawToTexture(this);var i=(e.toDataURL("image/png"),document.getElementById("divImage")),n=document.getElementById("shareImage");return n.src=e.toDataURL("image/png"),i.style.display="block",void setTimeout(function(){t.ui("goBackBtn3").visible=!0},50)},e.prototype.base64ToBlob=function(t){for(var e=t.split(";base64,"),i=e[0].split(":")[1],n=window.atob(e[1]),o=n.length,r=new Uint8Array(o),s=0;o>s;++s)r[s]=n.charCodeAt(s);
return new Blob([r],{type:i})},e.prototype.shareImg=function(){},e.prototype.setGuide=function(t){var e=egret.localStorage.getItem("currGuideIndex");"-1"!==e&&(Number(e)<=Number(t)||"-1"===t)&&egret.localStorage.setItem("currGuideIndex",t),this.showGuide()},e.prototype.showGuide=function(){var t=egret.localStorage.getItem("currGuideIndex");this.ui("skip_btn").visible="-1"!==t,this.ui("mask1_img").visible="1"===t||"2"===t,this.ui("guide_1_img").visible="1"===t,this.ui("guide_2_img").visible="2"===t,this.ui("mask2_img").visible="3"===t,this.ui("guide_3_img").visible="3"===t,this.ui("upRoot").visible=!this.ui("mask1_img").visible&&!this.ui("mask2_img").visible},e.prototype.shipAllGuide=function(){this.setGuide("-1")},e.prototype.shipOneGuide=function(){this.ui("select_img").visible=!0,this.setGuide("2")},e.prototype.shipTwoGuide=function(){this.setGuide("3")},e.prototype.shipThreeGuide=function(){this.ui("select_img").visible=!0},e.prototype.addListener=function(t){if(t){this.ui("skip_btn").addEventListener(egret.TouchEvent.TOUCH_TAP,this.shipAllGuide,this),this.ui("guide_1_img").addEventListener(egret.TouchEvent.TOUCH_TAP,this.shipOneGuide,this),this.ui("guide_2_img").addEventListener(egret.TouchEvent.TOUCH_TAP,this.shipTwoGuide,this),this.ui("guide_3_img").addEventListener(egret.TouchEvent.TOUCH_TAP,this.shipAllGuide,this),this.ui("leftBtn").addEventListener(egret.TouchEvent.TOUCH_TAP,this.changeStepToColorOrName,this),this.ui("backBtn8").addEventListener(egret.TouchEvent.TOUCH_TAP,this.changeStepToColorOrName,this),this.ui("backBtn9").addEventListener(egret.TouchEvent.TOUCH_TAP,this.changeStepToTitle,this);for(var e=0;8>e;++e)this.ui("backBtn"+e).addEventListener(egret.TouchEvent.TOUCH_TAP,this.onColorHandle,this);for(var e=0;6>e;++e)this.ui("dr"+e).pixelHitTest=!0,this.ui("dr"+e).addEventListener(egret.TouchEvent.TOUCH_TAP,this.changeImg,this);this.ui("goBackBtn").addEventListener(egret.TouchEvent.TOUCH_TAP,this.changeStepToColorOrName,this),this.ui("completeBtn").addEventListener(egret.TouchEvent.TOUCH_TAP,this.changeStepToName,this),this.ui("swBtn").addEventListener(egret.TouchEvent.TOUCH_TAP,this.changeTitleImg,this),this.ui("goBackBtn0").addEventListener(egret.TouchEvent.TOUCH_TAP,this.changeStepToColorOrName,this),this.ui("completeBtn0").addEventListener(egret.TouchEvent.TOUCH_TAP,this.changeStepToShare,this),this.ui("name_input").addEventListener(egret.Event.CHANGE,this.onNameChange,this),this.ui("goBackBtn3").addEventListener(egret.TouchEvent.TOUCH_TAP,this.saveImg,this),this.ui("completeBtn3").addEventListener(egret.TouchEvent.TOUCH_TAP,this.shareImg,this)}else{this.ui("skip_btn").removeEventListener(egret.TouchEvent.TOUCH_TAP,this.shipAllGuide,this),this.ui("guide_1_img").addEventListener(egret.TouchEvent.TOUCH_TAP,this.shipOneGuide,this),this.ui("guide_2_img").removeEventListener(egret.TouchEvent.TOUCH_TAP,this.shipTwoGuide,this),this.ui("guide_3_img").removeEventListener(egret.TouchEvent.TOUCH_TAP,this.shipAllGuide,this),this.ui("leftBtn").removeEventListener(egret.TouchEvent.TOUCH_TAP,this.changeStepToColorOrName,this),this.ui("backBtn8").removeEventListener(egret.TouchEvent.TOUCH_TAP,this.changeStepToColorOrName,this),this.ui("backBtn9").removeEventListener(egret.TouchEvent.TOUCH_TAP,this.changeStepToTitle,this);for(var e=0;8>e;++e)this.ui("backBtn"+e).removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onColorHandle,this);for(var e=0;6>e;++e)this.ui("dr"+e).removeEventListener(egret.TouchEvent.TOUCH_TAP,this.changeImg,this);this.ui("goBackBtn").removeEventListener(egret.TouchEvent.TOUCH_TAP,this.changeStepToColorOrName,this),this.ui("completeBtn").removeEventListener(egret.TouchEvent.TOUCH_TAP,this.changeStepToName,this),this.ui("swBtn").removeEventListener(egret.TouchEvent.TOUCH_TAP,this.changeTitleImg,this),this.ui("goBackBtn0").removeEventListener(egret.TouchEvent.TOUCH_TAP,this.changeStepToColorOrName,this),this.ui("name_input").removeEventListener(egret.Event.CHANGE,this.onNameChange,this),this.ui("completeBtn0").removeEventListener(egret.TouchEvent.TOUCH_TAP,this.changeStepToShare,this),this.ui("goBackBtn3").removeEventListener(egret.TouchEvent.TOUCH_TAP,this.saveImg,this),this.ui("completeBtn3").removeEventListener(egret.TouchEvent.TOUCH_TAP,this.shareImg,this)}},e.prototype.dispose=function(){this.addListener(!1),t.prototype.dispose.call(this)},e}(BaseBoxContainer);__reflect(GameScene.prototype,"GameScene",["eui.UIComponent","egret.DisplayObject"]);var STEP_TYPE;!function(t){t[t.COLOR=1]="COLOR",t[t.SELECT=2]="SELECT",t[t.NAME=3]="NAME",t[t.SHARE=4]="SHARE"}(STEP_TYPE||(STEP_TYPE={}));var GameShareLayer=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.ui("closeBtn").addEventListener(egret.TouchEvent.TOUCH_TAP,this.onCloseBtn,this)},e.prototype.onCloseBtn=function(){App.EgretExpandUtils.removeFromParent(this)},e.prototype.dispose=function(){t.prototype.dispose.call(this),this.ui("closeBtn").removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onCloseBtn,this)},e}(BaseBoxContainer);__reflect(GameShareLayer.prototype,"GameShareLayer",["eui.UIComponent","egret.DisplayObject"]);var RewardLayer=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onCLoseHandle,this),this.ui("MaskLayer").addEventListener(egret.TouchEvent.TOUCH_TAP,this.onCLoseHandle,this)},e.prototype.updateViewByParams=function(t,e,i){void 0===e&&(e=null),void 0===i&&(i=null),this._fun=e,this._funThis=i,this.ui("desc_txt").text=t},e.prototype.onCLoseHandle=function(){this._fun&&this._funThis&&this._fun.call(this._funThis),App.EgretExpandUtils.removeFromParent(this)},e.prototype.dispose=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onCLoseHandle,this),this.ui("MaskLayer").removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onCLoseHandle,this),t.prototype.dispose.call(this),this._fun=null,this._funThis=null},e}(BaseBoxContainer);__reflect(RewardLayer.prototype,"RewardLayer",["eui.UIComponent","egret.DisplayObject"]);var LoginLayer=function(t){function e(){var e=t.call(this)||this;return e.timenum=0,e}return __extends(e,t),e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.ui("loginBtn").addEventListener(egret.TouchEvent.TOUCH_TAP,this.onLoginBtnHandle,this)},e.prototype.updateViewByParams=function(t,e){gameMain.setLoadingHide(),App.SoundManager.playBg("bg_mp3")},e.prototype.onLoginBtnHandle=function(){App.EgretExpandUtils.removeFromParent(this),gameMain.loadSceneRes()},e.prototype.dispose=function(){t.prototype.dispose.call(this),this.ui("loginBtn").removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onLoginBtnHandle,this)},e.username="",e}(BaseBoxContainer);__reflect(LoginLayer.prototype,"LoginLayer",["eui.UIComponent","egret.DisplayObject"]);var IconData=function(){function t(t,e){this.icon="",this.money="",this.id="",this.icon=t.icon,this.money=t.cost,this.id=e}return t}();__reflect(IconData.prototype,"IconData");var MyData=function(){function t(){this.myMoney=ResManager.getInstance().getSysData().money}return t}();__reflect(MyData.prototype,"MyData");var AddressInfoLayer=function(t){function e(){var e=t.call(this)||this;return e._time=0,e}return __extends(e,t),e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.ui("title1_txt").text=LangueManager.getText("60"),this.ui("title2_txt").text=LangueManager.getText("62"),this.ui("title3_txt").text=LangueManager.getText("64"),this.ui("title4_txt").text=LangueManager.getText("63"),this.ui("submitBtn").labelDisplay.text=LangueManager.getText("61"),this.ui("closeBtn").addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClose,this),this.ui("submitBtn").addEventListener(egret.TouchEvent.TOUCH_TAP,this.onsubmitBtn,this),this.ui("mailBtn").addEventListener(egret.TouchEvent.TOUCH_TAP,this.onMailHandle,this),GameButton.setButton(this.ui("mailBtn"),5,24,90,20,20,15202555),GameUtils.checkInput(this.ui("address_txt")),GameUtils.checkInput(this.ui("desc_txt")),GameUtils.checkInput(this.ui("validate_txt")),GameButton.setButton(this.ui("submitBtn"),0,20,518,20,20,16777215,-1)},e.prototype.onClose=function(){ModuleOpenManager.openUIByClassName("AddressSelectLayer",GameContainerLayer.UI_MODULE_TYPE)},e.prototype.onsubmitBtn=function(){return""==this.ui("validate_txt").text||this.ui("validate_txt").text==LangueManager.getText("22")?void doAction(HomeEvent.SHOW_FLOAT,LangueManager.getText("27")):""==this.ui("address_txt").text?void doAction(HomeEvent.SHOW_FLOAT,LangueManager.getText("65")):void GameManager.getInstance().addAddress(this.ui("address_txt").text,this.ui("desc_txt").text,this.ui("validate_txt").text,function(){ModuleOpenManager.openUIByClassName("AddressSelectLayer",GameContainerLayer.UI_MODULE_TYPE)},this)},e.prototype.onMailHandle=function(){var t=this;GameManager.getInstance().doMail(LoginLayer.username,function(){gameMain.DEBUG&&(t.ui("validate_txt").text=App.mailToken),t._time=60,App.TimerManager.doTimer(1e3,0,t.dotime,t)},this)},e.prototype.dotime=function(){this._time>0?(--this._time,this.ui("mailBtn").enabled=!1,this.ui("mailBtn").labelDisplay.text=LangueManager.getText("37")+this._time+"s"):(this.ui("mailBtn").labelDisplay.text="",this.ui("mailBtn").enabled=!0,App.TimerManager.remove(this.dotime,this))},e.prototype.dispose=function(){t.prototype.dispose.call(this),App.TimerManager.remove(this.dotime,this),this.ui("closeBtn").removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClose,this),this.ui("submitBtn").removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onsubmitBtn,this),this.ui("mailBtn").removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onMailHandle,this)},e}(BaseBoxContainer);__reflect(AddressInfoLayer.prototype,"AddressInfoLayer",["eui.UIComponent","egret.DisplayObject"]);var AddressItemView=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.ui("deleteBtn").visible=!1,GameButton.setButton(this.ui("deleteBtn"),0,10,65,18,18,3105405),this.ui("deleteBtn").labelDisplay.text=LangueManager.getText("98")},e.prototype.updateView=function(t){this._data=t,t?(this.ui("desc_txt").text=this._data.memo,this.ui("addRess_txt").text=GameUtils.getTokenStr(this._data.address)):(this.ui("selcet_img").visible=!1,this.ui("desc_txt").text="",this.ui("addRess_txt").text=""),this.ui("desc_txt").text="",this.ui("selcet_img").visible=!1,this.ui("img").visible=!0},e.prototype.isSelect=function(t){this.ui("deleteBtn").visible=!1,this.ui("selcet_img").visible=!1,this.ui("img").visible=!0,this._data&&t&&(this.ui("desc_txt").text=this._data.memo,this.ui("deleteBtn").visible=!0,this.ui("img").visible=!1,this.ui("deleteBtn").addEventListener(egret.TouchEvent.TOUCH_TAP,this.onDelectHandle,this),this.ui("selcet_img").visible=this._data.address==t.address,this.select=this._data.address==t.address)},e.prototype.onDelectHandle=function(t){t.stopPropagation(),GameManager.getInstance().deleteAddress(this._data.id)},e.prototype.onClick=function(){doAction(HomeEvent.CLICK_ADDRESS,this._data)},e.prototype.dispose=function(){t.prototype.dispose.call(this),this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.ui("deleteBtn").removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onDelectHandle,this)},e}(BaseContainer);__reflect(AddressItemView.prototype,"AddressItemView");var AddressSelectLayer=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.ui("title1_txt").text=LangueManager.getText("58"),this.ui("closeBtn").addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClose,this),this.ui("submitBtn").addEventListener(egret.TouchEvent.TOUCH_TAP,this.onsubmitBtn,this),this.ui("submitBtn").labelDisplay.text=LangueManager.getText("60"),GameButton.setButton(this.ui("submitBtn"),0,20,518,20,20,16777215,-1),addAction(HomeEvent.REF_ADDRESS,this.updateViewByParams,this),addAction(HomeEvent.CLICK_ADDRESS,this.onItemClick,this)},e.prototype.updateViewByParams=function(){for(var t=GameManager.getInstance().getAddressSelect(),e=0;5>e;++e)e<t.length?(this.ui("item"+e).visible=!0,this.ui("item"+e).updateView(t[e]),this.ui("item"+e).isSelect(GameManager.getInstance().getAddressSelect(!0))):(this.ui("item"+e).visible=!1,this.ui("item"+e).isSelect(null))},e.prototype.onItemClick=function(t){for(var e=0;5>e;++e)this.ui("item"+e).isSelect(t)},e.prototype.onClose=function(){for(var t=-1,i=0;5>i;++i)this.ui("item"+i).select&&(t=this.ui("item"+i)._data.id);return 0>t?void(1==e.initType?ModuleOpenManager.openUIByClassName("GetMoneyLayer",GameContainerLayer.UI_MODULE_TYPE):ModuleOpenManager.openUIByClassName("RechargeLayer",GameContainerLayer.UI_MODULE_TYPE)):void GameManager.getInstance().selectAddress(t,function(){1==e.initType?ModuleOpenManager.openUIByClassName("GetMoneyLayer",GameContainerLayer.UI_MODULE_TYPE):ModuleOpenManager.openUIByClassName("RechargeLayer",GameContainerLayer.UI_MODULE_TYPE)},this)},e.prototype.onsubmitBtn=function(){return 5==GameManager.getInstance().getAddressSelect().length?void doAction(HomeEvent.SHOW_FLOAT,LangueManager.getText("59")):void ModuleOpenManager.openUIByClassName("AddressInfoLayer",GameContainerLayer.UI_MODULE_TYPE)},e.prototype.dispose=function(){t.prototype.dispose.call(this),this.ui("closeBtn").removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClose,this),this.ui("submitBtn").removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onsubmitBtn,this)},e.initType=-1,e}(BaseBoxContainer);__reflect(AddressSelectLayer.prototype,"AddressSelectLayer",["eui.UIComponent","egret.DisplayObject"]);var GetMoneyLayer=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.ui("title1_txt").text=LangueManager.getText("52"),this.ui("name_txt").text=GameUtils.getInfo().email,this.ui("title2_txt").text=LangueManager.getText("53"),this.ui("title3_txt").text=GameUtils.getInfo().balance,this.ui("title4_txt").text=LangueManager.getText("54"),this.ui("title5_txt").text=LangueManager.getText("64"),this.ui("his_txt").text=LangueManager.getText("97"),this.ui("noAddress_txt").text=LangueManager.getText("65"),this.ui("noAddress_txt").touchEnabled=!1,this.ui("numInput_txt").text="",this.ui("numInput_txt").restrict="0-9",GameUtils.checkInput(this.ui("numInput_txt")),this.ui("submitBtn").labelDisplay.text=LangueManager.getText("55"),this.ui("submitBtn").addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.ui("closeBtn").addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClose,this),this.ui("his_txt").addEventListener(egret.TouchEvent.TOUCH_TAP,this.onHisBtn,this),addAction(HomeEvent.CLICK_ADDRESS,this.openAddressLayer,this),GameButton.setButton(this.ui("submitBtn"),0,20,518,20,20,16777215,-1)},e.prototype.updateViewByParams=function(){var t=GameManager.getInstance().getAddressSelect(!0);this.ui("addressItem").updateView(t),this.ui("noAddress_txt").visible=null==t},e.prototype.onClick=function(){if(""==this.ui("numInput_txt").text)return void doAction(HomeEvent.SHOW_FLOAT,LangueManager.getText("57"));var t=GameManager.getInstance().getAddressSelect(!0);return t?void GameManager.getInstance().getCoin(t.address,t.memo,this.ui("numInput_txt").text,function(){RechargeHistoryLayer.type=1,ModuleOpenManager.openUIByClassName("RechargeHistoryLayer",GameContainerLayer.UI_MODULE_TYPE,2)},this):void doAction(HomeEvent.SHOW_FLOAT,LangueManager.getText("56"))},e.prototype.openAddressLayer=function(){ModuleOpenManager.openUIByClassName("AddressSelectLayer",GameContainerLayer.UI_MODULE_TYPE),AddressSelectLayer.initType=1},e.prototype.onClose=function(){App.EgretExpandUtils.removeFromParent(this)},e.prototype.onHisBtn=function(){GameManager.getInstance().getRechHistory(function(){RechargeHistoryLayer.type=1,ModuleOpenManager.openUIByClassName("RechargeHistoryLayer",GameContainerLayer.UI_MODULE_TYPE)},this)},e.prototype.dispose=function(){t.prototype.dispose.call(this),this.ui("submitBtn").removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.ui("closeBtn").removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClose,this),this.ui("his_txt").removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onHisBtn,this)},e}(BaseBoxContainer);__reflect(GetMoneyLayer.prototype,"GetMoneyLayer",["eui.UIComponent","egret.DisplayObject"]);var RechargeLayer=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.ui("title1_txt").text=LangueManager.getText("66"),this.ui("title2_txt").text=LangueManager.getText("68"),this.ui("title3_txt").alpha=.5,this.ui("title3_txt").text=LangueManager.getText("69"),this.ui("title4_txt").text=LangueManager.getText("64"),this.ui("title5_txt").text=LangueManager.getText("70"),this.ui("title6_txt").text=LangueManager.getText("72"),this.ui("his_txt").text=LangueManager.getText("97"),this.ui("noAddress_txt").text=LangueManager.getText("94"),this.ui("noAddress_txt").touchEnabled=!1,this.set7(),this.ui("submitBtn").labelDisplay.text=LangueManager.getText("67"),this.ui("submitBtn").addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.ui("closeBtn").addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClose,this),this.ui("his_txt").addEventListener(egret.TouchEvent.TOUCH_TAP,this.onHisBtn,this),addAction(HomeEvent.CLICK_ADDRESS,this.openAddressLayer,this),GameButton.setButton(this.ui("submitBtn"),0,20,518,20,20,16777215,-1)},e.prototype.set7=function(){this.ui("title7_txt").textFlow=new Array({text:LangueManager.langueConfig[73]+"   ",style:{textColor:16777215}},{text:LangueManager.getText("74"),style:{href:"event:text event triggered",underline:!0}}),this.ui("title7_txt").touchEnabled=!0,this.ui("title7_txt").addEventListener(egret.TextEvent.LINK,this.copyStr,this),this.ui("title3_txt").x=this.ui("title2_txt").x+this.ui("title2_txt").width},e.prototype.copyStr=function(){GameUtils.copy(LangueManager.langueConfig[73]),doAction(HomeEvent.SHOW_FLOAT,LangueManager.getText("71"))},e.prototype.updateViewByParams=function(){var t=GameManager.getInstance().getAddressSelect(!0);this.ui("addressItem").updateView(t),this.ui("noAddress_txt").visible=null==t},e.prototype.onClick=function(){this.ui("title2_txt").alpha=this.ui("addressRoot").visible?.5:1,this.ui("title3_txt").alpha=this.ui("descRoot").visible?.5:1,this.ui("addressRoot").visible=!this.ui("addressRoot").visible,this.ui("descRoot").visible=!this.ui("descRoot").visible,this.ui("submitBtn").visible=!this.ui("submitBtn").visible},e.prototype.onClose=function(){this.ui("addressRoot").visible?App.EgretExpandUtils.removeFromParent(this):this.onClick()},e.prototype.openAddressLayer=function(){ModuleOpenManager.openUIByClassName("AddressSelectLayer",GameContainerLayer.UI_MODULE_TYPE),AddressSelectLayer.initType=2},e.prototype.onHisBtn=function(){GameManager.getInstance().getRechHistory(function(){RechargeHistoryLayer.type=2,ModuleOpenManager.openUIByClassName("RechargeHistoryLayer",GameContainerLayer.UI_MODULE_TYPE)},this)},e.prototype.dispose=function(){t.prototype.dispose.call(this),this.ui("submitBtn").removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.ui("closeBtn").removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClose,this),this.ui("title7_txt").removeEventListener(egret.TextEvent.LINK,this.copyStr,this),this.ui("his_txt").removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onHisBtn,this)},e}(BaseBoxContainer);__reflect(RechargeLayer.prototype,"RechargeLayer",["eui.UIComponent","egret.DisplayObject"]);var RechargeHistoryItem=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this)},e.prototype.updateView=function(t){this.ui("time_txt").text=DateUtils.getInstance().getFormatBySecond(parseInt(t.updated_at),10),this.ui("num_txt").text=t.amount,this.ui("state_txt").text=LangueManager.getStateStr(t.status),this.ui("name_txt").text=LangueManager.getText("99")},e}(BaseContainer);__reflect(RechargeHistoryItem.prototype,"RechargeHistoryItem");var RechargeHistoryLayer=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this._collection=GameUtils.createTabList(this.ui("listTable"),null,640,102,1,5,1,1,egret.ScrollDirection.VERTICAL,"RechargeHistoryItem"),this.ui("closeBtn").addEventListener(egret.TouchEvent.TOUCH_TAP,this.onCLoseHandle,this),this.ui("btn1").addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnHandle,this),this.ui("btn2").addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnHandle,this),this.ui("title1_txt").text=LangueManager.getText("80"),this.ui("title2_txt").text=LangueManager.getText("81"),this.ui("title3_txt").text=LangueManager.getText("82"),this.ui("title4_txt").text=LangueManager.getText("100")},e.prototype.updateViewByParams=function(t){if(void 0===t&&(t=1),1==t){var e=ProxyCache.getCache(HttpConst.AddressServer_getHistoryList).rechList;this._collection.bind(e),this.ui("btn1").currentState="down",this.ui("btn2").currentState="up"}else{var e=ProxyCache.getCache(HttpConst.AddressServer_getHistoryList).getList;this._collection.bind(e),this.ui("btn1").currentState="up",this.ui("btn2").currentState="down"}},e.prototype.onBtnHandle=function(t){var e=this,i=t.target.name;if(this._currBtn!=i){this._currBtn=i;var n;switch(i){case"btn1":this.ui("btn1").currentState="down",this.ui("btn2").currentState="up",n=ProxyCache.getCache(HttpConst.AddressServer_getHistoryList).rechList,this._collection.bind(n);break;case"btn2":ProxyCache.getCache(HttpConst.AddressServer_getWithHistoryList)?(this.ui("btn1").currentState="up",this.ui("btn2").currentState="down",n=ProxyCache.getCache(HttpConst.AddressServer_getWithHistoryList).getList,this._collection.bind(n)):GameManager.getInstance().getGetHistory(function(){e.ui("btn1").currentState="up",e.ui("btn2").currentState="down",n=ProxyCache.getCache(HttpConst.AddressServer_getWithHistoryList).getList,e._collection.bind(n)},this)}}},e.prototype.onCLoseHandle=function(){1==e.type?ModuleOpenManager.openUIByClassName("GetMoneyLayer",GameContainerLayer.UI_MODULE_TYPE):ModuleOpenManager.openUIByClassName("RechargeLayer",GameContainerLayer.UI_MODULE_TYPE)},e.prototype.dispose=function(){t.prototype.dispose.call(this),this.ui("closeBtn").removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onCLoseHandle,this),this.ui("btn1").removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnHandle,this),this.ui("btn2").removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnHandle,this),this._collection=null},e}(BaseBoxContainer);__reflect(RechargeHistoryLayer.prototype,"RechargeHistoryLayer",["eui.UIComponent","egret.DisplayObject"]);var SignItemView=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this)},e.prototype.updateView=function(t,e){this.ui("name_txt").text=LangueManager.getText(t.Id),this.ui("money_txt").text=t.reward,this.ui("icon").source=t.icon+"_png",this.ui("icon").visible=2!=e,this.ui("complete_img").visible=2==e,1==e&&this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)},e.prototype.onClick=function(){GameManager.getInstance().sign()},e.prototype.dispose=function(){t.prototype.dispose.call(this),this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)},e}(BaseContainer);__reflect(SignItemView.prototype,"SignItemView");var SignLayer=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),addAction(HomeEvent.CLOSE_SIGN,this.onClose,this)},e.prototype.updateViewByParams=function(){for(var t=ProxyCache.getCache(HttpConst.SignServer_sign),e=ResManager.getInstance().getSignData(),i=Object.keys(e),n=0;n<i.length;n++)this.ui("item"+n).updateView(e[i[n]],t[n])},e.prototype.onClose=function(){App.EgretExpandUtils.removeFromParent(this)},e}(BaseBoxContainer);__reflect(SignLayer.prototype,"SignLayer",["eui.UIComponent","egret.DisplayObject"]);var TimeRewardView=function(t){function e(){var e=t.call(this)||this;return e._time=0,e}return __extends(e,t),e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.updateView(),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),addAction(HomeEvent.REWARD_TIME,this.updateView,this)},e.prototype.onClick=function(){var t=this;this._time<=0&&GameManager.getInstance().timeReward(function(){t._time=ProxyCache.getCache(HttpConst.online_award),t._time>0?(t.ui("timeReward1").visible=!1,t.ui("timeReward2").visible=!0,App.TimerManager.doTimer(1e3,0,t.refreshTimeFun,t)):(t.ui("timeReward1").visible=!0,t.ui("timeReward2").visible=!1,App.TimerManager.remove(t.refreshTimeFun,t))},this)},e.prototype.updateView=function(){this._time=ProxyCache.getCache(HttpConst.online_award),this.visible=-1!=this._time,this._time>0?(this.ui("timeReward1").visible=!1,this.ui("timeReward2").visible=!0,App.TimerManager.doTimer(1e3,0,this.refreshTimeFun,this)):(this.ui("timeReward1").visible=!0,this.ui("timeReward2").visible=!1,App.TimerManager.remove(this.refreshTimeFun,this))},e.prototype.refreshTimeFun=function(){this._time>0?(--this._time,this.ui("time_txt").text=App.DateUtils.getFormatBySecond(this._time,5)):(this.ui("timeReward1").visible=!0,this.ui("timeReward2").visible=!1,this.ui("time_txt").text="",App.TimerManager.remove(this.refreshTimeFun,this))},e.prototype.dispose=function(){t.prototype.dispose.call(this),App.TimerManager.remove(this.refreshTimeFun,this),this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)},e}(BaseContainer);__reflect(TimeRewardView.prototype,"TimeRewardView");var EasyLoading=function(t){function e(){var e=t.call(this)||this;return e.contentGroup=null,e.shape=null,e.speed=10,e.initLoading(),e}return __extends(e,t),e.prototype.showLoading=function(){GameContainerLayer.addToTipContainer(this.contentGroup),this.animation&&this.animation.play("1",0)},e.prototype.hideLoading=function(){!SceneAniController.isHiding(),GameContainerLayer.removeFromParent(this.contentGroup)},e.prototype.onProgress=function(t,e){},e.prototype.initLoading=function(){this.contentGroup=new egret.DisplayObjectContainer,this.shape=new eui.Image("black1_png"),this.shape.width=880,this.shape.height=App.StageUtils.getHeight(),this.shape.alpha=.3,this.shape.touchEnabled=!0,this.contentGroup.addChild(this.shape)},e}(BaseClass);__reflect(EasyLoading.prototype,"EasyLoading");var LoadingLayer=function(t){function e(e,i){void 0===e&&(e=null),void 0===i&&(i=null);var n=t.call(this)||this;return n.titleText=LangueManager.getText("8"),n.comFun=e,n.curr=i,n.createView(),n.onBoxResize(),n}return __extends(e,t),e.prototype.createView=function(){this.bg=new eui.Image("bg_png"),this.addChild(this.bg),this.downRoot=new egret.DisplayObjectContainer,this.downRoot.y=1136,this.addChild(this.downRoot),this.textField=new egret.TextField,TextFieldManager.setStyle(this.textField),this.downRoot.addChild(this.textField),this.textField.x=70,this.textField.y=-95,this.textField.width=480,this.textField.height=100,this.textField.textAlign="center";var t=RES.getRes("loading_png"),e=RES.getRes("loading_json");this.mcf=new egret.MovieClipDataFactory(e,t),this.mc=new egret.MovieClip(this.mcf.generateMovieClipData("loading")),this.mc.x=-50,this.addChild(this.mc),this.mc.play(-1)},e.prototype.createBar=function(){null==this.praBar&&(this.praBar=new ProgressUI(this.exp_bg,this.exp_bar_bg),this.onProgress(0,0))},e.prototype.setViewText=function(t){this.titleText=t,this.textField.text=t+"..."},e.prototype.onProgress=function(t,e,i){void 0===i&&(i=""),this.textField.text=this.titleText+"...["+Math.floor(t/e*100)+"%]",""!=i&&this.setViewText(i),this.praBar&&this.praBar.updateProgress(Math.floor(t),e),t&&e&&(this.textField.text=this.titleText+"...["+Math.floor(t/e*100)+"%]")},e}(BaseBoxContainer);__reflect(LoadingLayer.prototype,"LoadingLayer",["eui.UIComponent","egret.DisplayObject"]);var ProxyWaitLayer=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),null==this.loadling,this.showLoading(),this.ui("lbTxt").text=LangueManager.getText("92")},e.prototype.showLoading=function(){App.EgretExpandUtils.addChild(this.ui("scaleRoot"),this.loadling),this.loadling&&this.loadling.play("3",0),this.ui("lbTxt").visible=!0},e.prototype.clearTime=function(){egret.Tween.removeTweens(this)},e.prototype.dispose=function(){t.prototype.dispose.call(this),this.clearTime(),this.loadling&&App.EgretExpandUtils.removeArmatureFromParent(this.loadling),this.loadling=null},e}(BaseBoxContainer);__reflect(ProxyWaitLayer.prototype,"ProxyWaitLayer",["eui.UIComponent","egret.DisplayObject"]);var SceneAniController=function(){function t(){}return t.init=function(t,e,i,n){this._animation=t,this._container=e,this._key_show=i,this._key_hide=n},t.show=function(t,e){if(void 0===e&&(e=null),!this._changing)if(this._hiding){this._changing=!0,this._container.contains(this._animation)||this._container.addChild(this._animation);var i=function(t,e){},n=function(){this._hiding=this._changing=!1,this._animation.removeCompleteCallFunc(n,this),this._animation.removeFrameCallFunc(i,this),t&&t.call(e)};this._animation.addCompleteCallFunc(n,this),this._animation.addFrameCallFunc(i,this),this._animation.play(this._key_show,1)}else t&&t.call(e)},t.hide=function(t,e){if(void 0===e&&(e=null),!this._changing)if(this._hiding)t&&t.call(e);else{this._changing=!0;var i=function(){this._hiding=!0,this._changing=!1,this._animation.removeCompleteCallFunc(i,this),t&&t.call(e),this._animation.parent&&this._animation.parent.removeChild(this._animation)};this._animation.addCompleteCallFunc(i,this),this._animation.play(this._key_hide,1)}},t.isHiding=function(){return this._hiding},t._changing=!1,t._hiding=!0,t}();__reflect(SceneAniController.prototype,"SceneAniController");