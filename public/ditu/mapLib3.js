/**
 * Created by g on 2018/1/29.
 */
_jsload&&_jsload('map', 'BMap.register(function(map){if(map.config&&map.config.isOverviewMap)return;if(map.isLoaded())addMapCopyright(map);else map[TaddEventListener]("load",function(){addMapCopyright(this)});map.cityName="\\u4e2d\\u56fd";var mapCenter={};mapCenter.enableRequest=true;mapCenter.request=function(){if(mapCenter.enableRequest){mapCenter.enableRequest=false;setTimeout(function(){mapCenter._request()},500)}};mapCenter._request=function(){var bounds=map.getBounds(),level=map.getZoom(),sw=MercatorProjection.convertLL2MC(bounds.getSouthWest()), ne=MercatorProjection.convertLL2MC(bounds.getNorthEast());SearchRequestMgr.request(function(json){if(json["current_city"]["code"]>=9E3&&json["current_city"]["code"]<=9378)json["current_city"]["name"]="\\u53f0\\u6e7e\\u7701";if(json["current_city"]["code"]>=2E4&&json["current_city"]["code"]<=20499)json["current_city"]["name"]="\\u65b0\\u52a0\\u5761";if(json["current_city"]["code"]>=20500&&json["current_city"]["code"]<=25999)json["current_city"]["name"]="\\u6cf0\\u56fd";if(json["current_city"]["code"]>=26E3&& json["current_city"]["code"]<=29999)json["current_city"]["name"]="\\u65e5\\u672c";if(json["current_city"]["code"]>=3E4&&json["current_city"]["code"]<=30999)json["current_city"]["name"]="\\u97e9\\u56fd";if(json["current_city"]["code"]>=31E3&&json["current_city"]["code"]<=37E3)json["current_city"]["name"]="\\u4e9a\\u592a";if(json["current_city"]["code"]>=46609&&json["current_city"]["code"]<=52505)json["current_city"]["name"]="\\u6b27\\u6d32";if(json["current_city"]["code"]>=39509&&json["current_city"]["code"]<= 53500)json["current_city"]["name"]="\\u5357\\u7f8e\\u6d32";if(json["current_city"]["code"]>=54E3&&json["current_city"]["code"]<=7E4)json["current_city"]["name"]="\\u5317\\u7f8e\\u6d32";if(json["current_city"]["code"]===54003&&json["current_city"]["code"]>=60731&&json["current_city"]["code"]<=61123)json["current_city"]["name"]="\\u7f8e\\u56fd";if(json["current_city"]["code"]===54015||json["current_city"]["code"]>=57970&&json["current_city"]["code"]<=60223)json["current_city"]["name"]="\\u52a0\\u62ff\\u5927"; if(json["current_city"]["code"]===54025||json["current_city"]["code"]>=54338&&json["current_city"]["code"]<=57374)json["current_city"]["name"]="\\u58a8\\u897f\\u54e5";mapCenter.enableRequest=true;if(json&&json["current_city"]){var cityName=json["current_city"]["name"];var cCode=json["current_city"]["code"];if(cCode!==map.cCode)map.dispatchEvent("citychange",{"name":cityName,"code":cCode});map.cityName=cityName;map.cCode=json["current_city"]["code"];if(!isMobile())addCopyrightData(map)}},{"qt":"cen", "b":sw["lng"]+","+sw["lat"]+";"+ne["lng"]+","+ne["lat"],"l":level},"","",true)};map[TaddEventListener]("load",function(e){mapCenter.request()});map[TaddEventListener]("moveend",function(e){mapCenter.request()});map[TaddEventListener]("zoomend",function(e){mapCenter.request()})}); function addMapCopyright(map){if(map.temp.copyadded)return;map.temp.copyadded=true;var offset=new Size(81,2);if(isMobile()){offset[Twidth]=72;offset[Theight]=0}var cpyCtrl=new CopyrightControl({"offset":offset,"printable":true});map.cpyCtrl=cpyCtrl;addCopyrightData(map);map[TaddEventListener]("maptypechange",function(){addCopyrightData(map)});map.addControl(cpyCtrl);var logoCtrl=new LogoControl;logoCtrl._opts={printable:true};map.addControl(logoCtrl);map[TaddEventListener]("resize",function(){if(this.getSize()[Twidth]>= 220&&map.getSize()[Theight]>=100){logoCtrl.show();cpyCtrl.setOffset(offset)}else{logoCtrl.hide();cpyCtrl.setOffset(new Size(4,2))}});if(map.getSize()[Twidth]>=220&&map.getSize()[Theight]>=100)logoCtrl.show();else{logoCtrl.hide();cpyCtrl.setOffset(new Size(4,2))}if(map.highResolutionEnabled())logoCtrl.setOffset(new Size(3,2))} function addCopyrightData(map){if(!map.cpyCtrl){var offset=new Size(2,2);if(isMobile()){offset[Twidth]=72;offset[Theight]=0}var cpyCtrl=new CopyrightControl({"offset":offset,"printable":true});map.cpyCtrl=cpyCtrl}var cityName=map.cityName||"\\u4e2d\\u56fd";var mapType=map.getMapType();var PalmCity=["\\u5e38\\u5dde\\u5e02","\\u5357\\u660c\\u5e02","\\u4e4c\\u9c81\\u6728\\u9f50\\u5e02","\\u65e0\\u9521\\u5e02","\\u798f\\u5dde\\u5e02","\\u6cc9\\u5dde\\u5e02","\\u73e0\\u6d77\\u5e02","\\u8d35\\u9633\\u5e02"];var CenCity=["\\u5317\\u4eac\\u5e02", "\\u4e0a\\u6d77\\u5e02","\\u5e7f\\u5dde\\u5e02","\\u6df1\\u5733\\u5e02","\\u5b81\\u6ce2\\u5e02","\\u77f3\\u5bb6\\u5e84\\u5e02","\\u6c88\\u9633\\u5e02","\\u957f\\u6625\\u5e02","\\u9752\\u5c9b\\u5e02","\\u6e29\\u5dde\\u5e02","\\u53f0\\u5dde\\u5e02","\\u91d1\\u534e\\u5e02","\\u4f5b\\u5c71\\u5e02","\\u4e2d\\u5c71\\u5e02","\\u6606\\u660e\\u5e02","\\u5357\\u5b81\\u5e02","\\u82cf\\u5dde\\u5e02","\\u897f\\u5b89\\u5e02","\\u6d4e\\u5357\\u5e02","\\u90d1\\u5dde\\u5e02","\\u5408\\u80a5\\u5e02","\\u547c\\u548c\\u6d69\\u7279\\u5e02","\\u676d\\u5dde\\u5e02","\\u6210\\u90fd\\u5e02", "\\u6b66\\u6c49\\u5e02","\\u957f\\u6c99\\u5e02","\\u5929\\u6d25\\u5e02","\\u5357\\u4eac\\u5e02","\\u91cd\\u5e86\\u5e02","\\u5927\\u8fde\\u5e02","\\u4e1c\\u839e\\u5e02","\\u53a6\\u95e8\\u5e02"];var MapKingCity=["\\u9999\\u6e2f\\u7279\\u522b\\u884c\\u653f\\u533a"];var Taiwan=["\\u53f0\\u6e7e\\u7701"];var Japan=["\\u65e5\\u672c"];var Korea=["\\u97e9\\u56fd"];var Tailand=["\\u6cf0\\u56fd"];var AsiaPacific=["\\u4e9a\\u592a"];var Singapore=["\\u65b0\\u52a0\\u5761"];var Europe=["\\u6b27\\u6d32"];var SouthAmerica=["\\u5357\\u7f8e\\u6d32"];var NorthAmerica= ["\\u5317\\u7f8e\\u6d32"];var America=["\\u7f8e\\u56fd"];var Mexico=["\\u58a8\\u897f\\u54e5"];var Canada=["\\u52a0\\u62ff\\u5927"];for(var p in PalmCity)if(PalmCity[p]===cityName){var isPalmCity=true;break}for(var p in CenCity)if(CenCity[p]===cityName){var isCenCity=true;break}for(var p in MapKingCity)if(MapKingCity[p]===cityName){var isMapKingCity=true;break}if(Taiwan[0]===cityName)var isTaiwan=true;if(Singapore[0]===cityName)var isSingapore=true;if(Japan[0]===cityName)var isJapan=true;if(Korea[0]===cityName)var isKorea= true;if(Tailand[0]===cityName)var isTailand=true;if(AsiaPacific[0]===cityName)var isAsiaPacific=true;if(Europe[0]===cityName)var isEurope=true;if(SouthAmerica[0]===cityName)var isSouthAmerica=true;if(NorthAmerica[0]===cityName)var isNorthAmerica=true;if(America[0]===cityName)var isAmerica=true;if(Canada[0]===cityName)var isCanada=true;if(Mexico[0]===cityName)var isMexico=true;var copyStrs=["&copy;&nbsp;2018 Baidu - GS(2016)2089\\u53f7"+" - \\u7532\\u6d4b\\u8d44\\u5b571100930 - \\u4eacICP\\u8bc1030173\\u53f7 - Data &copy; "]; var background="rgba(255, 255, 255, 0.701961)";if(map.getZoom()<=9)copyStrs=["&copy;&nbsp;2018 Baidu - GS(2016)2089\\u53f7"+" - \\u7532\\u6d4b\\u8d44\\u5b571100930 - \\u4eacICP\\u8bc1030173\\u53f7 - Data &copy; "];else if(isTaiwan)copyStrs=["&copy;&nbsp;2018 Baidu - GS(2016)2089\\u53f7"+" - \\u7532\\u6d4b\\u8d44\\u5b571100930 - \\u4eacICP\\u8bc1030173\\u53f7 - Data &copy; "];else if(isJapan||isKorea)copyStrs=["&copy;&nbsp;2018 Baidu - GS(2016)2089\\u53f7"+" - \\u7532\\u6d4b\\u8d44\\u5b571100930 - \\u4eacICP\\u8bc1030173\\u53f7 - Data &copy; "]; else if(isSingapore||isTailand)copyStrs=["&copy;&nbsp;2018 Baidu - GS(2016)2089\\u53f7"+" - \\u7532\\u6d4b\\u8d44\\u5b571100930 - \\u4eacICP\\u8bc1030173\\u53f7 - Data &copy; "];else if(isAsiaPacific)copyStrs=["&copy;&nbsp;2018 Baidu - GS(2016)2089\\u53f7"+" - \\u7532\\u6d4b\\u8d44\\u5b571100930 - \\u4eacICP\\u8bc1030173\\u53f7 - Data &copy; "];else if(isEurope)copyStrs=["&copy;&nbsp;2018 Baidu - GS(2016)2089\\u53f7"+" - \\u7532\\u6d4b\\u8d44\\u5b571100930 - \\u4eacICP\\u8bc1030173\\u53f7 - Data &copy; "];else if(isSouthAmerica)copyStrs= ["&copy;&nbsp;2018 Baidu - GS(2016)2089\\u53f7"+" - \\u7532\\u6d4b\\u8d44\\u5b571100930 - \\u4eacICP\\u8bc1030173\\u53f7 - Data &copy; "];else if(isNorthAmerica)copyStrs=["&copy;&nbsp;2018 Baidu - GS(2016)2089\\u53f7"+" - \\u7532\\u6d4b\\u8d44\\u5b571100930 - \\u4eacICP\\u8bc1030173\\u53f7 - Data &copy; "];if(map.getZoom()<=9){copyStrs.push("\\u957f\\u5730\\u4e07\\u65b9");copyStrs.push(\' &amp; <a target="_blank" href="http://www.openstreetmap.org/">OpenStreetMap</a>\');copyStrs.push(\' &amp; <a target="_blank" href="http://corporate.navteq.com/supplier_terms.html">HERE</a>\'); if(mapType===BMAP_SATELLITE_MAP||mapType===BMAP_HYBRID_MAP){copyStrs.push(\' &amp; <a target="_blank" href="http://www.eso.org/public/">ESO</a>\');background="rgba(0,0,0,.7)"}if(mapType===BMAP_PERSPECTIVE_MAP){copyStrs.push(\' &amp; <a href="http://o.cn" target="_blank" style="color:#fff;font-size: 11px;">\\u90fd\\u5e02\\u5708</a>\');background="none"}}else if(isJapan||isKorea)copyStrs.push(\'<a target="_blank" href="http://www.openstreetmap.org/">OpenStreetMap</a>\');else if(isSingapore||isTailand)copyStrs.push(\'<a target="_blank" href="http://corporate.navteq.com/supplier_terms.html">HERE</a>\'); else if(isAsiaPacific){copyStrs.push(\'<a target="_blank" href="http://corporate.navteq.com/supplier_terms.html">HERE</a>\');copyStrs.push(\' &amp; <a target="_blank" href="https://www.mapbox.com/">Mapbox</a>\')}else if(isEurope){copyStrs.push(\'<a target="_blank" href="http://www.openstreetmap.org/">OpenStreetMap</a>\');copyStrs.push(\' &amp; <a target="_blank" href="https://www.mapbox.com/">Mapbox</a>\')}else if(isSouthAmerica){copyStrs.push(\'<a target="_blank" href="http://www.openstreetmap.org/">OpenStreetMap</a>\'); copyStrs.push(\' &amp; <a target="_blank" href="https://www.mapbox.com/">Mapbox</a>\')}else if(isAmerica||isMexico||isCanada){copyStrs.push(\'<a target="_blank" href="http://corporate.navteq.com/supplier_terms.html">HERE</a>\');copyStrs.push(\' &amp; <a target="_blank" href="https://www.mapbox.com/">Mapbox</a>\')}else if(isNorthAmerica){copyStrs.push(\'<a target="_blank" href="http://www.openstreetmap.org/">OpenStreetMap</a>\');copyStrs.push(\' &amp; <a target="_blank" href="https://www.mapbox.com/">Mapbox</a>\')}else{copyStrs.push("\\u957f\\u5730\\u4e07\\u65b9"); if(isPalmCity)copyStrs.push(\' &amp; <a target="_blank" href="http://www.palmcity.cn/palmcity/">PalmCity</a>\');if(isCenCity);if(isMapKingCity)copyStrs.push(\' &amp; <a target="_blank" href="http://www.mapking.com/HongKong/eng/home/MapKing_Webmap.html">MapKing</a>\');if(isTaiwan){copyStrs.push(\' &amp; <a target="_blank" href="http://corporate.navteq.com/supplier_terms.html">HERE</a>\');copyStrs.push(\' &amp; <a target="_blank" href="http://www.localking.com.tw/about/localking.aspx">\\u6a02\\u5ba2LocalKing</a>\')}if(mapType=== BMAP_SATELLITE_MAP||mapType===BMAP_HYBRID_MAP)background="rgba(0,0,0,.7)";if(mapType===BMAP_PERSPECTIVE_MAP){copyStrs.push(\' &amp; <a href="http://o.cn" target="_blank" style="color:#fff;font-size: 11px;">\\u90fd\\u5e02\\u5708</a>\');background="none"}}copyStrs.unshift(\'<span style="background: \'+background+\';padding: 0px 1px;line-height: 16px;display: inline;height: 16px;">\');copyStrs.push("</span>");copyStrs=copyStrs.join("");map.cpyCtrl.addCopyright({"id":1,"content":copyStrs})} function LogoControl(opts){this["defaultAnchor"]=BMAP_ANCHOR_BOTTOM_LEFT;this["defaultOffset"]=new Size(1,0);this.IMG_URL=MapConfig.imgPath+(isMobile()?"copyright_logo_s.png":"copyright_logo.png")}LogoControl[Tprototype]=new Control; LogoControl[Tprototype]["initialize"]=function(map){this._map=map;var div=create("div");div.style[Theight]="32px";var a=create("a",{title:"\\u5230\\u767e\\u5ea6\\u5730\\u56fe\\u67e5\\u770b\\u6b64\\u533a\\u57df",target:"_blank",href:"http://map.baidu.com/?sr=1"});a.style.outline="none";if(baidu.browser.ie==6)a.innerHTML="<div style=\'cursor:pointer;width:77px;height:32px;filter:progid:DXImageTransform.Microsoft.AlphaImageLoader(src="+this.IMG_URL+")\'></div>";else a.innerHTML="<img style=\'border:none;width:77px;height:32px\' src=\'"+ this.IMG_URL+"\' />";if(isMobile()){if(this._map.highResolutionEnabled())this.IMG_URL=MapConfig.imgPath+"copyright_logo_hd.png";div.style[Theight]="25px";a.href="http://map.baidu.com/?sr=1";a.innerHTML="<img style=\'border:none;width:68px;height:25px\' src=\'"+this.IMG_URL+"\' />"}div[TappendChild](a);map.getContainer()[TappendChild](div);return div};baidu[Textend](Map[Tprototype],{_draw:function(){this._bind()},_bind:function(){var me=this;me._watchSize=function(){var wh=me.getSize();if(me[Twidth]!=wh[Twidth]||me[Theight]!=wh[Theight]){var originSize=new Size(me[Twidth],me[Theight]);var oe=new BaseEvent("onbeforeresize");oe.size=originSize;me.dispatchEvent(oe);me._updateCenterPoint((wh[Twidth]-me[Twidth])/2,(wh[Theight]-me[Theight])/2);me.maskLayer.style[Twidth]=(me[Twidth]=wh[Twidth])+"px";me.maskLayer.style[Theight]=(me[Theight]=wh[Theight])+ "px";var e=new BaseEvent("onresize");e["size"]=wh;me.dispatchEvent(e);var x=TparseInt(me.platform.style.left)||0;var y=TparseInt(me.platform.style.top)||0;if(me.currentOperation!=0&&(me[ToffsetX]!=x||me[ToffsetY]!=y))me._setPlatformPosition(x,y)}};if(!isMobile()){baidu.on(me.maskLayer,"mouseover",function(e){preventDefault(e);me.dispatchEvent(new BaseEvent("onmouseover"))});baidu.on(me.maskLayer,"mouseout",function(e){preventDefault(e);me.dispatchEvent(new BaseEvent("onmouseout"))})}},_setPlatformPosition:function(x, y,p,dispatchEvent){if(isNaN(x)||isNaN(y))return;if(this[ToffsetX]==x&&this[ToffsetY]==y)return;this._updateCenterPoint(this[ToffsetX]-x,this[ToffsetY]-y,p);x=TMath.round(x);y=TMath.round(y);this[ToffsetX]=x;this[ToffsetY]=y;this.platform.style.left=x+"px";this.platform.style.top=y+"px";this.maskLayer.style.left=-x+"px";this.maskLayer.style.top=-y+"px";if(dispatchEvent!=false)this.dispatchEvent(new BaseEvent("onmoving"))},panTo:function(center,opts){if(!(center instanceof Point))return;var px=this.pointToPixel(center); var cx=TMath.round(this[Twidth]/2);var cy=TMath.round(this[Theight]/2);opts=opts||{};if(TMath.abs(cx-px.x)>this[Twidth]||TMath.abs(cy-px.y)>this[Theight]||opts["noAnimation"])this._panTo(cx-px.x,cy-px.y,center);else this._panBy(cx-px.x,cy-px.y,{duration:opts["duration"]})},_panTo:function(dx,dy,pt){var t=this.temp;if(t.operating==true)return;if(t.dragAni)t.dragAni.stop();this.dispatchEvent(new BaseEvent("onmovestart"));this._setPlatformPosition(this[ToffsetX]+dx,this[ToffsetY]+dy,pt);this.dispatchEvent(new BaseEvent("onmoveend"))}, panBy:function(dx,dy,opts){dx=TMath.round(dx)||0;dy=TMath.round(dy)||0;opts=opts||{};if(TMath.abs(dx)<=this[Twidth]&&TMath.abs(dy)<=this[Theight]&&!opts["noAnimation"])this._panBy(dx,dy);else this._panTo(dx,dy)},_panBy:function(dx,dy,opts){if(this.temp.operating==true)return;opts=opts||{};this.dispatchEvent(new BaseEvent("onmovestart"));var me=this,t=me.temp;t.pl=me[ToffsetX];t.pt=me[ToffsetY];if(t.tlPan)t.tlPan.cancel();if(t.dragAni)t.dragAni.stop();t.tlPan=new Animation({fps:opts.fps||me.config.fps, duration:opts.duration||me.config.actionDuration,transition:opts.transition||Transitions.easeInOutQuad,render:function(schedule){this.terminative=me.temp.operating;if(me.temp.operating)return;me._setPlatformPosition(t.pl+TMath.ceil(dx*schedule),t.pt+TMath.ceil(dy*schedule))},finish:function(e){me.dispatchEvent(new BaseEvent("onmoveend"));me.temp.tlPan=false;if(me.temp.stopArrow==true){me.temp.stopArrow=false;if(me.temp.arrow!=0)me._arrow()}}})},getTileId:function(point,level){var mapType=this.getMapType(); if(typeof mapType!="object")return null;var zoomUnits=256*mapType.getZoomUnits(level);point=MercatorProjection.convertLL2MC(point);var row=TparseInt(point["lng"]/zoomUnits);var column=TparseInt(point["lat"]/zoomUnits);return{row:row,column:column,level:level}}});exportSymbol(MapP,{"panTo":MapP.panTo,"panBy":MapP.panBy});function addCssByStyle(cssString){var doc=document;var style=doc.createElement("style");style.setAttribute("type","text/css");if(style.styleSheet)style.styleSheet.cssText=cssString;else{var cssText=doc.createTextNode(cssString);style[TappendChild](cssText)}var heads=doc.getElementsByTagName("head");if(heads[Tlength])heads[0][TappendChild](style);else doc.documentElement[TappendChild](style)}var cssString=".BMap_mask{background:transparent url(about:blank);}.BMap_noscreen{display:none;}.BMap_button{cursor:pointer;}.BMap_zoomer{background-image:url(http://api.map.baidu.com/images/mapctrls1d3.gif);background-repeat:no-repeat;overflow:hidden;font-size:1px;position:absolute;width:7px;height:7px;}.BMap_stdMpCtrl div{position:absolute;}.BMap_stdMpPan{width:44px;height:44px;overflow:hidden;background:url(http://api.map.baidu.com/images/mapctrls2d0.png) no-repeat;}.BMap_ie6 .BMap_stdMpPan{background:none;}.BMap_ie6 .BMap_smcbg{left:0;width:44px;height:464px;filter:progid:DXImageTransform.Microsoft.AlphaImageLoader(src=\'http://api.map.baidu.com/images/mapctrls2d0.png\');}.BMap_ie6 .BMap_stdMpPanBg{z-index:-1;}.BMap_stdMpPan .BMap_button{height:15px;width:15px;}.BMap_panN,.BMap_panW,.BMap_panE,.BMap_panS{overflow:hidden;}.BMap_panN{left:14px;top:0;}.BMap_panW{left:1px;top:12px;}.BMap_panE{left:27px;top:12px;}.BMap_panS{left:14px;top:25px;}.BMap_stdMpZoom{top:45px;overflow:hidden;}.BMap_stdMpZoom .BMap_button{width:22px;height:21px;left:12px;overflow:hidden;background-image:url(http://api.map.baidu.com/images/mapctrls2d0.png);background-repeat:no-repeat;z-index:10;}.BMap_ie6 .BMap_stdMpZoom .BMap_button{background:none;}.BMap_stdMpZoomIn{background-position:0 -221px;}.BMap_stdMpZoomOut{background-position:0 -265px;}.BMap_ie6 .BMap_stdMpZoomIn div{left:0;top:-221px;}.BMap_ie6 .BMap_stdMpZoomOut div{left:0;top:-265px;}.BMap_stdMpType4 .BMap_stdMpZoom .BMap_button{left:0;overflow:hidden;background:-webkit-gradient(linear,50% 0,50% 100%,from(rgba(255,255,255,0.85)),to(rgba(217,217,217,0.85)));z-index:10;-webkit-border-radius:22px;width:34px;height:34px;border:1px solid rgba(255,255,255,0.5);-webkit-box-shadow:0 2px 3.6px #CCC;display:-webkit-box;-webkit-box-align:center;-webkit-box-pack:center;-webkit-box-sizing:border-box;}.BMap_stdMpType4 .BMap_smcbg{position:static;background:url(http://api.map.baidu.com/images/mapctrls2d0_mb.png) 0 0 no-repeat;-webkit-background-size:24px 32px;}.BMap_stdMpType4 .BMap_stdMpZoomIn{background-position:0 0;}.BMap_stdMpType4 .BMap_stdMpZoomIn .BMap_smcbg{width:24px;height:24px;background-position:0 0;}.BMap_stdMpType4 .BMap_stdMpZoomOut{background-position:0 0;}.BMap_stdMpType4 .BMap_stdMpZoomOut .BMap_smcbg{width:24px;height:6px;background-position:0 -25px;}.BMap_stdMpSlider{width:37px;top:18px;}.BMap_stdMpSliderBgTop{left:18px;width:10px;overflow:hidden;background:url(http://api.map.baidu.com/images/mapctrls2d0.png) no-repeat -23px -226px;}.BMap_stdMpSliderBgBot{left:19px;height:8px;width:10px;top:124px;overflow:hidden;background:url(http://api.map.baidu.com/images/mapctrls2d0.png) no-repeat -33px bottom;}.BMap_ie6 .BMap_stdMpSliderBgTop,.BMap_ie6 .BMap_stdMpSliderBgBot{background:none;}.BMap_ie6 .BMap_stdMpSliderBgTop div{left:-23px;top:-226px;}.BMap_ie6 .BMap_stdMpSliderBgBot div{left:-33px;bottom:0;}.BMap_stdMpSliderMask{height:100%;width:24px;left:10px;cursor:pointer;}.BMap_stdMpSliderBar{height:11px;width:19px;left:13px;top:80px;overflow:hidden;background:url(http://api.map.baidu.com/images/mapctrls2d0.png) no-repeat 0 -309px;}.BMap_stdMpSliderBar.h{background:url(http://api.map.baidu.com/images/mapctrls2d0.png) no-repeat 0 -320px;}.BMap_ie6 .BMap_stdMpSliderBar,.BMap_ie6 .BMap_stdMpSliderBar.h{background:none;}.BMap_ie6 .BMap_stdMpSliderBar div{top:-309px;}.BMap_ie6 .BMap_stdMpSliderBar.h div{top:-320px;}.BMap_zlSt,.BMap_zlCity,.BMap_zlProv,.BMap_zlCountry{position:absolute;left:34px;height:21px;width:28px;background-image:url(http://api.map.baidu.com/images/mapctrls2d0.png);background-repeat:no-repeat;font-size:0;cursor:pointer;}.BMap_ie6 .BMap_zlSt,.BMap_ie6 .BMap_zlCity,.BMap_ie6 .BMap_zlProv,.BMap_ie6 .BMap_zlCountry{background:none;overflow:hidden;}.BMap_zlHolder{display:none;position:absolute;top:0;}.BMap_zlHolder.hvr{display:block;}.BMap_zlSt{background-position:0 -380px;top:21px;}.BMap_zlCity{background-position:0 -401px;top:57px;}.BMap_zlProv{background-position:0 -422px;top:81px;}.BMap_zlCountry{background-position:0 -443px;top:105px;}.BMap_ie6 .BMap_zlSt div{top:-380px;}.BMap_ie6 .BMap_zlCity div{top:-401px;}.BMap_ie6 .BMap_zlProv div{top:-422px;}.BMap_ie6 .BMap_zlCountry div{top:-443px;}.BMap_stdMpType1 .BMap_stdMpSlider,.BMap_stdMpType2 .BMap_stdMpSlider,.BMap_stdMpType3 .BMap_stdMpSlider,.BMap_stdMpType4 .BMap_stdMpSlider,.BMap_stdMpType2 .BMap_stdMpZoom,.BMap_stdMpType3 .BMap_stdMpPan,.BMap_stdMpType4 .BMap_stdMpPan{display:none;}.BMap_stdMpType3 .BMap_stdMpZoom{top:0;}.BMap_stdMpType4 .BMap_stdMpZoom{top:0;}.BMap_cpyCtrl a{font-size:11px;color:#7979CC;}.BMap_scaleCtrl{height:23px;overflow:hidden;}.BMap_scaleCtrl div.BMap_scaleTxt{font-size:11px;font-family:Arial,sans-serif;}.BMap_scaleCtrl div{position:absolute;overflow:hidden;}.BMap_scaleHBar img,.BMap_scaleLBar img,.BMap_scaleRBar img{position:absolute;width:37px;height:442px;left:0;}.BMap_scaleHBar{width:100%;height:5px;font-size:0;bottom:0;}.BMap_scaleHBar img{top:-437px;width:100%;}.BMap_scaleLBar,.BMap_scaleRBar{width:3px;height:9px;bottom:0;font-size:0;z-index:1;}.BMap_scaleLBar img{top:-427px;left:0;}.BMap_scaleRBar img{top:-427px;left:-5px;}.BMap_scaleLBar{left:0;}.BMap_scaleRBar{right:0;}.BMap_scaleTxt{text-align:center;width:100%;cursor:default;line-height:18px;}.BMap_omCtrl{background-color:#fff;overflow:hidden;}.BMap_omOutFrame{position:absolute;width:100%;height:100%;left:0;top:0;}.BMap_omInnFrame{position:absolute;border:1px solid #999;background-color:#ccc;overflow:hidden;}.BMap_omMapContainer{position:absolute;overflow:hidden;width:100%;height:100%;left:0;top:0;}.BMap_omViewMv{border-width:1px;border-style:solid;border-left-color:#84b0df;border-top-color:#adcff4;border-right-color:#274b8b;border-bottom-color:#274b8b;position:absolute;z-index:600;}.BMap_omViewInnFrame{border:1px solid #3e6bb8;}.BMap_omViewMask{width:1000px;height:1000px;position:absolute;left:0;top:0;background-color:#68c;opacity:.2;filter:progid:DXImageTransform.Microsoft.Alpha(opacity=20);}.BMap_omBtn{height:13px;width:13px;position:absolute;cursor:pointer;overflow:hidden;background:url(http://api.map.baidu.com/images/mapctrls1d3.gif) no-repeat;z-index:1210;}.anchorBR .BMap_omOutFrame{border-top:1px solid #999;border-left:1px solid #999;}.quad4 .BMap_omBtn{background-position:-26px -27px;}.quad4 .BMap_omBtn.hover{background-position:0 -27px;}.quad4 .BMap_omBtn.BMap_omBtnClosed{background-position:-39px -27px;}.quad4 .BMap_omBtn.BMap_omBtnClosed.hover{background-position:-13px -27px;}.anchorTR .BMap_omOutFrame{border-bottom:1px solid #999;border-left:1px solid #999;}.quad1 .BMap_omBtn{background-position:-39px -41px;}.quad1 .BMap_omBtn.hover{background-position:-13px -41px;}.quad1 .BMap_omBtn.BMap_omBtnClosed{background-position:-26px -41px;}.quad1 .BMap_omBtn.BMap_omBtnClosed.hover{background-position:0 -41px;}.anchorBL .BMap_omOutFrame{border-top:1px solid #999;border-right:1px solid #999;}.quad3 .BMap_omBtn{background-position:-27px -40px;}.quad3 .BMap_omBtn.hover{background-position:-1px -40px;}.quad3 .BMap_omBtn.BMap_omBtnClosed{background-position:-40px -40px;}.quad3 .BMap_omBtn.BMap_omBtnClosed.hover{background-position:-14px -40px;}.anchorTL .BMap_omOutFrame{border-bottom:1px solid #999;border-right:1px solid #999;}.quad2 .BMap_omBtn{background-position:-40px -28px;}.quad2 .BMap_omBtn.hover{background-position:-14px -28px;}.quad2 .BMap_omBtn.BMap_omBtnClosed{background-position:-27px -28px;}.quad2 .BMap_omBtn.BMap_omBtnClosed.hover{background-position:-1px -28px;}.anchorR .BMap_omOutFrame{border-bottom:1px solid #999;border-left:1px solid #999;border-top:1px solid #999;}.anchorL .BMap_omOutFrame{border-bottom:1px solid #999;border-right:1px solid #999;border-top:1px solid #999;}.anchorB .BMap_omOutFrame{border-top:1px solid #999;border-left:1px solid #999;border-right:1px solid #999;}.anchorT .BMap_omOutFrame{border-bottom:1px solid #999;border-right:1px solid #999;border-left:1px solid #999;}.anchorNon .BMap_omOutFrame,.withOffset .BMap_omOutFrame{border:1px solid #999;}.BMap_zoomMask0,.BMap_zoomMask1{position:absolute;left:0;top:0;width:100%;height:100%;background:transparent url(http://api.map.baidu.com/images/blank.gif);z-index:1000;}.BMap_contextMenu{position:absolute;border-top:1px solid #adbfe4;border-left:1px solid #adbfe4;border-right:1px solid #8ba4d8;border-bottom:1px solid #8ba4d8;padding:0;margin:0;width:auto;visibility:hidden;background:#fff;z-index:10000000;}.BMap_cmShadow{position:absolute;background:#000;opacity:.3;filter:alpha(opacity=30);visibility:hidden;z-index:9000000;}div.BMap_cmDivider{border-bottom:1px solid #adbfe4;font-size:0;padding:1px;margin:0 6px;}div.BMap_cmFstItem{margin-top:2px;}div.BMap_cmLstItem{margin-bottom:2px;}.BMap_shadow img{border:0 none;margin:0;padding:0;position:absolute;height:370px;width:1144px;}.BMap_pop .BMap_top{border-top:1px solid #ababab;background-color:#fff;}.BMap_pop .BMap_center{border-left:1px solid #ababab;border-right:1px solid #ababab;background-color:#fff;}.BMap_pop .BMap_bottom{border-bottom:1px solid #ababab;background-color:#fff;}.BMap_shadow,.BMap_shadow img,.BMap_shadow div{-moz-user-select:none;-webkit-user-select:none;}.BMap_checkbox{background:url(http://api.map.baidu.com/images/mapctrls1d3.gif);vertical-align:middle;display:inline-block;width:11px;height:11px;margin-right:4px;background-position:-14px 90px;}.BMap_checkbox.checked{background-position:-2px 90px;}.BMap_pop .BMap_top img,.BMap_pop .BMap_center img,.BMap_pop .BMap_bottom img{display:none;}@media print{.BMap_noprint{display:none;}.BMap_noscreen{display:block;}.BMap_mask{background:none;}.BMap_pop .BMap_top img,.BMap_pop .BMap_center img,.BMap_pop .BMap_bottom img{display:block;}}.BMap_vectex{cursor:pointer;width:11px;height:11px;position:absolute;background-repeat:no-repeat;background-position:0 0;}.BMap_vectex_nodeT{background-image:url(http://api.map.baidu.com/images/nodeT.gif);}.BMap_vectex_node{background-image:url(http://api.map.baidu.com/images/node.gif);}"; addCssByStyle(cssString); ');
_jsload&&_jsload('scommon', 'var CITY_TYPE_PROV=1,CITY_TYPE_CITY=2,CITY_TYPE_DIST=3,RED_ICON_SIZE=new Size(23,25),RED_ICON_OFFSET=new Size(9,25),RED_ICON_INFOWND_OFFSET=new Size(9,0); APIPack.addSearchPoi=function(map,point,index,title){var pt=getPoiPoint(point);if(!pt)return;if(index<0||index>9)return;var icoDefault=null;var mkr=new Marker(pt);if(isMobile()){function createIcon(){return new Icon(MapConfig.imgPath+"markers_hd.png",new Size(22,31),{"anchor":new Size(11,31),"imageOffset":new Size(0,-32*index),"imageSize":new Size(85,477),"infoWindowAnchor":new Size(11,0)})}icoDefault=createIcon();var icoActive=createIcon();icoActive.setImageOffset(new Size(-28,-32*index));mkr.icoDefault= icoDefault;mkr.icoActive=icoActive}else icoDefault=new Icon(MapConfig.imgPath+"markers.png",RED_ICON_SIZE,{"anchor":RED_ICON_OFFSET,"imageOffset":new Size(0,-25*index),"infoWindowAnchor":RED_ICON_INFOWND_OFFSET});mkr.setIcon(icoDefault);map.addOverlay(mkr);if(title)mkr.setTitle(title);return mkr}; APIPack.addCenterPoi=function(map,point,title){var pt=getPoiPoint(point);if(!pt)return;var mkr=new Marker(pt);var icoDefault=null;if(isMobile()){function createIcon(){return new Icon(MapConfig.imgPath+"markers_hd.png",new Size(21,31),{"anchor":RED_ICON_OFFSET,"imageOffset":new Size(-29,-320),"imageSize":new Size(85,477),"infoWindowAnchor":RED_ICON_INFOWND_OFFSET})}icoDefault=createIcon();mkr.icoDefault=icoDefault}else icoDefault=new Icon(MapConfig.imgPath+"markers.png",RED_ICON_SIZE,{"anchor":RED_ICON_OFFSET, "imageOffset":new Size(0,-250),"infoWindowAnchor":RED_ICON_INFOWND_OFFSET});mkr.setIcon(icoDefault);map.addOverlay(mkr);if(title)mkr.setTitle(title);return mkr}; APIPack.addSearchInBoundsPoi=function(map,point,title){var pt=getPoiPoint(point);if(!pt)return;var mkr=new Marker(pt);var icoDefault=null;if(isMobile()){function createIcon(){return new Icon(MapConfig.imgPath+"markers_hd.png",new Size(21,31),{"anchor":RED_ICON_OFFSET,"imageOffset":new Size(0,-383),"imageSize":new Size(85,477),"infoWindowAnchor":RED_ICON_INFOWND_OFFSET})}icoDefault=createIcon();var icoActive=createIcon();icoActive.setImageOffset(new Size(-29,-352));mkr.icoDefault=icoDefault;mkr.icoActive= icoActive}else var icoDefault=new Icon(MapConfig.imgPath+"markers.png",RED_ICON_SIZE,{"anchor":RED_ICON_OFFSET,"imageOffset":new Size(0,-300),"infoWindowAnchor":RED_ICON_INFOWND_OFFSET});mkr.setIcon(icoDefault);map.addOverlay(mkr);if(title)mkr.setTitle(title);return mkr}; function getPoiPoint(point){var pts=[];var pt=null;if(point instanceof Point)pt=point;else{if(typeof point=="string"){pts=baidu.trim(point).split(",");if(pts[Tlength]<2)return;pts[0]=TparseFloat(baidu.trim(pts[0]));pts[1]=TparseFloat(baidu.trim(pts[1]))}else{pts=point.slice(0);if(pts[Tlength]<2)return}pt=new Point(pts[0],pts[1])}return pt} APIPack.createSearchInfoWnd=function(contents,opts){var title=contents.title;var addr=contents.addr;var tel=contents.tel;var uid=contents.uid||"";var url=contents.url;var poiType=contents.poiType||BMAP_POI_TYPE_NORMAL;opts=opts||{};if(!title)return null;var ntitle=title;if(poiType==BMAP_POI_TYPE_BUSSTOP)ntitle=ntitle+"-\\u516c\\u4ea4\\u8f66\\u7ad9";else if(poiType==BMAP_POI_TYPE_SUBSTOP)ntitle=ntitle+"-\\u5730\\u94c1\\u7ad9";if(ntitle.replace(/[\\u0100-\\uffff]/g,"##")[Tlength]>27)ntitle=ntitle.substring(0, 13)+"&#8230";var thtml="<p style=\'width:210px;font:bold 14px/16px "+MapConfig.fontFamily+";margin:0;color:#cc5522;white-space:nowrap;overflow:hidden\' title=\'"+title+"\'>"+ntitle+"</p>";var htmls=[];htmls.push("<div style=\'font:12px "+MapConfig.fontFamily+";margin-top:10px\'>");if(addr){var addrTitle="\\u5730\\u5740\\uff1a";if(poiType==BMAP_POI_TYPE_BUSSTOP||poiType==BMAP_POI_TYPE_SUBSTOP)addrTitle="\\u8f66\\u6b21\\uff1a";htmls.push(\'<table cellspacing="0" style="overflow:hidden;table-layout:fixed;width:100%;font:12px \'+ MapConfig.fontFamily+\'" >\');htmls.push(\'<tr><td style="vertical-align:top;width:38px;white-space:nowrap;word-break:keep-all">\'+addrTitle+\'&nbsp;</td><td style="line-height:16px">\');htmls.push(addr+"&nbsp;</td></tr>");if(tel)htmls.push(\'<tr><td style="vertical-align:top;">\\u7535\\u8bdd\\uff1a</td><td>\'+tel+"</td></tr>");htmls.push("</table>")}else if(tel){htmls.push(\'<table cellspacing="0" style="table-layout:fixed;width:100%;font:12px \'+MapConfig.fontFamily+\'">\');htmls.push(\'<tr><td style="vertical-align:top;width:36px;white-space:nowrap;word-break:keep-all">\\u7535\\u8bdd\\uff1a</td><td>\'+ tel+"</td></tr></table>")}htmls.push("</div>");var iw=new InfoWindow(htmls.join(""),{title:thtml,height:0,width:230,margin:[10,10,20,10]});return iw}; APIPack.addDestPoi=function(map,point,title,type){var pt=getPoiPoint(point);if(!pt)return;if(isMobile())var ico=new Icon(MapConfig.imgPath+"dest_mkr.png",new Size(29,34),{"anchor":new Size(14,32),"imageSize":new Size(94,41),"imageOffset":new Size(-29*type,0),"infoWindowAnchor":new Size(14,0)});else var ico=new Icon(MapConfig.imgPath+"dest_markers.png",new Size(42,34),{"anchor":new Size(14,32),"imageOffset":new Size(0,-34*type),"infoWindowAnchor":new Size(14,0)});var mkr=new Marker(pt,{"icon":ico, "baseZIndex":35E5,"draggingCursor":"pointer"});map.addOverlay(mkr);if(title)mkr.setTitle(title);return mkr};APIPack.addLine=function(map,points){return APIPack.addRoute(map,points,ROUTE_TYPE_TRANSIT)}; APIPack.ROUTE_STYLE_CONFIG=[{stroke:6,color:"#0030ff",opacity:0.45,style:"solid"},{stroke:6,color:"#0030ff",opacity:0.45,style:"solid"},{stroke:4,color:"#30a208",opacity:0.55,style:"dashed"},{stroke:5,color:"#0030ff",opacity:0.45,style:"solid"},{stroke:4,color:"#ff0103",opacity:0.65,style:"dashed"},{stroke:5,color:"#ff0103",opacity:0.65,style:"solid"}]; APIPack.addRoute=function(map,points,type){var config=APIPack.ROUTE_STYLE_CONFIG;if(typeof type=="undefined")type=0;if(!config[type])return;var realPoints=points;var conf=config[type];var p=new Polyline(realPoints,{"strokeWeight":conf.stroke,"strokeColor":conf.color,"strokeOpacity":conf.opacity,"strokeStyle":conf.style,"clickable":false});map.addOverlay(p);p._routeType=type;if(type==ROUTE_TYPE_TRANSIT){var p2=new Polyline(realPoints,{"strokeWeight":conf.stroke-2,"strokeColor":"#fff","strokeOpacity":0.3, "clickable":false});p._p=p2;map.addOverlay(p2)}return p}; APIPack.createTransInfoWnd=function(contents){var content=contents.content;var curIndex=contents.curIndex;var total=contents.total;var nextTransCbk=contents.nextTransCbk;var obj=contents.obj;var hideStep=contents.hideStep;var htmls=["<div style=\'font:12px "+MapConfig.fontFamily+"\'>"];if(content)htmls.push("<div style=\'margin:0 1em 24px 0\'>"+content+"</div>");if(!hideStep)htmls.push(APIPack.genStepNavHtml(total,curIndex));htmls.push("</div>");var iw=new InfoWindow(htmls.join(""),{title:"",height:0, width:220,margin:[10,10,20,10]});if(hideStep)return iw;iw[TaddEventListener]("open",function(){var eventType=isMobile()?"touchend":"click";if(baidu.G("trans_prev"))baidu.on(baidu.G("trans_prev"),eventType,function(){if(nextTransCbk&&typeof nextTransCbk=="function")nextTransCbk(curIndex-1,obj)});if(baidu.G("trans_next"))baidu.on(baidu.G("trans_next"),eventType,function(){if(nextTransCbk&&typeof nextTransCbk=="function")nextTransCbk(curIndex+1,obj)})});return iw}; APIPack.genStepNavHtml=function(total,curIndex){var htmls=[];htmls.push(\'<table width="99%" cols="2" style="background:#eaf2ff;font:12px \'+MapConfig.fontFamily+\'"><tbody><tr>\');htmls.push(\'<td nowrap="nowrap" width="50%" align="left">\');if(curIndex==0)htmls.push(\'<span unselectable="on" style="color:#9c9d99;-moz-user-select:none" >\\u4e0a\\u4e00\\u6b65</span>\');else htmls.push(\'<a id="trans_prev" style="color:#7777cc;-moz-user-select:none" href="javascript:void(0)">\\u4e0a\\u4e00\\u6b65</a>\');htmls.push("</td>"); htmls.push(\'<td nowrap="nowrap" width="50%" align="right">\');if(curIndex==total+1)htmls.push(\'<span unselectable="on" style="color:#9c9d99;-moz-user-select:none" >\\u4e0b\\u4e00\\u6b65</span>\');else htmls.push(\'<a style="color:#7777cc" id="trans_next" href="javascript:void(0)">\\u4e0b\\u4e00\\u6b65</a>\');htmls.push("</td></tr></tbody></table>");return htmls.join("")}; APIPack.addTransPoi=function(map,point,type,title){var pt=getPoiPoint(point);if(!pt)return;type=type||BMAP_LINE_TYPE_BUS;if(isMobile())var ico=new Icon(MapConfig.imgPath+"dest_mkr.png",new Size(20,20),{"imageSize":new Size(94,41),"imageOffset":new Size(-59,-21*type),"infoWindowAnchor":new Size(10,0)});else{var offsetY=-55;if(type==BMAP_LINE_TYPE_SUBWAY)offsetY=-76;var ico=new Icon(MapConfig.imgPath+"trans_icons.png",new Size(21,21),{"imageOffset":new Size(0,offsetY),"infoWindowAnchor":new Size(10, 0)})}var mkr=new Marker(pt,{"icon":ico});map.addOverlay(mkr);if(title)mkr.setTitle(title);return mkr};APIPack.getInfoWindowDom=function(map){if(map&&map.infoWindowDoms&&map.infoWindowDoms.contentDiv)return map.infoWindowDoms.contentDiv.childNodes[0];return null};APIPack.addStationPoi=function(map,point,title){var mkr=new Marker(point,{"icon":new Icon(BusLineSearch._stopUrl,new Size(11,11))});if(title)mkr.setTitle(title);map.addOverlay(mkr);return mkr}; APIPack.addDragMkr=function(map,point){var mkr=new Marker(point,{"icon":new Icon(MapConfig.imgPath+"drag.png",new Size(11,11)),"draggingCursor":"pointer"});map.addOverlay(mkr);mkr.setZIndex(10);return mkr};APIPack.createTipLbl=function(tip){var lbl=new Label(tip,{"offset":new Size(30,-10)});lbl.setStyle({border:"solid 1px gray",padding:"2px",whiteSpace:"nowrap",background:"#fff"});return lbl}; APIPack.getDistanceByPixel=function(px1,px2){if(!px1||!px2)return;return TMath.round(TMath.sqrt(TMath.pow(px1.x-px2.x,2)+TMath.pow(px1.y-px2.y,2)))};BaseSearch.CBK_SEARCH_COMPLETE=1;BaseSearch.CBK_MARKERS_SET=2;BaseSearch.CBK_INFO_HTML_SET=3;BaseSearch.CBK_POLYLINES_SET=4;BaseSearch.CBK_RESULTS_HTML_SET=5;BaseSearch.CBK_BUSLIST_COMPLETE=6;BaseSearch.CBK_BUSLINE_COMPLETE=7;BaseSearch.CBK_BUSLISTHTML_SET=8;BaseSearch.CBK_BUSLINEHTML_SET=9;BaseSearch._getPoiUrl=function(uid,ccode){if(uid)return MAP_URL+"?s="+encodeURIComponent("inf&uid="+uid+"&c="+ccode)+"&i=0&sr=1";return""}; BaseSearch._getLocType=function(loc){if(!loc)return LOC_TYPE_UNKNOWN;if(typeof loc=="string")return LOC_TYPE_STRING;if(loc instanceof Point)return LOC_TYPE_POINT;if(loc instanceof Map)return LOC_TYPE_MAP;if(typeof loc=="number")return LOC_TYPE_NUMBER;return LOC_TYPE_UNKNOWN}; baidu[Textend](BaseSearch[Tprototype],{_getIdByLoc:function(loc,cbk){var locType=BaseSearch._getLocType(loc.src);if(locType==LOC_TYPE_UNKNOWN)return;var me=this;if(locType==LOC_TYPE_NUMBER){cbk&&cbk(loc.src);return}if(locType==LOC_TYPE_STRING){if(loc.curLocType==locType&&loc.curSrc==loc.src&&loc.curId){cbk&&cbk(loc.curId);return}loc.curLocType=locType;loc.curSrc=loc.src;SearchRequestMgr.request(function(json){if(json&&json["result"]&&json["result"]["type"]==RETURN_TYPE_CURRENT_CITY){me._loc.curId= json["content"]["code"];cbk&&cbk(me._loc.curId)}},{"qt":QUERY_TYPE_CURRENT_CITY,"wd":loc.src})}else{var pt;var level=18;if(locType==LOC_TYPE_MAP){pt=loc.src.getCenter();level=loc.src.getZoom()}else pt=loc.src;if(locType==loc.curLocType&&loc.curSrc.equals(pt)&&loc.curId){cbk&&cbk(loc.curId);return}if(locType==LOC_TYPE_MAP)pt=MercatorProjection.convertLL2MC(pt);if(locType==LOC_TYPE_POINT)pt=MercatorProjection.convertLL2MC(pt);loc.curLocType=locType;loc.curSrc=new Point(pt["lng"],pt["lat"]);SearchRequestMgr.request(function(json){if(json&& json["result"]&&json["result"]["type"]==RETURN_TYPE_CENTER){me._loc.curId=json["content"]?json["content"]["uid"]:1;cbk&&cbk(me._loc.curId)}},{"qt":QUERY_TYPE_CENTER,"b":pt["lng"]+","+pt["lat"]+";"+pt["lng"]+","+pt["lat"],"l":level})}},_setStatus:function(code){if(typeof code=="number")this._status=code;else delete this._status},_triggerCbk:function(cbkCode,d0,d1){var cbk;switch(cbkCode){case BaseSearch.CBK_SEARCH_COMPLETE:cbk=this._opts.onSearchComplete;break;case BaseSearch.CBK_MARKERS_SET:cbk=this._opts.onMarkersSet; break;case BaseSearch.CBK_POLYLINES_SET:cbk=this._opts.onPolylinesSet;break;case BaseSearch.CBK_INFO_HTML_SET:cbk=this._opts.onInfoHtmlSet;break;case BaseSearch.CBK_RESULTS_HTML_SET:cbk=this._opts.onResultsHtmlSet;break;case BaseSearch.CBK_BUSLIST_COMPLETE:cbk=this._opts.onGetBusListComplete;break;case BaseSearch.CBK_BUSLINE_COMPLETE:cbk=this._opts.onGetBusLineComplete;break;case BaseSearch.CBK_BUSLISTHTML_SET:cbk=this._opts.onBusListHtmlSet;break;case BaseSearch.CBK_BUSLINEHTML_SET:cbk=this._opts.onBusLineHtmlSet; break;default:break}cbk&&cbk(d0,d1)}});var GEO_TYPE_AREA=0;var GEO_TYPE_LINE=1;var GEO_TYPE_POINT=2;SUtil.unique=function(a){var found=false;var r=[],o={};for(var i=0,l=a[Tlength];i<l;i++)if(!o[a[i]]){o[a[i]]=true;r.push(a[i])}return r};SUtil.getBestLevel=function(level,map){if(map){var ratio=TMath.min(map[Twidth]/1100,map[Theight]/660);level=TMath.round(level+TMath.log(ratio)/TMath.log(2))}if(level<1)level=1;if(level>18)level=18;return level}; SUtil.parseGeo=function(geo,usePoint){if(typeof geo!="string"||!geo)return;var temp=geo.split("|");var r;var bdpt0;var bdpt1;if(temp[Tlength]==1)r=decode_geo_diff(geo);else{r=decode_geo_diff(temp[2]);bdpt0=decode_geo_diff(temp[0]);bdpt1=decode_geo_diff(temp[1]);if(!usePoint)return r}var ret={type:r.geoType};if(usePoint)switch(ret.type){case GEO_TYPE_POINT:var tempPt=new Point(r.geo[0][0],r.geo[0][1]);var npt=MercatorProjection.convertMC2LL(tempPt);ret.point=npt;ret.points=[npt];break;case GEO_TYPE_LINE:ret.points= [];var curGeo=r.geo[0];for(var i=0,l=curGeo[Tlength]-1;i<l;i+=2){var pt=new Point(curGeo[i],curGeo[i+1]);pt=MercatorProjection.convertMC2LL(pt);ret.points.push(pt)}bdpt0=new Point(bdpt0.geo[0][0],bdpt0.geo[0][1]);bdpt1=new Point(bdpt1.geo[0][0],bdpt1.geo[0][1]);bdpt0=MercatorProjection.convertMC2LL(bdpt0);bdpt1=MercatorProjection.convertMC2LL(bdpt1);ret.bounds=new Bounds(bdpt0,bdpt1);break;default:break}return ret}; SUtil.parseGeoExt=function(geo,factor){if(!factor)factor=0;else if(factor<0.25)factor=0;else if(factor>0.25&&factor<1)factor=1;else if(factor>32)factor=32;var _arrG=geo.split("|");if(_arrG[Tlength]==1){var _g=decode_geo_diff(_arrG[0]);return{type:_g.type,bound:"",points:_g.geo.join(",")}}else if(_arrG[Tlength]>1){var _lines=geo.split(";.=");var _bs=[];var _ps=[];var _tp=0;var _len=_lines[Tlength];for(var i=0;i<_len;i++){var _ln=_lines[i];if(_len>1){if(i==0)_ln=_ln+";";if(i>0&&i<_len-1)_ln=".="+_ln+ ";";if(i==_len-1)_ln=".="+_ln}var _arrL=_ln.split("|");var _b0=decode_geo_diff(_arrL[0]);var _b1=decode_geo_diff(_arrL[1]);_bs.push(_b0.geo.join(","));_bs.push(_b1.geo.join(","));var _g=decode_geo_diff(_arrL[2]);_tp=_g.type;var _p=_g.geo.join(",");_p=SUtil.parseGeoExtReg1(_p);if(factor>0)_p=SUtil.parseGeoExtReg2(_p,factor);_ps.push(_p)}if(_len<=1)_ps=_ps.join(";");if(_len==2){var xyStr=_ps[0]+";"+_ps[1];var xyArr=xyStr.split(";");var llPts=[];for(var i=0;i<xyArr[Tlength];i++){var x=xyArr[i].split(",")[0]; var y=xyArr[i].split(",")[1];var prjPt=new Point(x,y);var llPt=MercatorProjection.convertMC2LL(prjPt);llPts.push(llPt)}_ps=llPts}return{type:_tp,bound:_bs.join(";"),points:_ps}}};SUtil.parseGeoStr=function(str){var pts=str.split(",");var pt=new Point(pts[0],pts[1]);return MercatorProjection.convertMC2LL(pt)};var _EXT_CHARS_=["=",".","-","*"];var _MAX_DELTA_=1<<23; function decode_geo_diff(coded){var geo_type=_decode_type(coded.charAt(0));var code=coded.substr(1);var pos=0;var code_len=code[Tlength];var part_vec=[];var geo_vec=[];var ret=[];while(pos<code_len)if(code.charAt(pos)==_EXT_CHARS_[0]){if(code_len-pos<13)return 0;ret=_decode_6byte_(code.substr(pos,13),part_vec);if(ret<0)return 0;pos+=13}else if(code.charAt(pos)==";"){geo_vec.push(part_vec.slice(0));part_vec[Tlength]=0;++pos}else{if(code_len-pos<8)return 0;ret=_decode_4byte_(code.substr(pos,8),part_vec); if(ret<0)return 0;pos+=8}for(var i=0,l=geo_vec[Tlength];i<l;i++)for(var j=0,ll=geo_vec[i][Tlength];j<ll;j++)geo_vec[i][j]/=100;return{geoType:geo_type,geo:geo_vec}}function _decode_type(c){var r=-1;if(c==_EXT_CHARS_[1])r=GEO_TYPE_POINT;else if(c==_EXT_CHARS_[2])r=GEO_TYPE_LINE;else if(c==_EXT_CHARS_[3])r=GEO_TYPE_AREA;return r} function _decode_6byte_(code,ret){var x=0;var y=0;var buff=0;for(var i=0;i<6;i++){buff=_char2num_(code.substr(1+i,1));if(buff<0)return-1-i;x+=buff<<6*i;buff=_char2num_(code.substr(7+i,1));if(buff<0)return-7-i;y+=buff<<6*i}ret.push(x);ret.push(y);return 0} function _decode_4byte_(code,ret){var l=ret[Tlength];if(l<2)return-1;var x=0;var y=0;var buff=0;for(var i=0;i<4;i++){buff=_char2num_(code.substr(i,1));if(buff<0)return-1-i;x+=buff<<6*i;buff=_char2num_(code.substr(4+i,1));if(buff<0)return-5-i;y+=buff<<6*i}if(x>_MAX_DELTA_)x=_MAX_DELTA_-x;if(y>_MAX_DELTA_)y=_MAX_DELTA_-y;ret.push(ret[l-2]+x);ret.push(ret[l-1]+y);return 0} function _char2num_(c){var n=c.charCodeAt(0);if(c>="A"&&c<="Z")return n-"A".charCodeAt(0);else if(c>="a"&&c<="z")return 26+n-"a".charCodeAt(0);else if(c>="0"&&c<="9")return 52+n-"0".charCodeAt(0);else if(c=="+")return 62;else if(c=="/")return 63;return-1}; ');
_jsload&&_jsload('mapclick', 'var POI_TYPE_NORMAL=0,POI_TYPE_BUSSTOP=1,POI_TYPE_BUSLINE=2,POI_TYPE_SUBSTOP=3,POI_TYPE_SUBLINE=4;var GEO_TYPE_AREA=0;var GEO_TYPE_LINE=1;var GEO_TYPE_POINT=2;var Share={};var o=null; MapPoiClick=function(map){this.map=map;this.citySpotId=null;this.poiSpotId=null;this.cacheData={};this.maxCache=8;this.cacheIds=[];this.squareSide=4;this.spotOnId="";this.mkr1=this.mkr2=null;this.label1=this.label2=null;this.spotOnUid=null;this.icType="";this.icType1="";this.tMkr=null;this.isOverSpot=0;this.isMoving=false;this.overSpotPoint=null;this.fetchId="";this.curTileId="";this.ic=new Icon(MapConfig.imgPath+"spotmkrs.png",new Size(18,18),{"anchor":new Size(9,9),"imageOffset":new Size(0,0),"infoWindowOffset":new Size(10, 0)});this.init()};o=MapPoiClick[Tprototype];o.init=function(){var me=this;me.addShadowLabel();me.bind();me.isOpen=true;setTimeout(function(){if(!me.urlParse())me._bindMapRequest()},1E3);setInterval(function(){me.isMoving=false},300)};o.urlParse=function(){return false;var param=getParam(location.href);if(param&&param.msi){var pars=param.msi.split("|");this.icType=!!pars[1]?pars[1]:"qita";this.sendUidRequest(pars[0],{isSendStatPars:true});return true}else return false}; o.bind=function(){this.bindMapRequest();this.bindMouseMove();this.bindSpotEvent()}; o.mouseMoveEvent=function(e){var me=this;var map=this.map;if(!me.isOpen)return;if(map.getZoom()<10)me.clearPoiCache();else{me.clearCityCache();if(!e||!e.point)return;if(!!me.isOverSpot)me.overSpotPoint=e.point;me.isMoving=true;if(me.isOverSpot!=1){me.label1&&me.label1.hide();me.label2&&me.label2.hide();me.sdLab&&me.sdLab.hide()}var tPOI=map.getTileId(e.point,map.getZoom());if(!tPOI.row||!tPOI.column||!tPOI.level)return;me.curTileId=tPOI.level+"_"+tPOI.row+"_"+tPOI.column;var tPoiId=tPOI.level+"_"+ me.m1(tPOI.row)+"_"+me.m1(tPOI.column);if(!!me.cacheData[tPoiId]){if(me.spotOnId!=me.curTileId)me._addSpot(me.curTileId)}else me.sendRequest({l:tPOI.level,x:me.m1(tPOI.row),y:me.m1(tPOI.column)})}}; o._addSpot=function(pId){var me=this;var map=this.map;if(map.getMapType()!=BMAP_NORMAL_MAP&&map.getMapType()!=BMAP_HYBRID_MAP){me.clearPoiCache();me.hideOverlays();return}var ids=pId.split("_");var nId=ids[0]+"_"+me.m1(ids[1])+"_"+me.m1(ids[2]);if(!me.cacheData[nId])return;me.clearPoiCache();var js=!!me.cacheData[nId][pId]?me.cacheData[nId][pId]:[];me.poiSpotId=me.addSpots(js,"MAP_CLICK_POI");me.spotOnId=pId;var idIndex=-1;for(var i=0,n=me.cacheIds[Tlength];i<n;i++)if(nId==me.cacheIds[i]){idIndex= i;break}if(idIndex>=0){me.cacheIds.splice(idIndex,1);me.cacheIds.push(nId)}};o.addSpots=function(spots,tag){for(var i=0;i<spots[Tlength];i++){var spot=spots[i],pt=spot.pt,bd=spot.bd;var hotSpot=new Hotspot(pt,{"offsets":[bd[3],bd[2],bd[3],bd[2]]});hotSpot.bd=bd;hotSpot.pt=pt;hotSpot.n=spot.n;hotSpot.userdata=spot.userdata;this.map.addHotspot(hotSpot,tag)}return true};o.bindMouseMove=function(){var me=this;this.map[TaddEventListener]("mousemove",function(e){me.mouseMoveEvent(e)})}; o.clickSpot=function(e){if(this.map.getZoom()<10)for(var i=0,l=e["spots"][Tlength];i<l;i++){if(e["spots"][i].n){this.map.centerAndZoom(e["spots"][i].n);break}}else if(this.tMkr)this.clickMkr(this.tMkr,e)};o.clickMkr=function(o1,e){var map=this.map;if(map.getZoom()<10||!o1)return;var me=this;me.isOverSpot=0;if(!me.spotOnUid)return;map.temp.infoWin&&map.temp.infoWin.close();me.onMarker=o1;me.sendUidRequest(me.spotOnUid)}; o.sendUidRequest=function(uid,opt){if(!uid)return;var me=this;var map=this.map;var params={"qt":"inf","uid":uid,"operate":"mapclick"};SearchRequestMgr.request(function(json){me._getInfBack(uid,json)},params)}; o._getInfBack=function(uid,js){var me=this;var map=this.map;if(!js||!js["content"])return;var c=js["content"];var pt=SUtil.parseGeo(c["geo"],true).point;if(!opts)var opts={};opts.isFromMPC=true;var addr=c["addr"];if(c["poiType"]==POI_TYPE_BUSSTOP||c["poiType"]==POI_TYPE_SUBSTOP)addr=SUtil.unique(addr.split(";")).join("; ");var tel=c["tel"];if(tel)tel=tel.replace(/,/g,", ");var origin_id={};if(c["ext"]&&c["ext"]["detail_info"]&&c["ext"]["detail_info"]["origin_id"])origin_id=c["ext"]["detail_info"]["origin_id"]; var cate=me._getCateInfo(c["cla"]);var content=create("div",{"style":"font-size:12px;padding:5px 0;overflow:hidden;*zoom:1;"});var ext=c["ext"];var pStyle="padding:0;margin:0;line-height:18px;font-size:12px;color:#4d4d4d;";if(addr){var addrDom=create("p",{"style":pStyle});addrDom.innerHTML="\\u5730\\u5740\\uff1a"+addr;content[TappendChild](addrDom)}if(tel){var telDom=create("p",{"style":pStyle});telDom.innerHTML="\\u7535\\u8bdd\\uff1a"+tel;content[TappendChild](telDom)}if(c["tag"]){var tagDom=create("p", {"style":pStyle+"color:#7f7f7f;"});tagDom.innerHTML="\\u6807\\u7b7e\\uff1a"+c["tag"];content[TappendChild](tagDom)}var detailUri="http://api.map.baidu.com/place/detail?uid="+uid+"&output=html&source=jsapi&operate=mapclick";var titleHtml="<div style=\'height:26px;\'><a href=\'"+detailUri+"\' target=\'_blank\' style=\'font-size:14px;color:#4d4d4d;font-weight:bold;text-decoration:none;\' onmouseover=\'this.style.textDecoration=\\"underline\\";this.style.color=\\"#3d6dcc\\"\' onmouseout =\'this.style.textDecoration=\\"none\\";this.style.color=\\"#4d4d4d\\"\'>"+ c["name"]+"</a>";titleHtml+="<a href=\'"+detailUri+"\' target=\'_blank\' style=\'font-size:12px;color:#3d6dcc;margin-left:5px;text-decoration:none;\' onmouseover=\'this.style.textDecoration=\\"underline\\"\' onmouseout =\'this.style.textDecoration=\\"none\\"\'>\\u8be6\\u60c5&raquo;</a>";titleHtml+="</div>";var infowindow=new InfoWindow(content,{"width":300,"enableSearchTool":true,"title":titleHtml});infowindow[TaddEventListener]("close",function(){me.label1&&me.label1.hide();me.label2&&me.label2.hide();me.sdLab&& me.sdLab.hide();if(map.temp.infoWin.overlay)map.temp.infoWin.overlay.hide();me.onMarker=null;Share.mapSpotInf=null;infowindow[TremoveEventListener]("close",arguments.callee)});if(me.onMarker){me.onMarker.openInfoWindow(infowindow);if(!Share.mapSpotInf)Share.mapSpotInf=me.spotOnUid+"|"+(!!me.icType?me.icType:me.icType1)}else if(!me.mkr1){var point=SUtil.parseGeo(c["geo"],true).point;if(!!me.icType){var tpOffset=MPC_ICON_IMGOFFSET[me.icType];me.ic.setImageOffset(new Size(tpOffset.x,tpOffset.y));var tSize= MPC_ICON_SIZE[tpOffset.s];me.ic.setSize(new Size(tSize.w,tSize.h));me.ic.setAnchor(new Size(tSize.w/2,tSize.h/2))}me.mkr1=new Marker(point,{"icon":me.ic,"zIndexFixed":true});map.addOverlay(me.mkr1);me.mkr1[TaddEventListener]("click",function(){Share.mapSpotInf=me.spotOnUid+"|"+(!!me.icType?me.icType:me.icType1);me.clickMkr(me.mkr1)});me.mkr1[TaddEventListener]("mouseout",function(){me.moveOutMkr(me.mkr1)});me.mkr1.openInfoWindow(infowindow)}me.label1&&me.label1.hide();me.label2&&me.label2.hide(); me.sdLab&&me.sdLab.hide()}; o.moveOverSpot=function(e){var map=this.map;if(map.getZoom()<10)return;var spotArr=e["spots"];if(!spotArr||spotArr[Tlength]<1||spotArr[0]["tag"]!="MAP_CLICK_POI")return;var me=this;var tempMarker=null,tempLabel=null,mindex=0;if(me.onMarker&&me.onMarker===me.mkr1){tempMarker=me.mkr2;tempLabel=me.label2;mindex=2}else{tempMarker=me.mkr1;tempLabel=me.label1;mindex=1}if(map.temp.infoWin&&map.temp.infoWin.isOpen()==true&&!!Share.mapSpotInf&&spotArr[0].userdata.uid==Share.mapSpotInf.split("|")[0])return;if(!!spotArr[0].userdata.type&& MPC_ICON_IMGOFFSET[spotArr[0].userdata.type]){var tpOffset=MPC_ICON_IMGOFFSET[spotArr[0].userdata.type];me.icType1=spotArr[0].userdata.type}else{var tpOffset=MPC_ICON_IMGOFFSET["blank"];me.icType1="blank"}var tSize=MPC_ICON_SIZE[tpOffset.s];me.ic.setSize(new Size(tSize.w,tSize.h));me.ic.setAnchor(new Size(tSize.w/2,tSize.h/2));me.ic.setImageOffset(new Size(tpOffset.x,tpOffset.y));var tPnt=!!spotArr[0].userdata.iconpoint?spotArr[0].userdata.iconpoint:spotArr[0].pt;if(tempMarker&&tempMarker.map){tempMarker.hide(); tempMarker.setPosition(tPnt);tempMarker.setIcon(me.ic);tempMarker.show();me.spotOnUid=spotArr[0].userdata.uid}else{tempMarker=new Marker(tPnt,{"icon":me.ic,"zIndexFixed":true,"baseZIndex":3E6});me.spotOnUid=spotArr[0].userdata.uid;map.addOverlay(tempMarker);if(mindex==1)me.mkr1=tempMarker;else me.mkr2=tempMarker;tempMarker[TaddEventListener]("click",function(){me.icType=me.icType1;Share.mapSpotInf=me.spotOnUid+"|"+me.icType1;me.clickMkr(tempMarker)});tempMarker[TaddEventListener]("mouseout",function(){me.moveOutMkr(tempMarker)})}tempMarker.setTop(true); var labSty=[{"backgroundColor":"#FFFFE1","borderColor":"#8C8C8C","color":"#4D4D4D"},{"backgroundColor":"#F0F7FF","borderColor":"#7AA3CC","color":"#224B73"}];me.tMkr=tempMarker;if(tempLabel&&tempLabel.map){tempLabel.hide();if(!!spotArr[0].userdata.name){me.isOverSpot=1;tempLabel.setContent(spotArr[0].userdata.name);var tPnt1=me.getLabelPoint(tPnt,1,{x:TMath.abs(spotArr[0].bd[0])+6,y:-9});tempLabel.setPosition(tPnt1);tempLabel.setStyle(labSty[1]);tempLabel.show();me.getShadowLabel({point:tPnt1,name:spotArr[0].userdata.name})}else{me.isOverSpot= 2;tempLabel.setContent("\\u70b9\\u51fb\\u53ef\\u67e5\\u770b\\u8be6\\u60c5");tempLabel.setStyle(labSty[0]);me.timeMachine(tempLabel)}}else if(!!spotArr[0].userdata.name){me.isOverSpot=1;var tPnt1=me.getLabelPoint(tPnt,1,{x:TMath.abs(spotArr[0].bd[0])+6,y:-9});tempLabel=new Label(spotArr[0].userdata.name,{"position":tPnt1});map.addOverlay(tempLabel);if(mindex==1)me.label1=tempLabel;else me.label2=tempLabel;tempLabel.setStyle(labSty[1]);me.getShadowLabel({point:tPnt1,name:spotArr[0].userdata.name})}else{me.isOverSpot= 2;tempLabel=new Label("\\u70b9\\u51fb\\u53ef\\u67e5\\u770b\\u8be6\\u60c5",{"position":me.getLabelPoint(e.point,0)});map.addOverlay(tempLabel);tempLabel.hide();if(mindex==1)me.label1=tempLabel;else me.label2=tempLabel;tempLabel.setStyle(labSty[0]);me.timeMachine(tempLabel)}}; o.timeMachine=function(lab){var me=this;var lab0=lab;me.timer0=setInterval(function(){if(!me.isMoving)setTimeout(function(){if(me.isOverSpot!=2){clearInterval(me.timer0);return}var tPt=me.getLabelPoint(me.overSpotPoint,0);lab0.setPosition(tPt);lab0.show();me.getShadowLabel({point:tPt,name:"\\u70b9\\u51fb\\u53ef\\u67e5\\u770b\\u8be6\\u60c5"});clearInterval(me.timer0)},500)},200)}; o.getLabelPoint=function(pt,no,opts){var map=this.map;var px1=map.pointToPixel(pt);if(!!opts)var offst=opts;else if(no==0)var offst={x:-1,y:24};else if(no==1)var offst={x:12,y:-9};try{if(no==0)return map.pixelToPoint(new Pixel(px1.x+offst.x,px1.y+offst.y));else if(no==1)return map.pixelToPoint(new Pixel(px1.x+offst.x,px1.y+offst.y))}catch(e){}}; o.moveOutSpot=function(e){var map=this.map;if(map.getZoom()<10)return;var me=this;me.isOverSpot=0;me.label1&&me.label1.hide();me.label2&&me.label2.hide();me.sdLab&&me.sdLab.hide();me.timer0&&clearInterval(me.timer0);me.tMkr=null;var tempMarker=me.mkr2;if(tempMarker&&tempMarker.map)if(!map.temp.infoWin||map.temp.infoWin.isOpen()==false||map.temp.infoWin.overlay!==tempMarker)if(me.onMarker&&me.onMarker===tempMarker)return;else tempMarker.hide();tempMarker=me.mkr1;if(tempMarker&&tempMarker.map)if(!map.temp.infoWin|| map.temp.infoWin.isOpen()==false||map.temp.infoWin.overlay!==tempMarker)if(me.onMarker&&me.onMarker===tempMarker)return;else tempMarker.hide()};o.moveOutMkr=function(o1){var map=this.map;if(map.getZoom()<10||!o1)return;var me=this;me.label1&&me.label1.hide();me.label2&&me.label2.hide();me.sdLab&&me.sdLab.hide();if(me.onMarker===o1)return;if(map.temp.infoWin&&map.temp.infoWin.isOpen()==true)if(map.temp.infoWin.overlay===o1)return;else;else me.spotOnUid=""}; o.bindMapRequest=function(){var me=this;var map=this.map;map[TaddEventListener]("load",function(){me._bindMapRequest()});map[TaddEventListener]("moveend",function(){me._bindMapRequest()});map[TaddEventListener]("dragend",function(){me._bindMapRequest()});map[TaddEventListener]("zoomend",function(){me.clearCityCache();me.clearPoiCache();if(!map.temp.infoWin||map.temp.infoWin.isOpen()!=true){me.mkr1&&me.mkr1.hide();me.mkr2&&me.mkr2.hide();me.label1&&me.label1.hide();me.label2&&me.label2.hide();me.sdLab&& me.sdLab.hide();me.isOverSpot=0;me.timer0&&clearInterval(me.timer0)}me._bindMapRequest()});map[TaddEventListener]("resize",function(){me._bindMapRequest()})};o._bindMapRequest=function(){var me=this;var map=this.map;if(!me.isOpen)return;if(map.getZoom()<10){me.clearPoiCache();if(!me.citySpotId)me.citySpotId=me.addSpots(clickCityData,"MAP_CLICK_CITY")}}; o.sendRequest=function(pId){var me=this;var map=this.map;if(!!pId&&me.fetchId!=pId.l+"_"+pId.x+"_"+pId.y){me.fetchId=pId.l+"_"+pId.x+"_"+pId.y;var url=[];url.push("http://mapclick.map.baidu.com/data/");url.push(pId.x+"_"+pId.y+"_"+map.zoomLevel+"_");url.push("018.js");DataMgr.request(url.join(""))}}; o["getPoiData"]=function(json){var map=this.map;if(!json||json[Tlength]<1)return;var jj={},bol=false,me=this;for(var ii=0,nn=json[Tlength];ii<nn;ii++){var j=[];var js=json[ii];for(var i=0,n=js["uids"][Tlength];i<n;i++){var tjs=js["uids"][i];var cterX=(tjs["bound"]["xmax"]+tjs["bound"]["xmin"])/2;var cterY=(tjs["bound"]["ymax"]+tjs["bound"]["ymin"])/2;var px0=map.pointToPixel(MercatorProjection.convertMC2LL(new Point(tjs["bound"]["xmin"],tjs["bound"]["ymin"])));var px1=map.pointToPixel(MercatorProjection.convertMC2LL(new Point(tjs["bound"]["xmax"], tjs["bound"]["ymax"])));var poiBound=[(px0.x-px1.x)/2,(px1.y-px0.y)/2,(px1.x-px0.x)/2,(px0.y-px1.y)/2];j.push({pt:MercatorProjection.convertMC2LL(new Point(cterX,cterY)),bd:poiBound,userdata:{name:!!tjs["name"]?tjs["name"]:"",uid:tjs["uid"],type:tjs["type"],iconpoint:!!tjs["icon"]?MercatorProjection.convertMC2LL(new Point(tjs["icon"]["x"],tjs["icon"]["y"])):""},tag:"MAP_SPOT_INFO"})}if(!!me.curTileId&&me.curTileId==js["tileid"])bol=true;jj[js["tileid"]]=j}var ids=json[0]["tileid"].split("_");var nId= ids[0]+"_"+me.m1(ids[1])+"_"+me.m1(ids[2]);me.cacheData[nId]=jj;me.cacheIds.push(nId);if(me.cacheIds[Tlength]>me.maxCache){var delId=me.cacheIds.shift();delete me.cacheData[delId];delete delId}bol&&me._addSpot(me.curTileId)};o.clearPoiCache=function(){var me=this;var map=this.map;if(me.poiSpotId){map.clearHotspots("MAP_CLICK_POI");me.poiSpotId=null;me.spotOnId="";me.curTileId=""}}; o.clearCityCache=function(){var me=this;var map=this.map;if(me.citySpotId){map.clearHotspots("MAP_CLICK_CITY");me.citySpotId=null}};o.hideOverlays=function(){var me=this;me.mkr1&&me.mkr1.hide();me.mkr2&&me.mkr2.hide();me.label1&&me.label1.hide();me.label2&&me.label2.hide();me.sdLab&&me.sdLab.hide();me.timer0&&clearInterval(me.timer0)};o._getCateInfo=function(ar){var a=[];for(var i=0,l=ar[Tlength];i<l;i++){a.push(ar[i][1]);if(i<l-1)a.push(", ")}return a.join("")}; o.addShadowLabel=function(){var me=this;if(!me.sdLab){me.sdLab=new Label("shadow");this.map.addOverlay(me.sdLab);me.sdLab.setStyle({"backgroundColor":"#BEBEBE","borderColor":"#BEBEBE","color":"#BEBEBE","zIndex":-2E4})}me.sdLab.hide()}; o.getShadowLabel=function(opt){var me=this;var map=this.map;return;if(!opt||!opt.point||!opt.name){me.sdLab&&me.sdLab.hide();return}var px1=map.pointToPixel(opt.point);var pt=map.pixelToPoint(new Pixel(px1.x+1,px1.y+1));me.sdLab.setContent(opt.name);me.sdLab.setPoint(pt);me.sdLab.show()};o.m1=function(m){return TMath.floor(TparseInt(m,10)/this.squareSide)}; o.addSpotEvent=function(){var me=this,w=window;var map=this.map;if(!w._moveOverSpot)w._moveOverSpot=function(e){me.moveOverSpot(e)};if(!w._moveOutSpot)w._moveOutSpot=function(e){me.moveOutSpot(e)};if(!w._clickSpot)w._clickSpot=function(e){me.clickSpot(e)};map[TaddEventListener]("hotspotover",w._moveOverSpot);map[TaddEventListener]("hotspotout",w._moveOutSpot);map[TaddEventListener]("hotspotclick",w._clickSpot)}; o.removeSpotEvent=function(){var w=window;var map=this.map;map[TremoveEventListener]("hotspotover",w._moveOverSpot);map[TremoveEventListener]("hotspotout",w._moveOutSpot);map[TremoveEventListener]("hotspotclick",w._clickSpot)};o.bindSpotEvent=function(){var map=this.map;var me=this;me.addSpotEvent();map[TaddEventListener]("onmaptypechange",function(e){var type=e.mapType;if(type!=BMAP_NORMAL_MAP&&type!=BMAP_HYBRID_MAP){me.clearPoiCache();me.hideOverlays();me.removeSpotEvent()}else me.addSpotEvent()})}; o.open=function(){var me=this;if(me.isOpen==true)return;me.isOpen=true;me.addSpotEvent()};o.close=function(){var me=this;if(me.isOpen==false)return;me.isOpen=false;me.clearPoiCache();me.clearCityCache();me.hideOverlays();me.removeSpotEvent()}; var MPC_ICON_SIZE=[{w:18,h:18},{w:20,h:20},{w:26,h:16},{w:15,h:15},{w:18,h:18},{w:24,h:24},{w:16,h:16},{w:20,h:20},{w:24,h:24},{w:5,h:5},{w:24,h:14},{w:34,h:16},{w:17,h:18},{w:21,h:22},{w:21,h:21},{w:23,h:23},{w:30,h:30}],MPC_ICON_IMGOFFSET={"zhudijigou":{x:-195,y:0,s:0},"zhongyangjigou":{x:-178,y:-190,s:0},"zhongxiaoxue":{x:-196,y:-190,s:0},"zhongheyiyuan_1":{x:-214,y:-190,s:0},"zhongcan":{x:-232,y:-190,s:0},"zhongcan_a":{x:-232,y:-190,s:0},"zhongcan_b":{x:-232,y:-190,s:0},"zhongbiaoyanjing":{x:-250, y:-190,s:0},"youzheng":{x:-160,y:-208,s:0},"xiyidian":{x:-178,y:-208,s:0},"xinwenchuban":{x:-196,y:-208,s:0},"xican":{x:-214,y:-208,s:0},"xiaoxue_loupan":{x:-232,y:-208,s:0},"wenhuabangong":{x:-285,y:-18,s:0},"yinyueting":{x:-160,y:-226,s:0},"tushuyinxiang":{x:-178,y:-226,s:0},"tiyuyongpin":{x:-196,y:-226,s:0},"tiyu":{x:-214,y:-226,s:0},"tingchecang":{x:-232,y:-226,s:0},"shoupiaochu":{x:-250,y:-226,s:0},"yinghang":{x:-160,y:-244,s:0},"sheyingshexiang":{x:-178,y:-244,s:0},"shangwudasha":{x:-196,y:-244, s:0},"shangchang":{x:-214,y:-244,s:0},"sewaijigou":{x:-267,y:-54,s:0},"qita":{x:-250,y:-244,s:0},"yaodian_yaofang":{x:-160,y:-262,s:0},"qiche":{x:-178,y:-262,s:0},"meirongmeifa":{x:-196,y:-262,s:0},"lingmu":{x:-214,y:-262,s:0},"lianshuokuaishujiudiann":{x:-232,y:-262,s:0},"keyangjigou":{x:-250,y:-262,s:0},"hill":{x:-160,y:-280,s:0},"jiaotang":{x:-178,y:-280,s:0},"jiayouzhan":{x:-196,y:-280,s:0},"jiguandanwei":{x:-249,y:-90,s:0},"jiuba":{x:-232,y:-280,s:0},"kafeiting":{x:-250,y:-280,s:0},"guji":{x:-160, y:-298,s:0},"gouwuzhongxin":{x:-178,y:-298,s:0},"gongyuan":{x:-196,y:-298,s:0},"gongjianfajigou":{x:-249,y:-108,s:0},"gongce":{x:-232,y:-298,s:0},"gewuting":{x:-250,y:-298,s:0},"gaodengjiaoyu":{x:-160,y:-316,s:0},"gangkou_matou":{x:-178,y:-316,s:0},"fengjing":{x:-196,y:-316,s:0},"fangwuzhongjie":{x:-214,y:-316,s:0},"dujiachun":{x:-232,y:-316,s:0},"dongwuyuan":{x:-250,y:-316,s:0},"dongnanyacai":{x:-160,y:-334,s:0},"dianyingyuan":{x:-178,y:-334,s:0},"dianxinyingyeting":{x:-196,y:-334,s:0},"dianxingongsi":{x:-214, y:-334,s:0},"dianshita":{x:-232,y:-334,s:0},"chongwudian":{x:-250,y:-334,s:0},"chazhuo":{x:-160,y:-352,s:0},"chaoshi":{x:-178,y:-352,s:0},"changtuqichezhan":{x:-196,y:-352,s:0},"bowuguan":{x:-214,y:-352,s:0},"binguan":{x:-232,y:-352,s:0},"atm":{x:-250,y:-352,s:0},"blank":{x:-166,y:0,s:0},"feijichang":{x:-167,y:-18,s:1},"huochezhan":{x:-167,y:-40,s:1},"tianam":{x:-164,y:-61,s:2},"busstop_2":{x:-82,y:-289,s:12},"busstop_3":{x:-124,y:-289,s:13},"ditie_beijing_00":{x:-175,y:-90,s:9},"ditie_beijing_0":{x:-8, y:0,s:3},"ditie_beijing_1":{x:-27,y:0,s:4},"ditie_beijing_2":{x:-51,y:0,s:5},"ditie_shanghai_0":{x:-8,y:-23,s:3},"ditie_shanghai_1":{x:-27,y:-23,s:4},"ditie_shanghai_2":{x:-51,y:-23,s:5},"ditie_guangzhou_0":{x:-8,y:-47,s:3},"ditie_guangzhou_1":{x:-27,y:-47,s:4},"ditie_guangzhou_2":{x:-51,y:-47,s:5},"ditie_tianjin_0":{x:-8,y:-71,s:3},"ditie_tianjin_1":{x:-27,y:-71,s:4},"ditie_tianjin_2":{x:-51,y:-71,s:5},"ditie_shenzhen_0":{x:-8,y:-95,s:3},"ditie_shenzhen_1":{x:-27,y:-95,s:4},"ditie_shenzhen_2":{x:-51, y:-95,s:5},"ditie_xianggang_0":{x:-8,y:-120,s:3},"ditie_xianggang_1":{x:-27,y:-120,s:4},"ditie_xianggang_2":{x:-51,y:-120,s:5},"ditie_nanjing_0":{x:-8,y:-142,s:3},"ditie_nanjing_1":{x:-27,y:-142,s:4},"ditie_nanjing_2":{x:-51,y:-142,s:5},"ditie_chongqing_0":{x:-8,y:-166,s:3},"ditie_chongqing_1":{x:-27,y:-166,s:4},"ditie_chongqing_2":{x:-51,y:-166,s:5},"ditie_wuhan_0":{x:-8,y:-191,s:3},"ditie_wuhan_1":{x:-27,y:-191,s:4},"ditie_wuhan_2":{x:-51,y:-191,s:5},"ditie_changchun_0":{x:-8,y:-214,s:3},"ditie_changchun_1":{x:-27, y:-214,s:4},"ditie_changchun_2":{x:-51,y:-214,s:5},"ditie_dalian_0":{x:-8,y:-238,s:3},"ditie_dalian_1":{x:-27,y:-238,s:4},"ditie_dalian_2":{x:-51,y:-238,s:5},"ditie_chengdu_0":{x:-6,y:-316,s:14},"ditie_chengdu_1":{x:-28,y:-316,s:15},"ditie_chengdu_2":{x:-52,y:-316,s:16},"ditie_shenyang_0":{x:-8,y:-289,s:3},"ditie_shenyang_1":{x:-27,y:-289,s:4},"ditie_shenyang_2":{x:-51,y:-289,s:5},"trans_beijing_0":{x:-83,y:-1,s:6},"trans_beijing_1":{x:-102,y:-1,s:7},"trans_beijing_2":{x:-127,y:-1,s:8},"trans_shanghai_0":{x:-83, y:-27,s:6},"trans_shanghai_1":{x:-102,y:-27,s:7},"trans_shanghai_2":{x:-127,y:-27,s:8},"trans_guangzhou_0":{x:-83,y:-53,s:6},"trans_guangzhou_1":{x:-102,y:-53,s:7},"trans_guangzhou_2":{x:-127,y:-53,s:8},"trans_tianjin_0":{x:-83,y:-79,s:6},"trans_tianjin_1":{x:-102,y:-79,s:7},"trans_tianjin_2":{x:-127,y:-79,s:8},"trans_shenzhen_0":{x:-83,y:-105,s:6},"trans_shenzhen_1":{x:-102,y:-105,s:7},"trans_shenzhen_2":{x:-127,y:-105,s:8},"trans_xianggang_0":{x:-83,y:-131,s:6},"trans_xianggang_2":{x:-102,y:-131, s:7},"trans_xianggang_3":{x:-127,y:-131,s:8},"trans_nanjing_0":{x:-83,y:-157,s:6},"trans_nanjing_1":{x:-102,y:-157,s:7},"trans_nanjing_2":{x:-127,y:-157,s:8},"trans_chongqing_0":{x:-83,y:-183,s:6},"trans_chongqing_1":{x:-102,y:-183,s:7},"trans_chongqing_2":{x:-127,y:-183,s:8},"trans_wuhan_0":{x:-83,y:-209,s:6},"trans_wuhan_1":{x:-102,y:-209,s:7},"trans_wuhan_2":{x:-127,y:-209,s:8},"trans_changchun_0":{x:-83,y:-235,s:6},"trans_changchun_1":{x:-102,y:-235,s:7},"trans_changchun_2":{x:-127,y:-235,s:8}, "trans_dalian_0":{x:-83,y:-261,s:6},"trans_dalian_1":{x:-102,y:-261,s:7},"trans_dalian_2":{x:-127,y:-261,s:8},"gaosurukou":{x:-163,y:-131,s:10},"gaosuchukou":{x:-163,y:-107,s:10},"shoufeizhan":{x:-156,y:-153,s:11}}; var cBD=[-5,-4,4,4],ct2BD=[-12,-6,12,6],ct3BD=[-18,-6,18,6],ct3BD=[-18,-6,18,6],ct4BD=[-24,-6,24,6],clickCityData=[{n:"\\u5168\\u56fd",pt:new Point(1.199957122E7,4112219.88),bd:[-19,-9,15,9],lr:[3,3]},{n:"\\u5317\\u4eac\\u5e02",pt:new Point(12990903,4825899),bd:[-6,-4,5,6],lr:[4,4]},{n:"\\u5317\\u4eac\\u5e02",pt:new Point(12960183,4824235),bd:[-6,-6,6,6],lr:[5,9]},{n:"\\u5929\\u6d25\\u5e02",pt:new Point(1.304829434E7,4712296.83),bd:cBD,lr:[5,9]},{n:"\\u77f3\\u5bb6\\u5e84\\u5e02",pt:new Point(1.27478124E7,4559586.74), bd:cBD,lr:[5,9]},{n:"\\u5510\\u5c71\\u5e02",pt:new Point(1.315665616E7,4785778.65),bd:cBD,lr:[7,9]},{n:"\\u79e6\\u7687\\u5c9b\\u5e02",pt:new Point(1.331489428E7,4829754.58),bd:cBD,lr:[7,9]},{n:"\\u90af\\u90f8\\u5e02",pt:new Point(1.274620545E7,4360272.57),bd:cBD,lr:[7,9]},{n:"\\u90a2\\u53f0\\u5e02",pt:new Point(1.274749344E7,4423803.15),bd:cBD,lr:[8,9]},{n:"\\u4fdd\\u5b9a\\u5e02",pt:new Point(1.28543128E7,4677428.01),bd:cBD,lr:[7,9]},{n:"\\u5f20\\u5bb6\\u53e3\\u5e02",pt:new Point(1.279008463E7,4959101.33),bd:cBD,lr:[7, 9]},{n:"\\u627f\\u5fb7\\u5e02",pt:new Point(1.313032691E7,4981742.46),bd:cBD,lr:[7,9]},{n:"\\u6ca7\\u5dde\\u5e02",pt:new Point(1.30072937E7,4596691.7),bd:cBD,lr:[7,9]},{n:"\\u5eca\\u574a\\u5e02",pt:new Point(1.299258176E7,4769905.8),bd:cBD,lr:[8,9]},{n:"\\u8861\\u6c34\\u5e02",pt:new Point(1.288017593E7,4516789.37),bd:cBD,lr:[7,9]},{n:"\\u592a\\u539f\\u5e02",pt:new Point(1.252907701E7,4535262.32),bd:cBD,lr:[5,9]},{n:"\\u5927\\u540c\\u5e02",pt:new Point(1.261336427E7,4850167.42),bd:cBD,lr:[7,9]},{n:"\\u9633\\u6cc9\\u5e02", pt:new Point(1.264459126E7,4533525.33),bd:cBD,lr:[8,9]},{n:"\\u957f\\u6cbb\\u5e02",pt:new Point(1.25931022E7,4302896.69),bd:cBD,lr:[7,9]},{n:"\\u664b\\u57ce\\u5e02",pt:new Point(1.256346095E7,4206462.32),bd:cBD,lr:[7,9]},{n:"\\u6714\\u5dde\\u5e02",pt:new Point(1.251682783E7,4742810.65),bd:cBD,lr:[7,9]},{n:"\\u664b\\u4e2d\\u5e02",pt:new Point(1.255228326E7,4509774.55),bd:cBD,lr:[7,9]},{n:"\\u8fd0\\u57ce\\u5e02",pt:new Point(1.235808371E7,4143552.84),bd:cBD,lr:[7,9]},{n:"\\u5ffb\\u5dde\\u5e02",pt:new Point(1.255078132E7, 4612328.73),bd:cBD,lr:[7,9]},{n:"\\u4e34\\u6c7e\\u5e02",pt:new Point(1.241495146E7,4288092.81),bd:cBD,lr:[7,9]},{n:"\\u5415\\u6881\\u5e02",pt:new Point(1.237335426E7,4486213.29),bd:cBD,lr:[7,9]},{n:"\\u547c\\u548c\\u6d69\\u7279\\u5e02",pt:new Point(1.243971997E7,4961446.57),bd:cBD,lr:[5,9]},{n:"\\u5305\\u5934\\u5e02",pt:new Point(1.222832364E7,4934673.82),bd:cBD,lr:[7,9]},{n:"\\u4e4c\\u6d77\\u5e02",pt:new Point(1.189243044E7,4793517.95),bd:cBD,lr:[7,9]},{n:"\\u8d64\\u5cf0\\u5e02",pt:new Point(1.323554733E7,5171648.96), bd:cBD,lr:[7,9]},{n:"\\u901a\\u8fbd\\u5e02",pt:new Point(1.361147247E7,5377912.47),bd:cBD,lr:[7,9]},{n:"\\u9102\\u5c14\\u591a\\u65af\\u5e02",pt:new Point(1.224841002E7,4812809.03),bd:cBD,lr:[7,9]},{n:"\\u547c\\u4f26\\u8d1d\\u5c14\\u5e02",pt:new Point(1.333315354E7,6279368.64),bd:cBD,lr:[7,9]},{n:"\\u5df4\\u5f66\\u6dd6\\u5c14\\u5e02",pt:new Point(1.195525708E7,4947259.83),bd:cBD,lr:[7,9]},{n:"\\u4e4c\\u5170\\u5bdf\\u5e03\\u5e02",pt:new Point(1.259485229E7,4984078.08),bd:cBD,lr:[7,9]},{n:"\\u5174\\u5b89\\u76df",pt:new Point(1.358886567E7, 5762892.65),bd:cBD,lr:[7,9]},{n:"\\u9521\\u6797\\u90ed\\u52d2\\u76df",pt:new Point(1.291922601E7,5426155.97),bd:cBD,lr:[7,9]},{n:"\\u963f\\u62c9\\u5584\\u76df",pt:new Point(1.177053341E7,4674264.08),bd:cBD,lr:[7,9]},{n:"\\u6c88\\u9633\\u5e02",pt:new Point(1.374036603E7,5103661.8),bd:cBD,lr:[5,9]},{n:"\\u5927\\u8fde\\u5e02",pt:new Point(1.353897373E7,4683025.5),bd:cBD,lr:[7,9]},{n:"\\u978d\\u5c71\\u5e02",pt:new Point(1.369251369E7,5000950.08),bd:cBD,lr:[7,9]},{n:"\\u629a\\u987a\\u5e02",pt:new Point(1.379938803E7,5114977.65), bd:cBD,lr:[7,9]},{n:"\\u672c\\u6eaa\\u5e02",pt:new Point(1.377864321E7,5028229.05),bd:cBD,lr:[7,9]},{n:"\\u4e39\\u4e1c\\u5e02",pt:new Point(1.384731338E7,4857753.87),bd:cBD,lr:[7,9]},{n:"\\u9526\\u5dde\\u5e02",pt:new Point(13485599,4998700.1),bd:cBD,lr:[7,9]},{n:"\\u8425\\u53e3\\u5e02",pt:new Point(1.360800602E7,4936051.67),bd:cBD,lr:[7,9]},{n:"\\u961c\\u65b0\\u5e02",pt:new Point(1.354506745E7,5136335.54),bd:cBD,lr:[7,9]},{n:"\\u8fbd\\u9633\\u5e02",pt:new Point(1.371241685E7,5024584.95),bd:cBD,lr:[8,9]},{n:"\\u76d8\\u9526\\u5e02", pt:new Point(1.358987645E7,5002667.8),bd:cBD,lr:[7,9]},{n:"\\u94c1\\u5cad\\u5e02",pt:new Point(1.378727479E7,5175928.41),bd:cBD,lr:[7,9]},{n:"\\u671d\\u9633\\u5e02",pt:new Point(1.340929734E7,5069601.1),bd:cBD,lr:[7,9]},{n:"\\u846b\\u82a6\\u5c9b\\u5e02",pt:new Point(1.345225378E7,4942439.12),bd:cBD,lr:[7,9]},{n:"\\u957f\\u6625\\u5e02",pt:new Point(1.395169647E7,5407899.41),bd:cBD,lr:[5,9]},{n:"\\u5409\\u6797\\u5e02",pt:new Point(1.408831069E7,5411361.75),bd:cBD,lr:[7,9]},{n:"\\u56db\\u5e73\\u5e02",pt:new Point(1.384344811E7, 5308670.02),bd:cBD,lr:[7,9]},{n:"\\u8fbd\\u6e90\\u5e02",pt:new Point(1.393179056E7,5266534.49),bd:cBD,lr:[7,9]},{n:"\\u901a\\u5316\\u5e02",pt:new Point(1.402045802E7,5092482.52),bd:cBD,lr:[7,9]},{n:"\\u767d\\u5c71\\u5e02",pt:new Point(1.407431642E7,5124029.48),bd:cBD,lr:[8,9]},{n:"\\u677e\\u539f\\u5e02",pt:new Point(1.389631929E7,5614174.46),bd:cBD,lr:[7,9]},{n:"\\u767d\\u57ce\\u5e02",pt:new Point(1.367521901E7,5689684.01),bd:cBD,lr:[7,9]},{n:"\\u5ef6\\u8fb9\\u671d\\u9c9c\\u65cf\\u81ea\\u6cbb\\u5dde",pt:new Point(1.441776373E7, 5266998.98),bd:cBD,lr:[7,9]},{n:"\\u54c8\\u5c14\\u6ee8\\u5e02",pt:new Point(1.408650136E7,5722186.15),bd:cBD,lr:[5,9]},{n:"\\u9f50\\u9f50\\u54c8\\u5c14\\u5e02",pt:new Point(1.37952823E7,5969334.56),bd:cBD,lr:[7,9]},{n:"\\u9e21\\u897f\\u5e02",pt:new Point(1.458080782E7,5638827.82),bd:cBD,lr:[7,9]},{n:"\\u9e64\\u5c97\\u5e02",pt:new Point(1.450560155E7,5968656.02),bd:cBD,lr:[7,9]},{n:"\\u53cc\\u9e2d\\u5c71\\u5e02",pt:new Point(1.460142765E7,5854241.34),bd:cBD,lr:[7,9]},{n:"\\u5927\\u5e86\\u5e02",pt:new Point(1.392732491E7, 5844873.47),bd:cBD,lr:[7,9]},{n:"\\u4f0a\\u6625\\u5e02",pt:new Point(1.435040278E7,6030712.32),bd:cBD,lr:[7,9]},{n:"\\u4f73\\u6728\\u65af\\u5e02",pt:new Point(1.450805986E7,5878973.81),bd:cBD,lr:[7,9]},{n:"\\u4e03\\u53f0\\u6cb3\\u5e02",pt:new Point(1.458408167E7,5713695.85),bd:cBD,lr:[7,9]},{n:"\\u7261\\u4e39\\u6c5f\\u5e02",pt:new Point(1.443006301E7,5527661.89),bd:cBD,lr:[7,9]},{n:"\\u9ed1\\u6cb3\\u5e02",pt:new Point(1.419624334E7,6457183.7),bd:cBD,lr:[7,9]},{n:"\\u7ee5\\u5316\\u5e02",pt:new Point(1.413493747E7,5855417.31), bd:cBD,lr:[7,9]},{n:"\\u5927\\u5174\\u5b89\\u5cad\\u5730\\u533a",pt:new Point(1.383893581E7,6763930.17),bd:cBD,lr:[7,9]},{n:"\\u4e0a\\u6d77\\u5e02",pt:new Point(1.35231485E7,3641129.98),bd:cBD,lr:[5,9]},{n:"\\u5357\\u4eac\\u5e02",pt:new Point(1.322439822E7,3749110.08),bd:cBD,lr:[5,9]},{n:"\\u65e0\\u9521\\u5e02",pt:new Point(1.339293301E7,3684625.08),bd:cBD,lr:[8,9]},{n:"\\u5f90\\u5dde\\u5e02",pt:new Point(1.304658292E7,4040227.55),bd:cBD,lr:[7,9]},{n:"\\u5e38\\u5dde\\u5e02",pt:new Point(1.335631214E7,3716455.43),bd:cBD, lr:[7,9]},{n:"\\u82cf\\u5dde\\u5e02",pt:new Point(1.342436752E7,3650025.6),bd:cBD,lr:[7,9]},{n:"\\u5357\\u901a\\u5e02",pt:new Point(1.345867166E7,3738891.76),bd:cBD,lr:[7,9]},{n:"\\u8fde\\u4e91\\u6e2f\\u5e02",pt:new Point(1.327258831E7,4085285.7),bd:cBD,lr:[7,9]},{n:"\\u6dee\\u5b89\\u5e02",pt:new Point(1.324961418E7,3953528.85),bd:cBD,lr:[7,9]},{n:"\\u76d0\\u57ce\\u5e02",pt:new Point(1.337721562E7,3919501.88),bd:cBD,lr:[7,9]},{n:"\\u626c\\u5dde\\u5e02",pt:new Point(1.329391759E7,3792837.54),bd:cBD,lr:[7,9]},{n:"\\u9547\\u6c5f\\u5e02", pt:new Point(1.329874933E7,3767384.26),bd:cBD,lr:[8,9]},{n:"\\u6cf0\\u5dde\\u5e02",pt:new Point(1.335064059E7,3800783.56),bd:cBD,lr:[8,9]},{n:"\\u5bbf\\u8fc1\\u5e02",pt:new Point(1.316723796E7,4000367.15),bd:cBD,lr:[7,9]},{n:"\\u676d\\u5dde\\u5e02",pt:new Point(1.33805214E7,3509725.46),bd:cBD,lr:[5,9]},{n:"\\u5b81\\u6ce2\\u5e02",pt:new Point(1.353171719E7,3466700.47),bd:cBD,lr:[7,9]},{n:"\\u6e29\\u5dde\\u5e02",pt:new Point(1.343705661E7,3228862.38),bd:cBD,lr:[7,9]},{n:"\\u5609\\u5174\\u5e02",pt:new Point(1.344251601E7, 3578433.26),bd:cBD,lr:[7,9]},{n:"\\u6e56\\u5dde\\u5e02",pt:new Point(1.336888217E7,3597591.37),bd:cBD,lr:[7,9]},{n:"\\u7ecd\\u5174\\u5e02",pt:new Point(1.342353439E7,3483350.89),bd:cBD,lr:[7,9]},{n:"\\u91d1\\u534e\\u5e02",pt:new Point(1.331996271E7,3365440.15),bd:cBD,lr:[7,9]},{n:"\\u8862\\u5dde\\u5e02",pt:new Point(1.323381451E7,3347380.57),bd:cBD,lr:[7,9]},{n:"\\u821f\\u5c71\\u5e02",pt:new Point(1.360498413E7,3480848.35),bd:cBD,lr:[7,9]},{n:"\\u53f0\\u5dde\\u5e02",pt:new Point(1.351735559E7,3311823.54),bd:cBD,lr:[7, 9]},{n:"\\u4e3d\\u6c34\\u5e02",pt:new Point(1.335063445E7,3288178.9),bd:cBD,lr:[7,9]},{n:"\\u5408\\u80a5\\u5e02",pt:new Point(1.305046054E7,3720544.86),bd:cBD,lr:[5,9]},{n:"\\u829c\\u6e56\\u5e02",pt:new Point(1.317946498E7,3655185.37),bd:cBD,lr:[7,9]},{n:"\\u868c\\u57e0\\u5e02",pt:new Point(1.306849369E7,3861457.33),bd:cBD,lr:[7,9]},{n:"\\u6dee\\u5357\\u5e02",pt:new Point(1.302555953E7,3823189.84),bd:cBD,lr:[7,9]},{n:"\\u9a6c\\u978d\\u5c71\\u5e02",pt:new Point(1.319275845E7,3701721.87),bd:cBD,lr:[7,9]},{n:"\\u6dee\\u5317\\u5e02", pt:new Point(1.300279748E7,3999425.85),bd:cBD,lr:[8,9]},{n:"\\u94dc\\u9675\\u5e02",pt:new Point(1.311655618E7,3603277.27),bd:cBD,lr:[8,9]},{n:"\\u5b89\\u5e86\\u5e02",pt:new Point(1.303162375E7,3550019.08),bd:cBD,lr:[7,9]},{n:"\\u9ec4\\u5c71\\u5e02",pt:new Point(1.317427886E7,3446439.23),bd:cBD,lr:[7,9]},{n:"\\u6ec1\\u5dde\\u5e02",pt:new Point(1.317183794E7,3780786.48),bd:cBD,lr:[7,9]},{n:"\\u961c\\u9633\\u5e02",pt:new Point(1.289321516E7,3858085.78),bd:cBD,lr:[7,9]},{n:"\\u5bbf\\u5dde\\u5e02",pt:new Point(1.30212317E7, 3958276.71),bd:cBD,lr:[7,9]},{n:"\\u5de2\\u6e56\\u5e02",pt:new Point(1.312385159E7,3691564.79),bd:cBD,lr:[8,9]},{n:"\\u516d\\u5b89\\u5e02",pt:new Point(1.297019874E7,3707970.37),bd:cBD,lr:[7,9]},{n:"\\u4eb3\\u5dde\\u5e02",pt:new Point(1.288949748E7,3985791.77),bd:cBD,lr:[8,9]},{n:"\\u6c60\\u5dde\\u5e02",pt:new Point(1.30798748E7,3567450.98),bd:cBD,lr:[8,9]},{n:"\\u5ba3\\u57ce\\u5e02",pt:new Point(1.322101886E7,3603632.56),bd:cBD,lr:[7,9]},{n:"\\u798f\\u5dde\\u5e02",pt:new Point(1.328071393E7,2989935.97),bd:cBD,lr:[5, 9]},{n:"\\u53a6\\u95e8\\u5e02",pt:new Point(1.314651306E7,2794855.77),bd:cBD,lr:[7,9]},{n:"\\u8386\\u7530\\u5e02",pt:new Point(1.324873885E7,2913804.66),bd:cBD,lr:[7,9]},{n:"\\u4e09\\u660e\\u5e02",pt:new Point(1.309639979E7,3013435.8),bd:cBD,lr:[7,9]},{n:"\\u6cc9\\u5dde\\u5e02",pt:new Point(1.320191012E7,2846954.45),bd:cBD,lr:[8,9]},{n:"\\u6f33\\u5dde\\u5e02",pt:new Point(1.30972994E7,2798905.67),bd:cBD,lr:[7,9]},{n:"\\u5357\\u5e73\\u5e02",pt:new Point(1.31563519E7,3060177),bd:cBD,lr:[7,9]},{n:"\\u9f99\\u5ca9\\u5e02", pt:new Point(1.302904754E7,2870546.66),bd:cBD,lr:[7,9]},{n:"\\u5b81\\u5fb7\\u5e02",pt:new Point(1.330647299E7,3063294.93),bd:cBD,lr:[7,9]},{n:"\\u5357\\u660c\\u5e02",pt:new Point(1.291001755E7,3308071.83),bd:cBD,lr:[5,9]},{n:"\\u666f\\u5fb7\\u9547\\u5e02",pt:new Point(1.304548805E7,3394401.41),bd:cBD,lr:[7,9]},{n:"\\u840d\\u4e61\\u5e02",pt:new Point(1.267515981E7,3182197.09),bd:cBD,lr:[8,9]},{n:"\\u4e5d\\u6c5f\\u5e02",pt:new Point(1.291408497E7,3445118.73),bd:cBD,lr:[7,9]},{n:"\\u65b0\\u4f59\\u5e02",pt:new Point(1.279332028E7, 3206680.44),bd:cBD,lr:[8,9]},{n:"\\u9e70\\u6f6d\\u5e02",pt:new Point(1.303295225E7,3262112.41),bd:cBD,lr:[8,9]},{n:"\\u8d63\\u5dde\\u5e02",pt:new Point(1.279518535E7,2959890.57),bd:cBD,lr:[7,9]},{n:"\\u5409\\u5b89\\u5e02",pt:new Point(1.280188497E7,3118790.33),bd:cBD,lr:[7,9]},{n:"\\u5b9c\\u6625\\u5e02",pt:new Point(1.273693492E7,3206538.71),bd:cBD,lr:[7,9]},{n:"\\u629a\\u5dde\\u5e02",pt:new Point(12953213,3222556.21),bd:cBD,lr:[7,9]},{n:"\\u4e0a\\u9976\\u5e02",pt:new Point(1.313388004E7,3285299.92),bd:cBD,lr:[7,9]}, {n:"\\u6d4e\\u5357\\u5e02",pt:new Point(1.302458137E7,4367507.59),bd:cBD,lr:[5,9]},{n:"\\u9752\\u5c9b\\u5e02",pt:new Point(1.340183129E7,4285182.82),bd:cBD,lr:[7,9]},{n:"\\u6dc4\\u535a\\u5e02",pt:new Point(1.31426863E7,4388052.83),bd:cBD,lr:[7,9]},{n:"\\u67a3\\u5e84\\u5e02",pt:new Point(1.306127478E7,4114277.91),bd:cBD,lr:[7,9]},{n:"\\u4e1c\\u8425\\u5e02",pt:new Point(1.321165635E7,4474393.79),bd:cBD,lr:[7,9]},{n:"\\u70df\\u53f0\\u5e02",pt:new Point(1.352035299E7,4478575.49),bd:cBD,lr:[7,9]},{n:"\\u6f4d\\u574a\\u5e02", pt:new Point(1.326587888E7,4373424.04),bd:cBD,lr:[7,9]},{n:"\\u6d4e\\u5b81\\u5e02",pt:new Point(1.297932404E7,4196136.66),bd:cBD,lr:[7,9]},{n:"\\u6cf0\\u5b89\\u5e02",pt:new Point(1.303498861E7,4303535.5),bd:cBD,lr:[7,9]},{n:"\\u5a01\\u6d77\\u5e02",pt:new Point(1.359563129E7,4485000.06),bd:cBD,lr:[7,9]},{n:"\\u65e5\\u7167\\u5e02",pt:new Point(1.330710951E7,4195766.38),bd:cBD,lr:[7,9]},{n:"\\u83b1\\u829c\\u5e02",pt:new Point(1.310045667E7,4305551.29),bd:cBD,lr:[8,9]},{n:"\\u4e34\\u6c82\\u5e02",pt:new Point(1.317546245E7, 4147217.21),bd:cBD,lr:[7,9]},{n:"\\u5fb7\\u5dde\\u5e02",pt:new Point(1.294762204E7,4476813.41),bd:cBD,lr:[7,9]},{n:"\\u804a\\u57ce\\u5e02",pt:new Point(1.291231075E7,4338690.92),bd:cBD,lr:[7,9]},{n:"\\u6ee8\\u5dde\\u5e02",pt:new Point(1.31345846E7,4466450.28),bd:cBD,lr:[8,9]},{n:"\\u83cf\\u6cfd\\u5e02",pt:new Point(1.285603348E7,4171820.25),bd:cBD,lr:[7,9]},{n:"\\u90d1\\u5dde\\u5e02",pt:new Point(1.264866361E7,4105852.45),bd:cBD,lr:[5,9]},{n:"\\u5f00\\u5c01\\u5e02",pt:new Point(1.272550083E7,4112517.32),bd:cBD,lr:[7, 9]},{n:"\\u6d1b\\u9633\\u5e02",pt:new Point(1.251908239E7,4088441.36),bd:cBD,lr:[7,9]},{n:"\\u5e73\\u9876\\u5c71\\u5e02",pt:new Point(1.261439072E7,3969016.16),bd:cBD,lr:[7,9]},{n:"\\u5b89\\u9633\\u5e02",pt:new Point(1.273504336E7,4289478.97),bd:cBD,lr:[7,9]},{n:"\\u9e64\\u58c1\\u5e02",pt:new Point(1.27118028E7,4262428.36),bd:cBD,lr:[8,9]},{n:"\\u65b0\\u4e61\\u5e02",pt:new Point(1.268305211E7,4179998.27),bd:cBD,lr:[7,9]},{n:"\\u7126\\u4f5c\\u5e02",pt:new Point(1.260690819E7,4169148.29),bd:cBD,lr:[8,9]},{n:"\\u6fee\\u9633\\u5e02", pt:new Point(1.280622838E7,4243123.16),bd:cBD,lr:[8,9]},{n:"\\u8bb8\\u660c\\u5e02",pt:new Point(1.267484133E7,4010264.96),bd:cBD,lr:[8,9]},{n:"\\u6f2f\\u6cb3\\u5e02",pt:new Point(1.269314311E7,3949716.47),bd:cBD,lr:[8,9]},{n:"\\u4e09\\u95e8\\u5ce1\\u5e02",pt:new Point(1.237984112E7,4110225.01),bd:cBD,lr:[7,9]},{n:"\\u5357\\u9633\\u5e02",pt:new Point(1.252747532E7,3871404.82),bd:cBD,lr:[7,9]},{n:"\\u5546\\u4e18\\u5e02",pt:new Point(1.287511484E7,4065382.71),bd:cBD,lr:[7,9]},{n:"\\u4fe1\\u9633\\u5e02",pt:new Point(1.269893502E7, 3757290.11),bd:cBD,lr:[7,9]},{n:"\\u5468\\u53e3\\u5e02",pt:new Point(1.27640208E7,3955188.99),bd:cBD,lr:[7,9]},{n:"\\u9a7b\\u9a6c\\u5e97\\u5e02",pt:new Point(1.26952599E7,3870201.61),bd:cBD,lr:[7,9]},{n:"\\u6b66\\u6c49\\u5e02",pt:new Point(1.272455882E7,3558883.15),bd:cBD,lr:[5,9]},{n:"\\u9ec4\\u77f3\\u5e02",pt:new Point(1.280683116E7,3508246.06),bd:cBD,lr:[8,9]},{n:"\\u5341\\u5830\\u5e02",pt:new Point(1.233381983E7,3826557.97),bd:cBD,lr:[7,9]},{n:"\\u5b9c\\u660c\\u5e02",pt:new Point(1.238926478E7,3571550.15),bd:cBD, lr:[7,9]},{n:"\\u8944\\u6a0a\\u5e02",pt:new Point(1.248580442E7,3744176.48),bd:cBD,lr:[7,9]},{n:"\\u8346\\u95e8\\u5e02",pt:new Point(1.24908312E7,3615936.83),bd:cBD,lr:[7,9]},{n:"\\u5b5d\\u611f\\u5e02",pt:new Point(1.268197645E7,3601581.31),bd:cBD,lr:[8,9]},{n:"\\u8346\\u5dde\\u5e02",pt:new Point(1.24953132E7,3525594.67),bd:cBD,lr:[7,9]},{n:"\\u9ec4\\u5188\\u5e02",pt:new Point(1.278872731E7,3541014.86),bd:cBD,lr:[7,9]},{n:"\\u54b8\\u5b81\\u5e02",pt:new Point(1.272713679E7,3462404.52),bd:cBD,lr:[7,9]},{n:"\\u968f\\u5dde\\u5e02", pt:new Point(1.262253173E7,3700874.41),bd:cBD,lr:[7,9]},{n:"\\u6069\\u65bd\\u571f\\u5bb6\\u65cf\\u82d7\\u65cf\\u81ea\\u6cbb\\u5dde",pt:new Point(1.218903267E7,3517579.64),bd:cBD,lr:[7,9]},{n:"\\u4ed9\\u6843\\u5e02",pt:new Point(1.263056786E7,3529164.83),bd:cBD,lr:[9,9]},{n:"\\u6f5c\\u6c5f\\u5e02",pt:new Point(1.256873544E7,3534321.2),bd:cBD,lr:[9,9]},{n:"\\u5929\\u95e8\\u5e02",pt:new Point(1.259844393E7,3567930.91),bd:cBD,lr:[9,9]},{n:"\\u795e\\u519c\\u67b6\\u6797\\u533a",pt:new Point(1.23212052E7,3707164.42),bd:cBD,lr:[9, 9]},{n:"\\u957f\\u6c99\\u5e02",pt:new Point(1.257234748E7,3258455.64),bd:cBD,lr:[5,9]},{n:"\\u682a\\u6d32\\u5e02",pt:new Point(1.259492763E7,3207920.8),bd:cBD,lr:[7,9]},{n:"\\u6e58\\u6f6d\\u5e02",pt:new Point(1.257361587E7,3208214.06),bd:cBD,lr:[7,9]},{n:"\\u8861\\u9633\\u5e02",pt:new Point(1.25323004E7,3091412.15),bd:cBD,lr:[7,9]},{n:"\\u90b5\\u9633\\u5e02",pt:new Point(1.240939043E7,3134535.06),bd:cBD,lr:[7,9]},{n:"\\u5cb3\\u9633\\u5e02",pt:new Point(12594102,3400788.63),bd:cBD,lr:[7,9]},{n:"\\u5e38\\u5fb7\\u5e02", pt:new Point(1.243507912E7,3359523.26),bd:cBD,lr:[7,9]},{n:"\\u5f20\\u5bb6\\u754c\\u5e02",pt:new Point(1.229944266E7,3370126.24),bd:cBD,lr:[7,9]},{n:"\\u76ca\\u9633\\u5e02",pt:new Point(1.250817766E7,3299123.14),bd:cBD,lr:[7,9]},{n:"\\u90f4\\u5dde\\u5e02",pt:new Point(1.258158251E7,2952694.08),bd:cBD,lr:[7,9]},{n:"\\u6c38\\u5dde\\u5e02",pt:new Point(1.242566251E7,3032983.5),bd:cBD,lr:[7,9]},{n:"\\u6000\\u5316\\u5e02",pt:new Point(1.22457125E7,3174098.87),bd:cBD,lr:[7,9]},{n:"\\u5a04\\u5e95\\u5e02",pt:new Point(1.246803765E7, 3191557.89),bd:cBD,lr:[8,9]},{n:"\\u6e58\\u897f\\u571f\\u5bb6\\u65cf\\u82d7\\u65cf\\u81ea\\u6cbb\\u5dde",pt:new Point(1.221698361E7,3268959.39),bd:cBD,lr:[7,9]},{n:"\\u5e7f\\u5dde\\u5e02",pt:new Point(1.260930783E7,2631271.83),bd:cBD,lr:[5,9]},{n:"\\u97f6\\u5173\\u5e02",pt:new Point(1.264644631E7,2835068.76),bd:cBD,lr:[7,9]},{n:"\\u6df1\\u5733\\u5e02",pt:new Point(1.268919896E7,2569212.32),bd:cBD,lr:[8,9]},{n:"\\u6c55\\u5934\\u5e02",pt:new Point(1.298983615E7,2658196.76),bd:cBD,lr:[7,9]},{n:"\\u4f5b\\u5c71\\u5e02",pt:new Point(1.259351942E7, 2618810.41),bd:cBD,lr:[8,9]},{n:"\\u6c5f\\u95e8\\u5e02",pt:new Point(1.258907706E7,2565305.02),bd:cBD,lr:[7,9]},{n:"\\u6e5b\\u6c5f\\u5e02",pt:new Point(1.228601939E7,2409244.55),bd:cBD,lr:[7,9]},{n:"\\u8302\\u540d\\u5e02",pt:new Point(1.234899961E7,2455913.03),bd:cBD,lr:[7,9]},{n:"\\u8087\\u5e86\\u5e02",pt:new Point(1.252044564E7,2621563.68),bd:cBD,lr:[7,9]},{n:"\\u60e0\\u5dde\\u5e02",pt:new Point(1.273769287E7,2629228.47),bd:cBD,lr:[8,9]},{n:"\\u6885\\u5dde\\u5e02",pt:new Point(1.292755225E7,2771587.26),bd:cBD,lr:[7, 9]},{n:"\\u6c55\\u5c3e\\u5e02",pt:new Point(1.284440979E7,2590115.95),bd:cBD,lr:[7,9]},{n:"\\u6cb3\\u6e90\\u5e02",pt:new Point(1.276927156E7,2705584.51),bd:cBD,lr:[7,9]},{n:"\\u9633\\u6c5f\\u5e02",pt:new Point(1.246669444E7,2479195.46),bd:cBD,lr:[7,9]},{n:"\\u6e05\\u8fdc\\u5e02",pt:new Point(1.258621367E7,2698112.83),bd:cBD,lr:[7,9]},{n:"\\u4e1c\\u839e\\u5e02",pt:new Point(1.266361776E7,2618331.04),bd:cBD,lr:[7,9]},{n:"\\u4e2d\\u5c71\\u5e02",pt:new Point(1.262365308E7,2557824.08),bd:cBD,lr:[8,9]},{n:"\\u6f6e\\u5dde\\u5e02", pt:new Point(1.298326614E7,2695080.32),bd:cBD,lr:[8,9]},{n:"\\u63ed\\u9633\\u5e02",pt:new Point(1.29554097E7,2682130.11),bd:cBD,lr:[8,9]},{n:"\\u4e91\\u6d6e\\u5e02",pt:new Point(1.247360714E7,2605655.19),bd:cBD,lr:[7,9]},{n:"\\u5357\\u5b81\\u5e02",pt:new Point(1.206357678E7,2594028.7),bd:cBD,lr:[5,9]},{n:"\\u67f3\\u5dde\\u5e02",pt:new Point(1.218092228E7,2776089.56),bd:cBD,lr:[7,9]},{n:"\\u6842\\u6797\\u5e02",pt:new Point(1.227827601E7,2891719.35),bd:cBD,lr:[7,9]},{n:"\\u68a7\\u5dde\\u5e02",pt:new Point(1.238836717E7, 2673421.13),bd:cBD,lr:[7,9]},{n:"\\u5317\\u6d77\\u5e02",pt:new Point(1.214803492E7,2434259.23),bd:cBD,lr:[7,9]},{n:"\\u9632\\u57ce\\u6e2f\\u5e02",pt:new Point(1.206275824E7,2458819.91),bd:cBD,lr:[7,9]},{n:"\\u94a6\\u5dde\\u5e02",pt:new Point(1.209618474E7,2493766.85),bd:cBD,lr:[8,9]},{n:"\\u8d35\\u6e2f\\u5e02",pt:new Point(1.220111842E7,2628719.18),bd:cBD,lr:[8,9]},{n:"\\u7389\\u6797\\u5e02",pt:new Point(1.226430972E7,2572247.58),bd:cBD,lr:[7,9]},{n:"\\u767e\\u8272\\u5e02",pt:new Point(1.186950163E7,2724850.41),bd:cBD, lr:[7,9]},{n:"\\u8d3a\\u5dde\\u5e02",pt:new Point(1.242050604E7,2785419.69),bd:cBD,lr:[7,9]},{n:"\\u6cb3\\u6c60\\u5e02",pt:new Point(1.203293245E7,2820780.9),bd:cBD,lr:[7,9]},{n:"\\u6765\\u5bbe\\u5e02",pt:new Point(1.215949606E7,2706113.22),bd:cBD,lr:[7,9]},{n:"\\u5d07\\u5de6\\u5e02",pt:new Point(1.195283116E7,2541092.75),bd:cBD,lr:[7,9]},{n:"\\u6d77\\u53e3\\u5e02",pt:new Point(1.228340323E7,2262634.65),bd:cBD,lr:[5,9]},{n:"\\u4e09\\u4e9a\\u5e02",pt:new Point(1.219159361E7,2054280.47),bd:cBD,lr:[7,9]},{n:"\\u4e94\\u6307\\u5c71\\u5e02", pt:new Point(1.21922034E7,2115118.31),bd:cBD,lr:[9,9]},{n:"\\u743c\\u6d77\\u5e02",pt:new Point(1.229883941E7,2171833.78),bd:cBD,lr:[9,9]},{n:"\\u510b\\u5dde\\u5e02",pt:new Point(1.219933474E7,2202719.22),bd:cBD,lr:[9,9]},{n:"\\u6587\\u660c\\u5e02",pt:new Point(1.233475447E7,2205345.6),bd:cBD,lr:[9,9]},{n:"\\u4e07\\u5b81\\u5e02",pt:new Point(1.228968886E7,2117494.22),bd:cBD,lr:[9,9]},{n:"\\u4e1c\\u65b9\\u5e02",pt:new Point(1.209493819E7,2153087.07),bd:cBD,lr:[9,9]},{n:"\\u5b9a\\u5b89\\u53bf",pt:new Point(1.228188148E7, 2223659.92),bd:cBD,lr:[9,9]},{n:"\\u5c6f\\u660c\\u53bf",pt:new Point(1.225750859E7,2183877.5),bd:cBD,lr:[9,9]},{n:"\\u6f84\\u8fc8\\u53bf",pt:new Point(1.224679354E7,2228213.81),bd:cBD,lr:[9,9]},{n:"\\u4e34\\u9ad8\\u53bf",pt:new Point(1.163568384E7,3284342.89),bd:cBD,lr:[9,9]},{n:"\\u767d\\u6c99\\u9ece\\u65cf\\u81ea\\u6cbb\\u53bf",pt:new Point(1.427215715E7,5044605.41),bd:cBD,lr:[9,9]},{n:"\\u660c\\u6c5f\\u9ece\\u65cf\\u81ea\\u6cbb\\u53bf",pt:new Point(1.427215715E7,5044605.41),bd:cBD,lr:[9,9]},{n:"\\u4e50\\u4e1c\\u9ece\\u65cf\\u81ea\\u6cbb\\u53bf", pt:new Point(1.427215715E7,5044605.41),bd:cBD,lr:[9,9]},{n:"\\u9675\\u6c34\\u9ece\\u65cf\\u81ea\\u6cbb\\u53bf",pt:new Point(1.427215715E7,5044605.41),bd:cBD,lr:[9,9]},{n:"\\u4fdd\\u4ead\\u9ece\\u65cf\\u82d7\\u65cf\\u81ea\\u6cbb\\u53bf",pt:new Point(1.427215715E7,5044605.41),bd:cBD,lr:[9,9]},{n:"\\u743c\\u4e2d\\u9ece\\u65cf\\u82d7\\u65cf\\u81ea\\u6cbb\\u53bf",pt:new Point(1.427215715E7,5044605.41),bd:cBD,lr:[9,9]},{n:"\\u91cd\\u5e86\\u5e02",pt:new Point(1.184984638E7,3437582.53),bd:cBD,lr:[5,9]},{n:"\\u6210\\u90fd\\u5e02",pt:new Point(1.158524888E7, 3567151.84),bd:cBD,lr:[5,9]},{n:"\\u81ea\\u8d21\\u5e02",pt:new Point(1.166471081E7,3398518.18),bd:cBD,lr:[8,9]},{n:"\\u6500\\u679d\\u82b1\\u5e02",pt:new Point(1.132399544E7,3052819.58),bd:cBD,lr:[7,9]},{n:"\\u6cf8\\u5dde\\u5e02",pt:new Point(1.173866293E7,3339244.88),bd:cBD,lr:[7,9]},{n:"\\u5fb7\\u9633\\u5e02",pt:new Point(1.162232681E7,3627742.01),bd:cBD,lr:[7,9]},{n:"\\u7ef5\\u9633\\u5e02",pt:new Point(1.165370954E7,3671830.29),bd:cBD,lr:[7,9]},{n:"\\u5e7f\\u5143\\u5e02",pt:new Point(1.178330189E7,3798266.61),bd:cBD, lr:[7,9]},{n:"\\u9042\\u5b81\\u5e02",pt:new Point(1.175261568E7,3550145.61),bd:cBD,lr:[7,9]},{n:"\\u5185\\u6c5f\\u5e02",pt:new Point(1.169593316E7,3429168.69),bd:cBD,lr:[7,9]},{n:"\\u4e50\\u5c71\\u5e02",pt:new Point(1.155195965E7,3425604.02),bd:cBD,lr:[7,9]},{n:"\\u5357\\u5145\\u5e02",pt:new Point(1.181303976E7,3590300.79),bd:cBD,lr:[7,9]},{n:"\\u7709\\u5c71\\u5e02",pt:new Point(1.156121596E7,3492381.09),bd:cBD,lr:[8,9]},{n:"\\u5b9c\\u5bbe\\u5e02",pt:new Point(1.16496864E7,3324145.29),bd:cBD,lr:[7,9]},{n:"\\u5e7f\\u5b89\\u5e02", pt:new Point(1.187120628E7,3541167.9),bd:cBD,lr:[7,9]},{n:"\\u8fbe\\u5dde\\u5e02",pt:new Point(1.196462416E7,3639026.15),bd:cBD,lr:[7,9]},{n:"\\u96c5\\u5b89\\u5e02",pt:new Point(1.146823433E7,3480224.33),bd:cBD,lr:[7,9]},{n:"\\u5df4\\u4e2d\\u5e02",pt:new Point(1.188364069E7,3723597.18),bd:cBD,lr:[7,9]},{n:"\\u8d44\\u9633\\u5e02",pt:new Point(1.164804568E7,3499522.66),bd:cBD,lr:[8,9]},{n:"\\u963f\\u575d\\u85cf\\u65cf\\u7f8c\\u65cf\\u81ea\\u6cbb\\u5dde",pt:new Point(1.13805074E7,3728228.76),bd:cBD,lr:[7,9]},{n:"\\u7518\\u5b5c\\u85cf\\u65cf\\u81ea\\u6cbb\\u5dde", pt:new Point(1.135132558E7,3489245.11),bd:cBD,lr:[7,9]},{n:"\\u51c9\\u5c71\\u5f5d\\u65cf\\u81ea\\u6cbb\\u5dde",pt:new Point(1.138524665E7,3214579.77),bd:cBD,lr:[7,9]},{n:"\\u8d35\\u9633\\u5e02",pt:new Point(1.187051966E7,3060500.8),bd:cBD,lr:[5,9]},{n:"\\u516d\\u76d8\\u6c34\\u5e02",pt:new Point(1.167058944E7,3054081.9),bd:cBD,lr:[7,9]},{n:"\\u9075\\u4e49\\u5e02",pt:new Point(1.190392155E7,3195127.87),bd:cBD,lr:[7,9]},{n:"\\u5b89\\u987a\\u5e02",pt:new Point(1.179486899E7,3012140.6),bd:cBD,lr:[7,9]},{n:"\\u94dc\\u4ec1\\u5730\\u533a", pt:new Point(1.215250778E7,3190837.66),bd:cBD,lr:[7,9]},{n:"\\u9ed4\\u897f\\u5357\\u5e03\\u4f9d\\u65cf\\u82d7\\u65cf\\u81ea\\u6cbb\\u5dde",pt:new Point(1.167900108E7,2869017.96),bd:cBD,lr:[7,9]},{n:"\\u6bd5\\u8282\\u5730\\u533a",pt:new Point(1.172103141E7,3142281.31),bd:cBD,lr:[7,9]},{n:"\\u9ed4\\u4e1c\\u5357\\u82d7\\u65cf\\u4f97\\u65cf\\u81ea\\u6cbb\\u5dde",pt:new Point(1.202055046E7,3053190.16),bd:cBD,lr:[7,9]},{n:"\\u9ed4\\u5357\\u5e03\\u4f9d\\u65cf\\u82d7\\u65cf\\u81ea\\u6cbb\\u5dde",pt:new Point(1.197016471E7,3012312.19),bd:cBD, lr:[7,9]},{n:"\\u6606\\u660e\\u5e02",pt:new Point(1.14354367E7,2863224.69),bd:cBD,lr:[5,9]},{n:"\\u66f2\\u9756\\u5e02",pt:new Point(1.155538253E7,2918266.01),bd:cBD,lr:[7,9]},{n:"\\u7389\\u6eaa\\u5e02",pt:new Point(1.141628645E7,2779261.88),bd:cBD,lr:[7,9]},{n:"\\u4fdd\\u5c71\\u5e02",pt:new Point(1.103962837E7,2872619.83),bd:cBD,lr:[7,9]},{n:"\\u662d\\u901a\\u5e02",pt:new Point(1.154639116E7,3146685.98),bd:cBD,lr:[7,9]},{n:"\\u4e3d\\u6c5f\\u5e02",pt:new Point(1.115836761E7,3089380.29),bd:cBD,lr:[7,9]},{n:"\\u4e34\\u6ca7\\u5e02", pt:new Point(1.114163522E7,2721813.79),bd:cBD,lr:[7,9]},{n:"\\u695a\\u96c4\\u5f5d\\u65cf\\u81ea\\u6cbb\\u5dde",pt:new Point(1.130289047E7,2863837.49),bd:cBD,lr:[7,9]},{n:"\\u7ea2\\u6cb3\\u54c8\\u5c3c\\u65cf\\u5f5d\\u65cf\\u81ea\\u6cbb\\u5dde",pt:new Point(1.13805074E7,3740772.75),bd:cBD,lr:[7,9]},{n:"\\u6587\\u5c71\\u58ee\\u65cf\\u82d7\\u65cf\\u81ea\\u6cbb\\u5dde",pt:new Point(1.160607041E7,2660260.24),bd:cBD,lr:[7,9]},{n:"\\u666e\\u6d31\\u5e02",pt:new Point(1.124081051E7,2589692.16),bd:cBD,lr:[8,9]},{n:"\\u897f\\u53cc\\u7248\\u7eb3\\u50a3\\u65cf\\u81ea\\u6cbb\\u5dde", pt:new Point(1.122158475E7,2496986.94),bd:cBD,lr:[7,9]},{n:"\\u5927\\u7406\\u767d\\u65cf\\u81ea\\u6cbb\\u5dde",pt:new Point(1.116259344E7,2932487.29),bd:cBD,lr:[7,9]},{n:"\\u5fb7\\u5b8f\\u50a3\\u65cf\\u666f\\u9887\\u65cf\\u81ea\\u6cbb\\u5dde",pt:new Point(1.097526362E7,2789037.62),bd:cBD,lr:[7,9]},{n:"\\u6012\\u6c5f\\u5088\\u50f3\\u65cf\\u81ea\\u6cbb\\u5dde",pt:new Point(1.100507724E7,2963098.98),bd:cBD,lr:[7,9]},{n:"\\u8fea\\u5e86\\u85cf\\u65cf\\u81ea\\u6cbb\\u5dde",pt:new Point(1.109972407E7,3206846.47),bd:cBD,lr:[7,9]},{n:"\\u62c9\\u8428\\u5e02", pt:new Point(10143520,3437204.04),bd:cBD,lr:[5,9]},{n:"\\u660c\\u90fd\\u5730\\u533a",pt:new Point(1.08186096E7,3629569.73),bd:cBD,lr:[7,9]},{n:"\\u5c71\\u5357\\u5730\\u533a",pt:new Point(1.021725503E7,3384053.82),bd:cBD,lr:[7,9]},{n:"\\u65e5\\u5580\\u5219\\u5730\\u533a",pt:new Point(9895060.53,3389319.88),bd:cBD,lr:[7,9]},{n:"\\u90a3\\u66f2\\u5730\\u533a",pt:new Point(1.024898914E7,3672743.64),bd:cBD,lr:[7,9]},{n:"\\u963f\\u91cc\\u5730\\u533a",pt:new Point(9033914.88,3534099.27),bd:cBD,lr:[7,9]},{n:"\\u6797\\u829d\\u5730\\u533a", pt:new Point(1.050495382E7,3440916.27),bd:cBD,lr:[7,9]},{n:"\\u897f\\u5b89\\u5e02",pt:new Point(1.212685248E7,4041048.13),bd:cBD,lr:[5,9]},{n:"\\u94dc\\u5ddd\\u5e02",pt:new Point(1.212856149E7,4126022.53),bd:cBD,lr:[7,9]},{n:"\\u5b9d\\u9e21\\u5e02",pt:new Point(1.192768136E7,4054988.15),bd:cBD,lr:[7,9]},{n:"\\u54b8\\u9633\\u5e02",pt:new Point(1.210235668E7,4049604.29),bd:cBD,lr:[8,9]},{n:"\\u6e2d\\u5357\\u5e02",pt:new Point(1.219149518E7,4072416.28),bd:cBD,lr:[7,9]},{n:"\\u5ef6\\u5b89\\u5e02",pt:new Point(1.218921144E7, 4356570.08),bd:cBD,lr:[7,9]},{n:"\\u6c49\\u4e2d\\u5e02",pt:new Point(1.191463981E7,3881566.87),bd:cBD,lr:[7,9]},{n:"\\u6986\\u6797\\u5e02",pt:new Point(1.221646444E7,4593874.99),bd:cBD,lr:[7,9]},{n:"\\u5b89\\u5eb7\\u5e02",pt:new Point(1.213775212E7,3831579.1),bd:cBD,lr:[7,9]},{n:"\\u5546\\u6d1b\\u5e02",pt:new Point(1.223875885E7,3988163.54),bd:cBD,lr:[7,9]},{n:"\\u5170\\u5dde\\u5e02",pt:new Point(1.155916065E7,4284481.62),bd:cBD,lr:[5,9]},{n:"\\u5609\\u5cea\\u5173\\u5e02",pt:new Point(1.094239153E7,4806166.82),bd:cBD, lr:[8,9]},{n:"\\u91d1\\u660c\\u5e02",pt:new Point(1.137633355E7,4627477.91),bd:cBD,lr:[7,9]},{n:"\\u767d\\u94f6\\u5e02",pt:new Point(11593403,4350996.94),bd:cBD,lr:[7,9]},{n:"\\u5929\\u6c34\\u5e02",pt:new Point(1.177010649E7,4083646.7),bd:cBD,lr:[7,9]},{n:"\\u6b66\\u5a01\\u5e02",pt:new Point(1.14264471E7,4544105.57),bd:cBD,lr:[7,9]},{n:"\\u5f20\\u6396\\u5e02",pt:new Point(1.118285571E7,4684858.01),bd:cBD,lr:[7,9]},{n:"\\u5e73\\u51c9\\u5e02",pt:new Point(1.187473404E7,4213583.82),bd:cBD,lr:[7,9]},{n:"\\u9152\\u6cc9\\u5e02", pt:new Point(1.096513556E7,4801282.37),bd:cBD,lr:[7,9]},{n:"\\u5e86\\u9633\\u5e02",pt:new Point(1.198249448E7,4240364.21),bd:cBD,lr:[7,9]},{n:"\\u5b9a\\u897f\\u5e02",pt:new Point(1.164777893E7,4218809.12),bd:cBD,lr:[7,9]},{n:"\\u9647\\u5357\\u5e02",pt:new Point(1.168075314E7,3925419.77),bd:cBD,lr:[7,9]},{n:"\\u4e34\\u590f\\u56de\\u65cf\\u81ea\\u6cbb\\u5dde",pt:new Point(1.149023588E7,4221664.83),bd:cBD,lr:[7,9]},{n:"\\u7518\\u5357\\u85cf\\u65cf\\u81ea\\u6cbb\\u5dde",pt:new Point(1.145697069E7,4137705.18),bd:cBD,lr:[7,9]}, {n:"\\u897f\\u5b81\\u5e02",pt:new Point(1.133042455E7,4360836.12),bd:cBD,lr:[5,9]},{n:"\\u6d77\\u4e1c\\u5730\\u533a",pt:new Point(1.136772454E7,4345818.22),bd:cBD,lr:[7,9]},{n:"\\u6d77\\u5317\\u85cf\\u65cf\\u81ea\\u6cbb\\u5dde",pt:new Point(1.123307971E7,4407698.25),bd:cBD,lr:[7,9]},{n:"\\u9ec4\\u5357\\u85cf\\u65cf\\u81ea\\u6cbb\\u5dde",pt:new Point(1.136701869E7,4210804.21),bd:cBD,lr:[7,9]},{n:"\\u6d77\\u5357\\u85cf\\u65cf\\u81ea\\u6cbb\\u5dde",pt:new Point(1.120187652E7,4315364.9),bd:cBD,lr:[7,9]},{n:"\\u679c\\u6d1b\\u85cf\\u65cf\\u81ea\\u6cbb\\u5dde", pt:new Point(1.116006336E7,4068657.46),bd:cBD,lr:[7,9]},{n:"\\u7389\\u6811\\u85cf\\u65cf\\u81ea\\u6cbb\\u5dde",pt:new Point(1.080074697E7,3875570.18),bd:cBD,lr:[7,9]},{n:"\\u6d77\\u897f\\u8499\\u53e4\\u65cf\\u85cf\\u65cf\\u81ea\\u6cbb\\u5dde",pt:new Point(1.081693601E7,4468024.21),bd:cBD,lr:[7,9]},{n:"\\u94f6\\u5ddd\\u5e02",pt:new Point(1.183289883E7,4616373.5),bd:cBD,lr:[5,9]},{n:"\\u77f3\\u5634\\u5c71\\u5e02",pt:new Point(1.184171118E7,4698078.16),bd:cBD,lr:[7,9]},{n:"\\u5434\\u5fe0\\u5e02",pt:new Point(1.182282987E7,4553415.21), bd:cBD,lr:[7,9]},{n:"\\u56fa\\u539f\\u5e02",pt:new Point(1.182773154E7,4278231.51),bd:cBD,lr:[8,9]},{n:"\\u4e2d\\u536b\\u5e02",pt:new Point(1.17087377E7,4485946.9),bd:cBD,lr:[7,9]},{n:"\\u4e4c\\u9c81\\u6728\\u9f50\\u5e02",pt:new Point(9753667.88,5409369.63),bd:cBD,lr:[5,9]},{n:"\\u514b\\u62c9\\u739b\\u4f9d\\u5e02",pt:new Point(9450655.5,5683311.14),bd:cBD,lr:[7,9]},{n:"\\u5410\\u9c81\\u756a\\u5730\\u533a",pt:new Point(9929119.54,5277242.75),bd:cBD,lr:[7,9]},{n:"\\u54c8\\u5bc6\\u5730\\u533a",pt:new Point(1.041095095E7,5256019.72), bd:cBD,lr:[7,9]},{n:"\\u660c\\u5409\\u56de\\u65cf\\u81ea\\u6cbb\\u5dde",pt:new Point(9719944.71,5438088.99),bd:cBD,lr:[7,9]},{n:"\\u535a\\u5c14\\u5854\\u62c9\\u8499\\u53e4\\u81ea\\u6cbb\\u5dde",pt:new Point(9137172.41,5576651.41),bd:cBD,lr:[7,9]},{n:"\\u5df4\\u97f3\\u90ed\\u695e\\u8499\\u53e4\\u81ea\\u6cbb\\u5dde",pt:new Point(9590451.71,5097890.07),bd:cBD,lr:[7,9]},{n:"\\u963f\\u514b\\u82cf\\u5730\\u533a",pt:new Point(8935351.95,5009761.4),bd:cBD,lr:[7,9]},{n:"\\u5580\\u4ec0\\u5730\\u533a",pt:new Point(8459954.24,4762722.83),bd:cBD, lr:[7,9]},{n:"\\u548c\\u7530\\u5730\\u533a",pt:new Point(8898707.07,4429816.8),bd:cBD,lr:[7,9]},{n:"\\u4f0a\\u7281\\u54c8\\u8428\\u514b\\u81ea\\u6cbb\\u5dde",pt:new Point(9054161.44,5423973.33),bd:cBD,lr:[7,9]},{n:"\\u5854\\u57ce\\u5730\\u533a",pt:new Point(9238596.44,5870707.55),bd:cBD,lr:[7,9]},{n:"\\u963f\\u52d2\\u6cf0\\u5730\\u533a",pt:new Point(9812358.95,6050881.84),bd:cBD,lr:[7,9]},{n:"\\u77f3\\u6cb3\\u5b50\\u5e02",pt:new Point(9583272.07,5483579.8),bd:cBD,lr:[9,9]},{n:"\\u963f\\u62c9\\u5c14\\u5e02",pt:new Point(9049687.77, 4918103.23),bd:cBD,lr:[9,9]},{n:"\\u56fe\\u6728\\u8212\\u514b\\u5e02",pt:new Point(8802730.81,4819584.88),bd:cBD,lr:[9,9]},{n:"\\u4e94\\u5bb6\\u6e20\\u5e02",pt:new Point(9746120.75,5462086.91),bd:cBD,lr:[9,9]},{n:"\\u9999\\u6e2f\\u7279\\u522b\\u884c\\u653f\\u533a",pt:new Point(1.271433369E7,2538103.92),bd:cBD,lr:[5,9]},{n:"\\u6fb3\\u95e8\\u7279\\u522b\\u884c\\u653f\\u533a",pt:new Point(1.264258348E7,2514883.38),bd:cBD,lr:[5,9]}];for(var i=0,n=clickCityData[Tlength];i<n;i++)clickCityData[i].pt=MercatorProjection.convertMC2LL(clickCityData[i].pt); ');
_jsload&&_jsload('opmb', 'BMap.register(function(map){map.config.doubleTouchInterval=500;var firstTouch=false,firstTouchPosition,secondTouch=false,touchMoved=false,firstTouchEvent;var getEvent=function(type,domEvent){var mapEvent=new BaseEvent(type);var curTarget=domEvent.target;var overlay=null;var infoWindow=null;while(curTarget&&curTarget!=map.container){if(curTarget.hashCode){var instance=baidu.lang.instance(curTarget.hashCode);if(instance instanceof OverlayInternal&&curTarget.nodeName.toLowerCase()!="canvas")overlay= instance;if(instance instanceof InfoWindow)infoWindow=instance}curTarget=curTarget.offsetParent}var x=domEvent.changedTouches[0].pageX;var y=domEvent.changedTouches[0].pageY;var tempDom=map.container;while(tempDom&&tempDom!=Tdocument.body){x-=tempDom.offsetLeft;y-=tempDom.offsetTop;tempDom=tempDom.offsetParent}mapEvent[ToffsetX]=x;mapEvent[ToffsetY]=y;mapEvent["pixel"]=mapEvent.pixel=new Pixel(mapEvent[ToffsetX],mapEvent[ToffsetY]);mapEvent["point"]=mapEvent.point=map.pixelToPoint(mapEvent.pixel); mapEvent["overlay"]=mapEvent.overlay=overlay;mapEvent.infoWindow=infoWindow;return mapEvent};var setFirstTouch=function(e){firstTouch=true;firstTouchEvent=(new BaseEvent("ontouch")).inherit(e);firstTouchPosition=new Pixel(e.changedTouches[0].clientX,e.changedTouches[0].clientY);var eventEx=getEvent("onclickex",e);setTimeout(function(){clearFirstTouch();map.dispatchEvent(eventEx)},map.config.doubleTouchInterval);map.dispatchEvent(getEvent("onclick",e))};var clearFirstTouch=function(){if(firstTouch){firstTouch= false;firstTouchPosition=null;if(!secondTouch)map.dispatchEvent(firstTouchEvent)}};var setSecondTouch=function(e){secondTouch=true};var clearSecondTouch=function(){secondTouch=false};baidu.on(map.platform,"touchstart",function(e){stopAndPrevent(e);touchMoved=false;map.dispatchEvent(getEvent("ontouchstart",e).inherit(e))});baidu.on(map.platform,"touchmove",function(e){stopAndPrevent(e);touchMoved=true;map.dispatchEvent(getEvent("ontouchmove",e).inherit(e))});baidu.on(map.platform,"touchend",function(e){preventDefault(e); if(!touchMoved)if(firstTouch){setSecondTouch(e);map.dispatchEvent(getEvent("onclick",e));var curTouchPosition=new Pixel(e.changedTouches[0].clientX,e.changedTouches[0].clientY);var dis=getDistanceByPixel(firstTouchPosition,curTouchPosition);if(dis<20){map.dispatchEvent(getEvent("ondblclick",e));map.dispatchEvent((new BaseEvent("ondbltouch")).inherit(e))}else map.dispatchEvent(getEvent("ontouchend",e).inherit(e));clearFirstTouch();clearSecondTouch()}else setFirstTouch(e);map.dispatchEvent((new BaseEvent("ontouchend")).inherit(e))}); baidu.on(map.platform,"gesturestart",function(e){e.preventDefault();map.dispatchEvent((new BaseEvent("ongesturestart")).inherit(e))});baidu.on(map.platform,"gesturechange",function(e){e.preventDefault();map.dispatchEvent((new BaseEvent("ongesturechange")).inherit(e))});baidu.on(map.platform,"gestureend",function(e){e.preventDefault();map.dispatchEvent((new BaseEvent("ongestureend")).inherit(e))})}); BMap.register(function(map){var offset={x:0,y:0,scale:1};var last=[{x:0,y:0},{x:0,y:0}];var touchCount=0,preTouchCount=0,dragged=false,gesturechanged=false,singleTouchMoved=false;var getEvent=function(type,domEvent){var mapEvent=new BaseEvent(type);mapEvent[ToffsetX]=domEvent.changedTouches[0].clientX;mapEvent[ToffsetY]=domEvent.changedTouches[0].clientY;mapEvent.pixel=new Pixel(mapEvent[ToffsetX],mapEvent[ToffsetY]);mapEvent.point=map.pixelToPoint(mapEvent.pixel);return mapEvent};var _pos={};function getXYfromEvent(event){var pos= [],src;for(var t=0,len=event.touches[Tlength];t<len;t++){src=event.touches[t];pos.push({x:src.pageX,y:src.pageY})}return pos}function calculateScale(pos_start,pos_move){if(pos_start[Tlength]==2&&pos_move[Tlength]==2){var start_distance=getDistanceByPixel(pos_start[0],pos_start[1]);var end_distance=getDistanceByPixel(pos_move[0],pos_move[1]);return end_distance/start_distance}return 1}var platformStyle=map.platform.style;var setTransformOrigin=function(){var tempDom=map.container;var x=0,y=0;while(tempDom!= Tdocument.body){x+=tempDom.offsetLeft;y+=tempDom.offsetTop;tempDom=tempDom.offsetParent}if(iOS5){x=0;y=0}if(map.config.enableDragging)platformStyle.WebkitTransformOrigin=(last[0].x+last[1].x)/2-map[ToffsetX]-x+"px "+((last[0].y+last[1].y)/2-map[ToffsetY]-y)+"px";else platformStyle.WebkitTransformOrigin=TMath.round(map[Twidth]/2)+"px "+TMath.round(map[Theight]/2)+"px"};var updateTransform=function(){platformStyle.WebkitTransform=(map.config.enableDragging?"translate("+offset.x+"px, "+offset.y+"px) ": "")+(map.config.enablePinchToZoom?"scale("+offset.scale+") ":"")};var clearTransform=function(resetStyle){if(resetStyle)platformStyle.WebkitTransform="";offset.x=0;offset.y=0;offset.scale=1;offset.rotation=0;last[0].x=last[0].y=last[1].x=last[1].y=0;singleTouchMoved=false};map[TaddEventListener]("touchstart",function(e){if(e.overlay instanceof Marker)return;_pos.start=getXYfromEvent(e);var len=e.targetTouches[Tlength];touchCount+=len;if(touchCount>2)touchCount=2;var t=map.temp;if(len==2)t._lenIsTwo= true;if(t.dragAni)t.dragAni.stop();if(touchCount==1){this.temp._startX=offset.x;this.temp._startY=offset.y;last[0].x=e.targetTouches[0].clientX;last[0].y=e.targetTouches[0].clientY}else if(touchCount==2){last[1].x=e.targetTouches[len-1].clientX;last[1].y=e.targetTouches[len-1].clientY}});map[TaddEventListener]("touchmove",function(e){if(baidu.android>=4){_pos.move=getXYfromEvent(e);var scale=calculateScale(_pos.start,_pos.move);if(TMath.abs(1-scale)>0){offset.scale=scale;gesturechanged=true;setTransformOrigin()}}var len= e.targetTouches[Tlength];if(touchCount==1&&preTouchCount!=2){offset.x+=e.targetTouches[0].clientX-last[0].x;offset.y+=e.targetTouches[0].clientY-last[0].y;last[0].x=e.targetTouches[0].clientX;last[0].y=e.targetTouches[0].clientY;updateTransform();singleTouchMoved=true}if(touchCount==2){var last0={x:last[0].x,y:last[0].y};var last1={x:last[1].x,y:last[1].y};if(!singleTouchMoved){var touch1Pixel=new Pixel(e.targetTouches[0].clientX,e.targetTouches[0].clientY);var curPixel=new Pixel(last[0].x,last[0].y); if(len==1)if(getDistanceByPixel(curPixel,touch1Pixel)<30){last[0].x=e.targetTouches[0].clientX;last[0].y=e.targetTouches[0].clientY}else{singleTouchMoved=true;last[1].x=e.targetTouches[0].clientX;last[1].y=e.targetTouches[0].clientY}if(len==2){var touch2Pixel=new Pixel(e.targetTouches[1].clientX,e.targetTouches[1].clientY);if(getDistanceByPixel(touch1Pixel,touch2Pixel)<30){last[0].x=e.targetTouches[1].clientX;last[0].y=e.targetTouches[1].clientY}else if(getDistanceByPixel(curPixel,touch1Pixel)<getDistanceByPixel(curPixel, touch2Pixel)){last[0].x=e.targetTouches[0].clientX;last[0].y=e.targetTouches[0].clientY;last[1].x=e.targetTouches[1].clientX;last[1].y=e.targetTouches[1].clientY;singleTouchMoved=true}else{last[1].x=e.targetTouches[0].clientX;last[1].y=e.targetTouches[0].clientY;last[0].x=e.targetTouches[1].clientX;last[0].y=e.targetTouches[1].clientY;singleTouchMoved=true}}}else{for(var i=0;i<len;i++){var curPixel=new Pixel(e.targetTouches[i].clientX,e.targetTouches[i].clientY);if(getDistanceByPixel(curPixel,new Pixel(last[0].x, last[0].y))<getDistanceByPixel(curPixel,new Pixel(last[1].x,last[1].y))){last[0].x=curPixel.x;last[0].y=curPixel.y}else{last[1].x=curPixel.x;last[1].y=curPixel.y}}offset.x+=(last[0].x-last0.x+last[1].x-last1.x)/2;offset.y+=(last[0].y-last0.y+last[1].y-last1.y)/2;updateTransform()}}if(touchCount==1&&preTouchCount==2){for(var i=0;i<len;i++){var curPixel=new Pixel(e.targetTouches[i].clientX,e.targetTouches[i].clientY);if(getDistanceByPixel(curPixel,new Pixel(last[0].x,last[0].y))<getDistanceByPixel(curPixel, new Pixel(last[1].x,last[1].y))){offset.x+=curPixel.x-last[0].x;offset.y+=curPixel.y-last[0].y;last[0].x=curPixel.x;last[0].y=curPixel.y}else{offset.x+=curPixel.x-last[1].x;offset.y+=curPixel.y-last[1].y;last[1].x=curPixel.x;last[1].y=curPixel.y}}updateTransform()}if(touchCount==1&&this.config.enableDragging){var t=this.temp;if(!t._moved){t._moved=true;var dragstartEvent=getEvent("ondragstart",e);map.dispatchEvent(dragstartEvent);map.dispatchEvent(new BaseEvent("onmovestart"));t.dragStartPos=dragstartEvent.pixel; t.dragStartTime=getCurrentTime();dragged=true}t.lastDomMoveTime=getCurrentTime();map.dispatchEvent(new BaseEvent("ondragging"))}});map[TaddEventListener]("touchend",function(e){preTouchCount=touchCount;if(this.temp._lenIsTwo){touchCount=e.targetTouches[Tlength];delete this.temp._lenIsTwo}else touchCount--;if(touchCount==-1)touchCount=0;if(baidu.platform.isAndroid)touchCount=0;var me=this;if(touchCount==0){if(gesturechanged){var dZoom=0,zoomLevel=map.getZoom();if(me.config.enablePinchToZoom)dZoom= TMath.round(TMath.log(offset.scale)/TMath.log(2)),zoomLevel=TMath.max(TMath.min(map.getZoom()+dZoom,map.config.maxZoom),map.config.minZoom);var curPixel=map.pointToPixel(map.getCenter()),pixel=new Pixel(curPixel.x-offset.x/TMath.pow(2,dZoom),curPixel.y-offset.y/TMath.pow(2,dZoom)),point=map.config.enableDragging?map.pixelToPoint(pixel):map.getCenter();map.centerAndZoom(point,zoomLevel)}var moved=offset.x!=me.temp._startX||offset.y!=me.temp._startY;if(moved){if(dragged&&!gesturechanged){var dragendEvent= getEvent("ondragend",e);me.dispatchEvent(dragendEvent);map._processInertialDraggingForTouch(dragendEvent.pixel,{x:offset.x,y:offset.y});dragged=false}if(gesturechanged)clearTransform(true);else clearTransform(false)}map.temp._moved=false;gesturechanged=false;preTouchCount=0}});map[TaddEventListener]("gesturechange",function(e){offset.scale=e.scale;gesturechanged=true;setTransformOrigin()})}); Map[Tprototype]._processInertialDraggingForTouch=function(lastPos,offset){var me=this,platformStyle=me.platform.style;if(!me.config.enableInertialDragging){setTimeout(function(){platformStyle.WebkitTransform=""},0);setTimeout(function(){me._setPlatformPosition(me[ToffsetX]+offset.x,me[ToffsetY]+offset.y)},0);me.dispatchEvent(new BaseEvent("onmoveend"));return}var t=me.temp;var dragendTime=getCurrentTime();if(dragendTime-t.lastDomMoveTime>140){setTimeout(function(){platformStyle.WebkitTransform=""}, 0);setTimeout(function(){me._setPlatformPosition(me[ToffsetX]+offset.x,me[ToffsetY]+offset.y)},0);me.dispatchEvent(new BaseEvent("onmoveend"));t._moved=false;return}else{var initPix=t.dragStartPos,lastPix=lastPos,distance=getDistanceByPixel(initPix,lastPix),dir=[lastPix.x-initPix.x>0?1:-1,lastPix.y-initPix.y>0?1:-1],time=(dragendTime-t.dragStartTime)/1E3,v=distance/time/2,u=0.5,restTime=v/(2*u),restDis=0.5*restTime*v/1E3,dx=TMath.abs(initPix.x-lastPix.x),dy=TMath.abs(initPix.y-lastPix.y),moveX=0, moveY=0;if(dy==0)moveX=dx;else{var ratio=TMath.abs(initPix.x-lastPix.x)/TMath.abs(initPix.y-lastPix.y);moveY=TMath.round(TMath.sqrt(restDis*restDis/(1+ratio*ratio)));moveX=TMath.round(ratio*moveY)}if(dir[0]==-1)moveX=-moveX;if(dir[1]==-1)moveY=-moveY;if(t.dragAni)t.dragAni.stop();var rv=v/1E3,mapOffsetX=me[ToffsetX],mapOffsetY=me[ToffsetY];t.dragAni=new Animation({duration:restTime,fps:25,transition:function(t){var t=t*rv/(2*u);return rv*t-u*t*t},render:function(s){s=s*4*u/(rv*rv);platformStyle.WebkitTransform= "translate("+(offset.x+TMath.round(s*moveX))+"px ,"+(offset.y+TMath.round(s*moveY))+"px)"},finish:function(){t.dragAni=null;setTimeout(function(){platformStyle.WebkitTransform=""},0);setTimeout(function(){me._setPlatformPosition(mapOffsetX+offset.x+TMath.round(moveX),mapOffsetY+offset.y+TMath.round(moveY))},0);me.dispatchEvent(new BaseEvent("onmoveend"))},onStop:function(s){t.dragAni=null;s=s*4*u/(rv*rv);setTimeout(function(){platformStyle.WebkitTransform=""},0);setTimeout(function(){me._setPlatformPosition(mapOffsetX+ offset.x+TMath.round(s*moveX),mapOffsetY+offset.y+TMath.round(s*moveY))},0);me.dispatchEvent(new BaseEvent("onmoveend"))}})}};var iOS5=navigator.userAgent.indexOf("iPhone OS 5_")>-1?true:false; ');
_jsload&&_jsload('marker', 'baidu[Textend](OverlayInternal[Tprototype],{"initialize":function(map){this.map=map;this._addDom();this._bind();if(this._menu)this._menu.initialize(this.map,this);this.domElement.guid=this.guid;baidu.lang.Class.call(this,this.guid);if(!this._visible)baidu.dom.hide(this.domElement);return this.domElement},_bind:function(){if(!this.domElement)return;var me=this;var map=this.map;function eventExtend(e,be){var elem=e.srcElement||e.target;var x=e.clientX||e.pageX;var y=e.clientY||e.pageY;if(e&&be&&x&& y&&elem){var offset=baidu.dom.getPosition(map.container);var scroll=getScroll();be["pixel"]=be.pixel=new Pixel(x-offset.left+scroll[1],y-offset.top+scroll[0]);be["point"]=map.pixelToPoint(be.pixel);return be}else return be}baidu.on(this.domElement,"mouseover",function(e){if(!me._dragstarted)me.dispatchEvent(eventExtend(e,(new BaseEvent("onmouseover")).inherit(e)))});baidu.on(this.domElement,"mouseout",function(e){if(!me._dragstarted)me.dispatchEvent(eventExtend(e,(new BaseEvent("onmouseout")).inherit(e)))}); if(me._config.clickable){baidu.on(this.domElement,"touchstart",function(e){me._bind._touchStartPos=new Pixel(e.changedTouches[0].clientX,e.changedTouches[0].clientY)});baidu.on(this.domElement,"touchend",function(e){var curTime=getCurrentTime(),curPos=new Pixel(e.changedTouches[0].clientX,e.changedTouches[0].clientY);if(TMath.abs(curPos.x-me._bind._touchStartPos.x)>10||TMath.abs(curPos.y-me._bind._touchStartPos.y)>10){me._bind._touchStartPos=null;return}me.dispatchEvent(eventExtend(e,(new BaseEvent("onclick")).inherit(e))); if(curTime-me._dblclickTime<me.map.config.clickInterval)me.dispatchEvent(eventExtend(e,(new BaseEvent("ondblclick")).inherit(e)));me._dblclickTime=curTime});baidu.on(this.domElement,"click",function(e){var ee=e.srcElement||e.target;while(ee){if(ee==me.domElement){if(!(me instanceof Marker)||me instanceof Marker&&(!me._lastPt||me._lastPt&&me.getPosition().equals(me._lastPt)))me.dispatchEvent(eventExtend(e,(new BaseEvent("onclick")).inherit(e)));break}else if(me.map&&me.map.infoWindowDoms&&ee==me.map.infoWindowDoms.popDom)break; ee=ee[TparentNode]}});baidu.on(this.domElement,"dblclick",function(e){me.dispatchEvent(eventExtend(e,(new BaseEvent("ondblclick")).inherit(e)));stopAndPrevent(e)});if(!baidu.browser.firefox||baidu.browser.firefox<4)baidu.on(this.domElement,"contextmenu",function(e){me.dispatchEvent(eventExtend(e,(new BaseEvent("onrightclick")).inherit(e)))})}baidu.on(this.domElement,"mousedown",function(e){if(me instanceof Marker)me._lastPt=me.getPosition();me.dispatchEvent(eventExtend(e,(new BaseEvent("onmousedown")).inherit(e)))}); baidu.on(this.domElement,"mouseup",function(e){me.dispatchEvent(eventExtend(e,(new BaseEvent("onmouseup")).inherit(e)));if(baidu.browser.firefox>=4&&e.button==2&&me._config.clickable)me.dispatchEvent(eventExtend(e,(new BaseEvent("onrightclick")).inherit(e)))})},hide:function(){if(this._visible==false)return;this._visible=false;Overlay[Tprototype].hide.call(this);if(this.infoWindow&&this.infoWindow.overlay&&this.infoWindow.overlay==this)this.closeInfoWindow()},show:function(){if(this._visible==true)return; this._visible=true;Overlay[Tprototype].show.call(this)},setConfig:function(opts){if(!opts)return;for(var k in opts)if(typeof this._config[k]==typeof opts[k])this._config[k]=opts[k]},setZIndex:function(index){var me=this;me.zIndex=index;me._updateDomZIndex()},_updateDomZIndex:function(){var me=this,index;if(isDefined(me.zIndex))index=me.zIndex;else{index=0;if(me.map&&me.getPosition()){var lat=me.getPosition()?me.getPosition()["lat"]:0;index=Overlay.getZIndex(lat)+(me._config.baseZIndex||0)}}if(me.domElement)me.domElement.style.zIndex= index},addContextMenu:function(menu){this._menu=menu;if(this.map)menu.initialize(this.map,this)},removeContextMenu:function(){this._menu.remove();this._menu=null}});exportSymbol(OverlayInternalP,{"show":OverlayInternalP.show,"hide":OverlayInternalP.hide});var DEFAULT_ICON_HD=new Icon(MapConfig.imgPath+"marker_red_hd.png",new Size(23,25),{"anchor":new Size(10,25),"infoWindowAnchor":new Size(10,0),"imageSize":new Size(23,25)});var BMAP_ANIMATION_RAISEUP=3;var BMAP_ANIMATION_DROPDOWN=4;Marker.TOP_ZINDEX=Overlay.getZIndex(-90)+1E6;Marker.DRAG_ZINDEX=Marker.TOP_ZINDEX+1E6; Marker._getAnimationName=function(animation){if(Marker._cssAniNames[animation])return Marker._cssAniNames[animation];var aniNames=Marker._cssAniNames[animation]=["BMap_"+TMath.round(TMath.random()*1E4),"BMap_"+TMath.round(TMath.random()*1E4)];var anis=MarkerAnimations[animation];var style=Marker._styleElement;if(!style){style=Marker._styleElement=create("style",{type:"text/css"});Tdocument.getElementsByTagName("head")[0][TappendChild](style)}style.textContent+=Marker._generateAniCSS(anis.iconAnis, aniNames[0])+Marker._generateAniCSS(anis.shadowAnis,aniNames[1]);return Marker._cssAniNames[animation]}; Marker._generateAniCSS=function(animations,aniName){var cssTexts=["@-webkit-keyframes "+aniName+" {\\\\n"];baidu.array.each(animations,function(curAni){cssTexts.push(curAni.percent*100,"% { ");cssTexts.push("-webkit-transform: translate(",curAni.translate[0],"px,",curAni.translate[1],"px); ");cssTexts.push("-webkit-animation-timing-function: ",curAni.timingFunc,"; ");cssTexts.push("}\\\\n")});cssTexts.push("}\\\\n");return cssTexts.join("")}; Marker._addDragCrossImg=function(anchor,container){if(!Marker._dragCrossImg){Marker._dragCrossImg=create("img",{"src":MapConfig.imgPath+"drag_cross.png","width":13,"height":9});Marker._dragCrossImg.style[Tposition]="absolute";if(baidu.browser.ie==6){delete Marker._dragCrossImg;var div=Marker._dragCrossImg=create("div");var style=div.style;style[Tposition]="absolute";style[Twidth]="13px";style[Theight]="9px";style.filter=\'progid:DXImageTransform.Microsoft.AlphaImageLoader(sizingMethod=image,src="\'+ MapConfig.imgPath+"drag_cross.png"+\'")\'}}var style=Marker._dragCrossImg.style;style.left=anchor[Twidth]-6+"px";style.top=anchor[Theight]-5+"px";container[TappendChild](Marker._dragCrossImg)};Marker._removeDragCrossImg=function(){if(Marker._dragCrossImg&&Marker._dragCrossImg[TparentNode])Marker._dragCrossImg[TparentNode][TremoveChild](Marker._dragCrossImg)};Marker._cssAniNames=[];Marker._aniEndHandler=function(){this.style.WebkitAnimation=""}; baidu[Textend](Marker[Tprototype],{"initialize":function(map){this._initParam();OverlayInternal[Tprototype]["initialize"].call(this,map);if(!this._visible)baidu.dom.hide(this.siblingElement);if(map.highResolutionEnabled()&&this._config.icon==DEFAULT_ICON)this._config.icon=DEFAULT_ICON_HD;this.setPosition(this.point);this.setIcon(this._config.icon);this.setShadow(this._config.shadow);if(this._config.label&&this._cfgLabelEvent)this._config.label[TaddEventListener]("remove",this._cfgLabelEvent);this.setLabel(this._config.label); this.setTitle(this._config.title);this._initDrag();return this.domElement},_initParam:function(){if(this._init)return;this._init=true;this.domElement=null;this.shadowElement=null;this.siblingElement=null;this.iconDom=null;this._isDragging=false},_addDom:function(){var panes=this.map.getPanes();this.domElement=beforeEndHTML(panes.markerMouseTarget,this._msTargetRender());this.siblingElement=beforeEndHTML(panes.markerPane,this._markerRender());this.siblingElement.guid=this.guid},_msTargetRender:function(){var html= [\'<span class="BMap_Marker BMap_noprint" unselectable="on" \'];html.push(this._config.title?\'title="\'+this._config.title+\'"\':\'"\');html.push(\' style="position:absolute;padding:0;margin:0;border:0;width:0;height:0;-moz-user-select:none;\');html.push(this._config.clickable?"cursor:pointer;":"");html.push("background:url("+MapConfig.imgPath+"blank.gif);");html.push("width:"+this._config.icon.size[Twidth]+"px;");html.push("height:"+this._config.icon.size[Theight]+"px;");html.push(\'"></span>\');return html.join("")}, _markerRender:function(){var html=[\'<span class="BMap_Marker" unselectable="on" \'];html.push(\'style="position:absolute;padding:0;margin:0;border:0;\');html.push(\'width:0;height:0;-moz-user-select:none"></span>\');return html.join("")},_shadowRender:function(){var html=[\'<span unselectable="on" \'];html.push(\'style="position:absolute;padding:0;margin:0;border:0;\');html.push(\'width:0;height:0;-moz-user-select:none"></span>\');return html.join("")},"draw":function(){if(!this.domElement)return;var pixPos= this._getPixPos();this.domElement.style.left=pixPos[0].x+"px";this.domElement.style.top=pixPos[0].y+"px";if(this.siblingElement){this.siblingElement.style.left=pixPos[0].x+"px";this.siblingElement.style.top=pixPos[0].y+"px"}if(this.shadowElement){this.shadowElement.style.left=pixPos[1].x+"px";this.shadowElement.style.top=pixPos[1].y+"px"}if(this.infoWindow!=null&&this.infoWindow.isOpen())this.infoWindow.setPosition();this._updateDomZIndex()},_getPixPos:function(){var offset=this._config.offset||new Size(0, 0);var iconAnchor=this._config.icon[Tanchor]||new Size(0,0);var pix=this.map.pointToOverlayPixel(this.getPosition());var iconPix=new Pixel(pix.x+offset[Twidth]-iconAnchor[Twidth],pix.y+offset[Theight]-iconAnchor[Theight]);var re=[iconPix];if(this._config.shadow){var shadowIconAnchor=this._config.shadow[Tanchor]||new Size(0,0),shadowPix=new Pixel(pix.x+offset[Twidth]-shadowIconAnchor[Twidth],pix.y+offset[Theight]-shadowIconAnchor[Theight]);re[1]=shadowPix}return re},_draw:function(){if(this.map){this.domElement= this["initialize"](this.map);if(this._animation){this.setAnimation(this._animation);delete this._animation}}else delete this._animation},remove:function(){this.setAnimation(null);if(this.siblingElement&&this.siblingElement[TparentNode])this.siblingElement[TparentNode][TremoveChild](this.siblingElement);if(this.shadowElement&&this.shadowElement[TparentNode])this.shadowElement[TparentNode][TremoveChild](this.shadowElement);if(this.infoWindow&&this.infoWindow.overlay&&this.infoWindow.overlay===this){this.closeInfoWindow(); this.infoWindow=null}this.siblingElement=null;this.shadowElement=null;this.iconDom=null;this.shadowDom=null;if(this._config.label){var lbl=this._config.label;lbl[TremoveEventListener]("remove",this._cfgLabelEvent);baidu.lang.decontrol(lbl.guid);lbl.setMarker(null);lbl.domElement=null;lbl=this._config.label=null}OverlayInternal[Tprototype].remove.call(this)},hide:function(){OverlayInternal[Tprototype].hide.call(this);if(this.domElement)baidu.dom.hide(this.domElement);if(this.siblingElement)baidu.dom.hide(this.siblingElement); if(this.shadowElement)baidu.dom.hide(this.shadowElement)},show:function(){OverlayInternal[Tprototype].show.call(this);if(this.domElement)baidu.dom.show(this.domElement);if(this.siblingElement)baidu.dom.show(this.siblingElement);if(this.shadowElement)baidu.dom.show(this.shadowElement)},setIcon:function(icon){if(!(icon instanceof Icon))return;this._config.icon=icon;if(!this.map||!this.domElement||!this.siblingElement)return;var map=this.map;try{if(this.iconDom){this.siblingElement[TremoveChild](this.iconDom); this.iconDom=null}this.domElement.style[Twidth]=icon.size[Twidth]+"px";this.domElement.style[Theight]=icon.size[Theight]+"px"}catch(e){}if(this._config.icon){var iconDom=this.iconDom=create("div");var s=iconDom.style;s[Tposition]="absolute";s.padding=s.margin="0";s[Twidth]=icon.size[Twidth]+"px";s[Theight]=icon.size[Theight]+"px";s.overflow="hidden";iconDom.innerHTML=icon.getHTML();iconDom.galleryImg=false;this.siblingElement[TappendChild](this.iconDom)}this["draw"]()},setShadow:function(icon){if(!(icon instanceof Icon))return;this._config.shadow=icon;if(!this.map||!this.domElement||!this.siblingElement)return;if(!this.shadowElement)this.shadowElement=beforeEndHTML(this.map.getPanes().markerShadow,this._shadowRender());var map=this.map;try{if(this.shadowDom){this.shadowElement[TremoveChild](this.shadowDom);this.shadowDom=null}this.shadowElement.style[Twidth]=icon.size[Twidth]+"px";this.shadowElement.style[Theight]=icon.size[Theight]+"px"}catch(e){}if(this._config.shadow){var shadowDom=this.shadowDom=create("div"); var s=shadowDom.style;s[Tposition]="absolute";s.padding=s.margin="0";s[Twidth]=icon.size[Twidth]+"px";s[Theight]=icon.size[Theight]+"px";s.overflow="hidden";shadowDom.innerHTML=icon.getHTML();shadowDom.galleryImg=false;this.shadowElement[TappendChild](this.shadowDom)}this["draw"]()},setLabel:function(label){if(label&&label instanceof Label){var me=this;ModuleMgr.load("marker",function(){me._setLabel(label)},true)}},_setLabel:function(label){if(!(label instanceof Label))return;this._config.label=label; var me=this;if(!this._config.label._binded){this._config.label._binded=true;this._cfgLabelEvent=function(){me._config.label=null};this._config.label[TaddEventListener]("remove",this._cfgLabelEvent)}if(!this.map)return;label._i(this.map);if(label.domElement)this.siblingElement[TappendChild](label.domElement);else{label.domElement=beforeEndHTML(this.domElement,label.render());label.domElement.guid=label.guid}var style=label.domElement.style;style.left=label._config.offset[Twidth]+"px";style.top=label._config.offset[Theight]+ "px";label.setMarker(this)},_initDrag:function(){if(!this.domElement||this.domElement._binded)return;this.domElement._binded=true;var map=this.map,me=this,offsetX=0,offsetY=0,startTime=0,diff={x:0,y:0};function eventExtend(obj,be){be["pixel"]=be.pixel=obj.pixel;be["point"]=be.point=obj.point;return be}function getClientPosition(e){var clientX=e.clientX,clientY=e.clientY;if(e.changedTouches){clientX=e.changedTouches[0].clientX;clientY=e.changedTouches[0].clientY}return new Pixel(clientX,clientY)}this.dragStart= function(e){if(!me._config.enableDragging)return;if(e.button==2)return;me._isDragging=true;var pixel=map.pointToPixel(me.point);var clientPos=getClientPosition(e);offsetX=clientPos.x-pixel.x;offsetY=clientPos.y-pixel.y;startTime=getCurrentTime();me.map.temp._draggingMarker=me;baidu.on(document,"mousemove",me.dragIng);baidu.on(document,"mouseup",me.dragEnd);baidu.on(document,"touchmove",me.dragIng);baidu.on(document,"touchend",me.dragEnd);if(me.domElement&&me.domElement.setCapture)me.domElement.setCapture(); me.domElement.style.cursor=me._config.draggingCursor;if(e.type=="touchstart")stopBubble(e)};this.dragIng=function(e){if(!me._isDragging)return;var clientPos=getClientPosition(e);var pixel=new Pixel(clientPos.x-offsetX,clientPos.y-offsetY);diff=pixel;me._draggingMovePixel=pixel;if(me._config.restrictDraggingArea&&pixel.x>15&&pixel.x<me.map[Twidth]-15&&pixel.y>30&&pixel.y<me.map[Theight]-15||!me._config.restrictDraggingArea){var point=me.map.pixelToPoint(pixel),eventObj={pixel:pixel,point:point};me._panByX= me._panByY=0;if(pixel.x<=20||pixel.x>=me.map[Twidth]-20||pixel.y<=50||pixel.y>=me.map[Theight]-10){if(pixel.x<=20)me._panByX=8;else if(pixel.x>=me.map[Twidth]-20)me._panByX=-8;if(pixel.y<=50)me._panByY=8;else if(pixel.y>=me.map[Theight]-10)me._panByY=-8;if(!me._draggingMoveTimer)me._draggingMoveTimer=setInterval(function(){map.panBy(me._panByX,me._panByY,{"noAnimation":true});var point=map.pixelToPoint(me._draggingMovePixel);me.setPosition(point)},30)}else{if(me._draggingMoveTimer){clearInterval(me._draggingMoveTimer); me._draggingMoveTimer=null}me.setPosition(point)}if(!me._dragstarted){me.dispatchEvent(eventExtend(eventObj,new BaseEvent("ondragstart")));me._dragstarted=true;if(me._config.raiseOnDrag){me.setAnimation(BMAP_ANIMATION_RAISEUP);Marker._addDragCrossImg(me._config.icon.anchor,me.siblingElement)}}me.dispatchEvent(eventExtend(eventObj,new BaseEvent("ondragging")))}};this.dragEnd=function(e){if(me.domElement&&me.domElement.releaseCapture)me.domElement.releaseCapture();me._isDragging=false;me.map.temp._draggingMarker= null;baidu.un(document,"mousemove",me.dragIng);baidu.un(document,"mouseup",me.dragEnd);baidu.un(document,"touchmove",me.dragIng);baidu.un(document,"touchend",me.dragEnd);offsetX=offsetY=0;if(me._draggingMoveTimer){clearInterval(me._draggingMoveTimer);me._draggingMoveTimer=null}if(getCurrentTime()-startTime>=100&&(diff.x>2||diff.y>2)){me._dragstarted=false;me.dispatchEvent(eventExtend({pixel:me.map.pointToPixel(me.getPosition()),point:me.getPosition()},new BaseEvent("ondragend")));if(me._config.raiseOnDrag){me.setAnimation(BMAP_ANIMATION_DROPDOWN); Marker._removeDragCrossImg()}diff.x=diff.y=0}me._updateDomZIndex();if(me.domElement)me.domElement.style.cursor=me._config.clickable?"pointer":""};baidu.on(this.domElement,"mousedown",this.dragStart);baidu.on(this.domElement,"touchstart",this.dragStart)},setPosition:function(point){if(point instanceof Point){this.point=this._config.point=new Point(point["lng"],point["lat"]);this["draw"]()}},_updateDomZIndex:function(){var me=this,index;if(me._isDragging==true)index=Marker.DRAG_ZINDEX;else if(me._config.isTop== true)index=Marker.TOP_ZINDEX+(me._addi||0);else if(isDefined(me.zIndex))index=me.zIndex;else{index=0;if(me.map&&me.getPosition())index=Overlay.getZIndex(me.getPosition()["lat"])+me._config.baseZIndex}if(me.domElement)me.domElement.style.zIndex=index;if(me.siblingElement)me.siblingElement.style.zIndex=index},setTop:function(top,addi){this._config.isTop=!!top;if(top)this._addi=addi||0;this._updateDomZIndex()},setTitle:function(title){this._config.title=title+"";if(this.domElement)this.domElement.title= this._config.title},setOffset:function(offset){if(!(offset instanceof Size))return;this._config.offset=offset;this.setPosition(this.getPosition())},setAnimation:function(animation){var me=this;ModuleMgr.load("markeranimation",function(){me._setAnimation(animation)},true)},_setAnimation:function(animation){if(!this.iconDom)return;this._clearAnimation(animation!=null);var anis=MarkerAnimations[animation];if(!anis)return;var forceJS=anis?anis.options.useJS:false;!isMobile()||forceJS?this._execJSAnimation(animation): this._execCSSAnimation(animation)},_clearAnimation:function(newAniCome){this._clearCSSAni(this.iconDom);this._clearCSSAni(this.shadowDom);if(newAniCome){if(this._aniObj){this._aniObj.stop();this._aniObj=null}this.iconDom.style.top=this.iconDom.style.left="0px";if(this.shadowDom)this.shadowDom.style.top=this.shadowDom.style.left="0px"}else if(this._aniObj){var me=this;this._aniObj.setFinishCallback(function(){me._aniObj=null})}},_execCSSAnimation:function(animation){var anis=MarkerAnimations[animation]; var aniNames=Marker._getAnimationName(animation);this._setCSSAniStyle(this.iconDom,aniNames[0],anis);this._setCSSAniStyle(this.shadowDom,aniNames[1],anis)},_clearCSSAni:function(elem){if(elem){elem.style.WebkitAnimation="";baidu.un(elem,"webkitAnimationEnd",Marker._aniEndHandler)}},_setCSSAniStyle:function(elem,aniName,anis){if(elem){baidu.on(elem,"webkitAnimationEnd",Marker._aniEndHandler);elem.style.WebkitAnimation=aniName+" "+anis.options.duration+"ms"+(anis.options.loop==Animation.INFINITE?" infinite": "")}},_execJSAnimation:function(animation){var iconStyle=this.iconDom.style;var useShadowAni=false;var shadowStyle;if(this.shadowDom){useShadowAni=true;shadowStyle=this.shadowDom.style}var anis=MarkerAnimations[animation];var me=this;var numAnis=anis.iconAnis[Tlength],totalDuration=anis.options.duration,bootAni=me._aniObj=new Animation({duration:0,delay:Animation.INFINITE});var iconAnis=anis.iconAnis;var shadowAnis=anis.shadowAnis;iconStyle.top=iconAnis[0].translate[1]+"px";if(useShadowAni){shadowStyle.left= shadowAnis[0].translate[0]+"px";shadowStyle.top=shadowAnis[0].translate[1]+"px"}for(var i=1;i<numAnis;i++)(function(){var curTranslate=[iconAnis[i].translate[0]-iconAnis[i-1].translate[0],iconAnis[i].translate[1]-iconAnis[i-1].translate[1]];var initTranslate=[iconAnis[i-1].translate[0],iconAnis[i-1].translate[1]];if(useShadowAni){var curShadowTranslate=[shadowAnis[i].translate[0]-shadowAnis[i-1].translate[0],shadowAnis[i].translate[1]-shadowAnis[i-1].translate[1]];var initShadowTranslate=[shadowAnis[i- 1].translate[0],shadowAnis[i-1].translate[1]]}var curTimingFunc=Transitions[iconAnis[i-1].timingFunc];var finishFunc=function(){};if(i==numAnis-1)if(anis.options.loop!=Animation.INFINITE)finishFunc=function(){me._aniObj=null};else finishFunc=function(){me._aniObj.start()};bootAni.add(new Animation({duration:(anis.iconAnis[i].percent-iconAnis[i-1].percent)*totalDuration,fps:40,delay:Animation.INFINITE,transition:curTimingFunc,render:function(s){if(me.iconDom)me.iconDom.style.top=initTranslate[1]+TMath.round(s* curTranslate[1])+"px";if(useShadowAni&&me.shadowDom){me.shadowDom.style.left=initShadowTranslate[0]+TMath.round(s*curShadowTranslate[0])+"px";me.shadowDom.style.top=initShadowTranslate[1]+TMath.round(s*curShadowTranslate[1])+"px"}},finish:finishFunc}))})();bootAni.start()}}); exportSymbol(MarkerP,{"setIcon":MarkerP.setIcon,"setPosition":MarkerP.setPosition,"setOffset":MarkerP.setOffset,"setLabel":MarkerP.setLabel,"setTitle":MarkerP.setTitle,"setTop":MarkerP.setTop,"setAnimation":MarkerP.setAnimation,"setShadow":MarkerP.setShadow,"show":MarkerP.show,"hide":MarkerP.hide,"remove":MarkerP.remove});Icon[Tprototype].getHTML=function(){var result="",htmls="",imageUrl=this["imageUrl"],imageOffset=this["imageOffset"],imageSize=this["imageSize"];if(baidu.browser.ie==6&&imageUrl.toLowerCase().indexOf(".png")>0){var htmls=["<div"];if(this["printImageUrl"])htmls.push(\' class="BMap_noprint"\');htmls.push(\' style="width: 1px; height: 1px;\');htmls.push("; left:"+imageOffset[Twidth]+"px");htmls.push("; top:"+imageOffset[Theight]+"px");htmls.push("; filter:progid:DXImageTransform.Microsoft.AlphaImageLoader(sizingMethod=image,src=\'"+ imageUrl+"\')");htmls.push(\'; position:absolute;"></div>\');if(this["printImageUrl"]){htmls.push(\'<img class="BMap_noscreen" style="border:none;left:\'+imageOffset[Twidth]+"px;");htmls.push("top:"+imageOffset[Theight]+\'px;position:absolute" src="\'+this["printImageUrl"]+\'" />\')}result=htmls.join("")}else{htmls=[\'<img src="\',imageUrl,\'" style="border:none;left:\'+imageOffset[Twidth]+"px","; top:"+imageOffset[Theight]+"px","; position:absolute;"];if(imageSize)htmls.push("; width:"+imageSize[Twidth]+"px; height:"+ imageSize[Theight]+"px;");htmls.push(\'" />\');result=htmls.join("")}return result};baidu[Textend](Label[Tprototype],{_addDom:function(){var config=this._config;var content=this.content;var label=create("label",{"class":"BMapLabel","unselectable":"on"});if(config.title)label.title=config.title;var s=label.style;s[Tposition]="absolute";s.MozUserSelect="none";if(config[Twidth]==0||config[Twidth]=="auto")s.display="inline";else{s[Twidth]=config[Twidth]+"px";s.display="block";s.overflow="hidden"}if(config.clickable=="true")s.cursor="pointer";else if(!baidu.browser.ie)s.cursor="inherit"; label.innerHTML=content;this.map.getPanes().labelPane[TappendChild](label);this.domElement=label;this.setStyle(config.styles);return label},setPosition:function(point){if(point instanceof Point&&!this.getMarker()){this.point=this._config[Tposition]=new Point(point["lng"],point["lat"]);this["draw"]()}},"draw":function(){if(this.domElement&&this.getPosition()&&!this.getMarker()){var offset=this._config.offset||new Size(0,0);var pix=this.map.pointToOverlayPixel(this.getPosition());this.domElement.style.left= pix.x+offset[Twidth]+"px";this.domElement.style.top=pix.y+offset[Theight]+"px";this._updateDomZIndex()}},_draw:function(){if(this.map&&!this._marker){this.domElement=this["initialize"](this.map);this["draw"]()}},setContent:function(content){this.content=content;if(this.domElement)this.domElement.innerHTML=content},setOpacity:function(opacity){if(opacity>=0&&opacity<=1)this._config.opacity=opacity;if(this.domElement){var st=this.domElement.style;st.opacity=opacity;st.filter="alpha(opacity="+opacity* 100+")"}},setOffset:function(size){if(!(size instanceof Size))return;this._config.offset=new Size(size[Twidth],size[Theight]);if(this.getMarker()&&this.domElement){this.domElement.style.left=size[Twidth]+"px";this.domElement.style.top=size[Theight]+"px"}else this["draw"]()},setStyle:function(styles){styles=styles||{};this._config.styles=baidu[Textend](this._config.styles,styles);if(this.domElement)for(var rule in styles)try{this.domElement.style[rule]=styles[rule]}catch(e){}},setTitle:function(title){this._config.title= title+"";if(this.domElement)this.domElement.title=this._config.title}});exportSymbol(LabelP,{"setStyle":LabelP.setStyle,"setContent":LabelP.setContent,"setPosition":LabelP.setPosition,"setOffset":LabelP.setOffset,"setTitle":LabelP.setTitle}); ');
_jsload&&_jsload('tile', 'baidu[Textend](TileMgr[Tprototype],{initialize:function(){var me=this,map=me.map;map[TaddEventListener]("loadcode",function(){me.loadTiles()});map[TaddEventListener]("addtilelayer",function(e){me.addTileLayer(e)});map[TaddEventListener]("removetilelayer",function(e){me.removeTileLayer(e)});map[TaddEventListener]("setmaptype",function(e){me.setMapType(e)});map[TaddEventListener]("zoomstartcode",function(e){me._zoom(e)});me._addOtherEvt(map)},loadTiles:function(){var me=this;if(baidu.browser.ie)try{Tdocument.execCommand("BackgroundImageCache", false,true)}catch(e){}if(me.zoomsDiv)baidu.dom.hide(me.zoomsDiv);if(!this.loaded){me.initMapTypeTiles();this.loaded=true}me.moveGridTiles()},_asyncLoadTiles:function(){var me=this,map=me.map;me._addOtherEvt(map);me.loadTiles()},_addOtherEvt:function(map){var me=this;map[TaddEventListener]("mousewheel",function(e){me.mouseWheel(e)});map[TaddEventListener]("dblclick",function(e){me.dblClick(e)});map[TaddEventListener]("rightdblclick",function(e){me.dblClick(e)});map[TaddEventListener]("minuspress", function(e){me.keypress(e)});map[TaddEventListener]("pluspress",function(e){me.keypress(e)});map[TaddEventListener]("moving",function(e){me.moveGridTiles()});map[TaddEventListener]("resize",function(e){me.moveGridTiles()})},addTileLayer:function(e){var me=this;var tilelayer=e.target;for(var i=0;i<me.tileLayers[Tlength];i++)if(me.tileLayers[i]==tilelayer)return;me.tileLayers.push(tilelayer);tilelayer.initialize(this.map,this._normalLayerContainer);if(me.map.loaded)me.moveGridTiles()},removeTileLayer:function(e){var me= this;var tilelayer=e.target;var mapType=tilelayer.mapType;var mapTiles=me.mapTiles;var bufTiles=me.bufferTiles;for(var tileName in bufTiles){var guid=tileName.split("-")[1];if(guid==tilelayer.guid)delete bufTiles[tileName]}for(var tileName in mapTiles){var guid=tileName.split("-")[1];if(guid==tilelayer.guid)delete mapTiles[tileName]}for(var i=0,l=me.tileLayers[Tlength];i<l;i++)if(tilelayer==me.tileLayers[i])me.tileLayers.splice(i,1);tilelayer.remove();me.moveGridTiles()},mouseWheel:function(e){var map= this.map;if(!map.config.enableWheelZoom)return;var level=map.zoomLevel+(e.trend==true?1:-1);var zoomInfo=map._getProperZoom(level);if(zoomInfo.exceeded)return;map.dispatchEvent(new BaseEvent("onzoomstart"));map.lastLevel=map.zoomLevel;map.zoomLevel=zoomInfo.zoom;var opx=e.pixel;var opt=this._getMercatorCenter(opx);zoomUnits=map.getMapType().getZoomUnits(map.getZoom());map.mercatorCenter=new Point(opt["lng"]+(map[Twidth]/2-opx.x)*zoomUnits,opt["lat"]-(map[Theight]/2-opx.y)*zoomUnits);map.centerPoint= map.projection.mercatorToLngLat(map.mercatorCenter,map.currentCity);this.zoom(opx)},dblClick:function(e){var map=this.map;if(!map.config.enableDblclickZoom)return;var opx=e.pixel;var dir=1;var center=opx;var offset=new Size(0,0);if(e.type=="onrightdblclick"){dir=-1;center=new Pixel(map[Twidth]/2,map[Theight]/2)}var level=map.zoomLevel+dir;var zoomInfo=map._getProperZoom(level);if(!zoomInfo.exceeded){map.dispatchEvent(new BaseEvent("onzoomstart"));map.lastLevel=map.zoomLevel;map.zoomLevel=zoomInfo.zoom; if(dir==1){map.mercatorCenter=this._getMercatorCenter(opx);map.centerPoint=map.projection.mercatorToLngLat(map.mercatorCenter,map.currentCity);var r=map.getMapType().getZoomUnits(map.lastLevel)/map.getMapType().getZoomUnits(zoomInfo.zoom)*0.5;offset[Twidth]=opx.x-TMath.round(map[Twidth]/2)*r;offset[Theight]=opx.y-TMath.round(map[Theight]/2)*r}this.zoom(center,offset)}else if(dir==1){var pt=map.pixelToPoint(opx);map.panTo(pt)}},keypress:function(e){var map=this.map;if(!map.config.enableContinuousZoom){e.type== "onpluspress"?map.zoomIn():map.zoomOut();return}if(this._zTimeLine)return;var level=map.zoomLevel+(e.type=="onpluspress"?1:-1);var zoomInfo=map._getProperZoom(level);if(zoomInfo.exceeded)return;map.dispatchEvent(new BaseEvent("onzoomstart"));var center=new Pixel(map[Twidth]/2,map[Theight]/2);map.lastLevel=map.zoomLevel;map.zoomLevel=zoomInfo.zoom;if(map.getInfoWindow()){center=map.pointToPixel(map.getInfoWindow().getPosition(),map.lastLevel);var opt=map.pixelToPoint(center,map.lastLevel);map._updateCenterPoint(map[Twidth]/ 2-center.x,map[Theight]/2-center.y,opt,true)}this.zoom(center)},_getMercatorCenter:function(opx){var map=this.map;var mapCenter=map.mercatorCenter;var zoomUnits=map.getMapType().getZoomUnits(map.lastLevel);var lng=mapCenter["lng"]+zoomUnits*(opx.x-map[Twidth]/2);var lat=mapCenter["lat"]-zoomUnits*(opx.y-map[Theight]/2);return new Point(lng,lat)},zoom:function(centerPx,offset){var dx=offset?offset[Twidth]:0;var dy=offset?offset[Theight]:0;var map=this.map;var mapConfig=map.config;var me=this;var center= {x:centerPx.x-TparseInt(me.tilesDiv.style.left)-map[ToffsetX],y:centerPx.y-TparseInt(me.tilesDiv.style.top)-map[ToffsetY]};if(map.overlayDiv)baidu.dom.hide(map.overlayDiv);var tilelayer;me._normalLayerContainer.style.visibility="hidden";this._showAvatarDivs();me._mapTypeLayerContainer.style.visibility="hidden";var info=[];var diff=map.zoomLevel-map.lastLevel;if(!me._diff)me._diff=diff;else if(map.zoomLevel-map.lastLevel>0)me._diff++;else me._diff--;if(this._zTimeLine&&this._zTimeLine.schedule==0){this._zTimeLine.stop(); this._zTimeLine=null;diff=me._diff}if((!offset||offset[Twidth]==0&&offset[Theight]==0)&&mapConfig.enableContinuousZoom)map.temp.zoomer.action(centerPx,diff>0?true:false);var xi=TMath.pow(2,diff);var zoomsDiv=this.zoomsDiv;var zoomsDivStyle=zoomsDiv.style;zoomsDivStyle.visibility="";var len=zoomsDiv.children[Tlength];for(var i=len-1;i>-1;i--){var p={};var st=zoomsDiv.children[i].style;p.top=TparseInt(st.top)||0;p.left=TparseInt(st.left)||0;p[Twidth]=TparseInt(st[Twidth]);p[Theight]=TparseInt(st[Theight]); p.dw=p[Twidth]*xi-p[Twidth];p.dh=p[Theight]*xi-p[Theight];p.dx=(p.left-center.x)*xi-(p.left-center.x);p.dy=(p.top-center.y)*xi-(p.top-center.y);info[i]=p}zoomsDiv._ol=TparseInt(zoomsDiv.style.left);zoomsDiv._ot=TparseInt(zoomsDiv.style.top);if(this._zTimeLine){this._zTimeLine.stop();this._zTimeLine=null}this._zTimeLine=new Animation({fps:20,duration:mapConfig.enableContinuousZoom?mapConfig.zoomerDuration:1,transition:Transitions.easeInQuad,render:function(schedule){if(schedule<0.1)return;for(var i= info[Tlength]-1;i>-1;i--){var op=info[i];if(zoomsDiv.children[i]){var st=zoomsDiv.children[i].style;st.top=TMath.round(op.top+op.dy*schedule)+"px";st.left=TMath.round(op.left+op.dx*schedule)+"px";st[Twidth]=TMath.ceil(op[Twidth]+op.dw*schedule)+"px";st[Theight]=TMath.ceil(op[Theight]+op.dh*schedule)+"px"}}if(dx||dy){zoomsDivStyle.left=zoomsDiv._ol-dx*schedule+"px";zoomsDivStyle.top=zoomsDiv._ot-dy*schedule+"px"}},finish:function(){me.moveGridTiles();if(map.overlayDiv)if(baidu.browser.ie&&baidu.browser.ie< 8||Tdocument.compatMode=="BackCompat")baidu.dom.show(map.overlayDiv);else setTimeout(function(){baidu.dom.show(map.overlayDiv)},100);me._normalLayerContainer.style.visibility="";me._mapTypeLayerContainer.style.visibility="";delete me._diff;map.dispatchEvent(new BaseEvent("onzoomend"));me._removeAvatarDivs();zoomsDiv=null;me._zTimeLine=null}})},setMapType:function(e){var me=this;var map=me.map;this._showAvatarDivs(true);map[TaddEventListener]("tilesloaded",function(){setTimeout(function(){me._removeAvatarDivs()}, 200);map[TremoveEventListener]("tilesloaded",arguments.callee)});for(var tileName in this.mapTiles)this.hideTile(this.mapTiles[tileName]);for(var tileName in this.bufferTiles)this.hideTile(this.bufferTiles[tileName]);var layers=this.mapTypeLayers;for(var i=0,l=layers[Tlength];i<l;i++)layers[i].remove();delete this.tilesDiv;this.mapTypeLayers=[];this.bufferTiles=this.mapTiles={};this.initMapTypeTiles();this.moveGridTiles()},_showAvatarDivs:function(genAllMapLayer){var map=this.map;genAllMapLayer=genAllMapLayer|| false;if(!this.zoomsDiv)if(!genAllMapLayer)this.zoomsDiv=this.tilesDiv.cloneNode(true);else this.zoomsDiv=this._mapTypeLayerContainer.cloneNode(true);else if(this.zoomsDiv[TparentNode]&&!this._zTimeLine){this.zoomsDiv[TparentNode][TremoveChild](this.zoomsDiv);this.zoomsDiv=null;if(!genAllMapLayer)this.zoomsDiv=this.tilesDiv.cloneNode(true);else this.zoomsDiv=this._mapTypeLayerContainer.cloneNode(true)}var zoomsDiv=this.zoomsDiv,zoomsDivStyle=zoomsDiv.style;zoomsDivStyle.display="";zoomsDivStyle.zIndex= zoomsDivStyle.zIndex-100;map.platform.insertBefore(zoomsDiv,map.platform.firstChild)},_removeAvatarDivs:function(){var me=this;if(me.zoomsDiv){purge(me.zoomsDiv);if(me.zoomsDiv[TparentNode]){me.zoomsDiv[TparentNode][TremoveChild](me.zoomsDiv);me.zoomsDiv.innerHTML="";me.zoomsDiv=null}}}}); ');
_jsload&&_jsload('infowindow', 'baidu[Textend](InfoWindow[Tprototype],{"initialize":function(overlay){var map=this.map=overlay.map;this.overlay=overlay;this.render();this._bind();if(this._config.enableMaximize)this.enableMaximize();else this.disableMaximize();this.setTitle(this._config.title);this.setContent(this.content,true);if(this._config.ifMaxScene)this.setMaxScene(true);this.redraw(null,true);var bubble=map.infoWindowDoms;if(bubble)if(overlay instanceof Marker)bubble.marker=overlay;else bubble.marker=null},render:function(){var map= this.map,me=this,infoWndDoms=map.infoWindowDoms,imgPath=me.IMG_PATH;if(!infoWndDoms){infoWndDoms=map.infoWindowDoms={};map.infoWindow=map.infoWindowDoms;var html=[\'<div class="BMap_shadow" style="position: absolute;display:none" type="infowindow_shadow">\'];html.push(\'<div><img onmousedown="return false" style="left: -323px; top: 0px;" src="\'+imgPath+\'iws3.png"/></div>\');html.push(\'<div><img onmousedown="return false" style="left: -393px; top: 0px;" src="\'+imgPath+\'iws3.png"/></div>\');html.push(\'<div><img onmousedown="return false" style="left: -1033px; top: 0px;" src="\'+ imgPath+\'iws3.png"/></div>\');html.push(\'<div><img onmousedown="return false" style="top: -30px;" src="\'+imgPath+\'iws3.png"/></div>\');html.push(\'<div><img onmousedown="return false" style="left: -360px; top: -30px;" src="\'+imgPath+\'iws3.png"/></div>\');html.push(\'<div><img onmousedown="return false" style="top: -30px;" src="\'+imgPath+\'iws3.png"/></div>\');html.push(\'<div><img onmousedown="return false" style="left: -14px; top: -310px;" src="\'+imgPath+\'iws3.png"/></div>\');html.push(\'<div><img onmousedown="return false" style="left: -255px; top: -310px;" src="\'+ imgPath+\'iws3.png"/></div>\');html.push(\'<div><img onmousedown="return false" style="left: -440px; top: -310px;" src="\'+imgPath+\'iws3.png"/></div>\');html.push(\'<div><img onmousedown="return false" style="left: -255px; top: -310px;" src="\'+imgPath+\'iws3.png"/></div>\');html.push(\'<div><img onmousedown="return false" style="left: -754px; top: -310px;" src="\'+imgPath+\'iws3.png"/></div>\');html.push("</div>");html.push(\'<div class="BMap_pop" style="position:absolute;display:none;cursor:default">\');html.push(\'<div><div style="background:#fff;border-top:1px solid #ababab;border-left:1px solid #ababab;width:30px;height:30px;"></div></div>\'); html.push(\'<div class="BMap_top"></div>\');html.push(\'<div><div style="position:absolute;top:0;left:-6px;background:#fff;border-top:1px solid #ababab;border-right:1px solid #ababab;width:30px;height:30px;"></div></div>\');html.push(\'<div class="BMap_center"></div>\');html.push(\'<div><div style="position:absolute;top:-6px;left:0;background:#fff;border-bottom:1px solid #ababab;border-left:1px solid #ababab;width:30px;height:30px;"></div></div>\');html.push(\'<div class="BMap_bottom"></div>\');html.push(\'<div><div style="position:absolute;top:-6px;left:-6px;background:#fff;border-right:1px solid #ababab;border-bottom:1px solid #ababab;width:30px;height:30px;"></div></div>\'); html.push(\'<div><img style="border:none;margin:0px;padding:0px;position:absolute;left:-186px;top:-691px;max-width:none; width:690px;height:786px;" src="\'+imgPath+\'iw3.png"/></div>\');html.push(\'<div style="overflow-y:hidde;overflow-x:hidde;width:auto;height:auto;position:absolute;left:16px; top:16px;z-index:10;"></div>\');html.push("</div>");infoWndDoms.popDom=beforeEndHTML(map.platform,html.join(""));infoWndDoms.shadowDom=infoWndDoms.popDom.previousSibling;infoWndDoms.popDivs=infoWndDoms.popDom.children; infoWndDoms.shadowDivs=infoWndDoms.shadowDom.getElementsByTagName("div");infoWndDoms.contentMain=infoWndDoms.popDivs[8];infoWndDoms.titleDiv=beforeEndHTML(infoWndDoms.popDivs[8],\'<div class="BMap_bubble_title" style="display:block;overflow:hidden;height:24px;line-height:24px;white-space:nowrap"></div>\');infoWndDoms.contentDiv=beforeEndHTML(infoWndDoms.popDivs[8],\'<div class="BMap_bubble_content" style="display:block"></div>\');infoWndDoms.maxContentDiv=beforeEndHTML(infoWndDoms.popDivs[8],\'<div class="BMap_bubble_max_content" style="display:none;position:relative"></div>\'); var btnSize=10;if(isMobile())btnSize=15;var closeBt=\'<img style="position:absolute;top:12px;width:\'+btnSize+"px;height:"+btnSize+\'px;-moz-user-select:none;cursor:pointer;z-index:10000;" src="\'+imgPath+\'iw_close1d3.gif"/>\';infoWndDoms.closeButton=beforeEndHTML(infoWndDoms.popDom,closeBt);var maxBt=\'<img style="position:absolute;top:12px;width:\'+btnSize+"px;height:"+btnSize+\'px;-moz-user-select:none;cursor:pointer;z-index:10000;display:none" src="\'+imgPath+\'iw_plus1d3.gif"/>\';infoWndDoms.maxButton= beforeEndHTML(infoWndDoms.popDom,maxBt);this._mendIE6(infoWndDoms)}infoWndDoms.guid=infoWndDoms.popDom.guid=this.guid},_mendIE6:function(infoWin){if(!baidu.browser.ie||baidu.browser.ie>6)return;var popImg=infoWin.popDom.getElementsByTagName("IMG");for(var i=0;i<popImg[Tlength];i++){if(popImg[i].src.indexOf(".png")<0)continue;popImg[i].style.cssText+=";FILTER: progid:DXImageTransform.Microsoft.AlphaImageLoader(src="+popImg[i].src+",sizingMethod=crop)";popImg[i].src=this.IMG_PATH+"blank.gif"}var shadowImg= infoWin.shadowDom.getElementsByTagName("IMG");for(var i=0;i<shadowImg[Tlength];i++){shadowImg[i].style.cssText+=";FILTER: progid:DXImageTransform.Microsoft.AlphaImageLoader(src="+shadowImg[i].src+",sizingMethod=crop)";shadowImg[i].src=this.IMG_PATH+"blank.gif"}},_bind:function(){var me=this,map=me.map,infoWndDoms=map.infoWindowDoms,closeButton=infoWndDoms.closeButton,popDom=infoWndDoms.popDom;var clickFunc=function(e){me.dispatchEvent(new BaseEvent("onclickclose"));me.overlay&&me.overlay.closeInfoWindow(); stopAndPrevent(e)};closeButton.onclick=clickFunc;var stopEvents=["touchstart","touchmove","touchend","gesturestart","gesturechange","mousedown","mouseout","mouseover","click","mousewheel","keydown","selectstart"];baidu.array.each(stopEvents,function(event){baidu.on(popDom,event,stopBubble)});baidu.on(popDom,"dblclick",stopAndPrevent);baidu.on(popDom,"contextmenu",stopAndPrevent);if(baidu.browser.firefox>=4)baidu.on(popDom,"mouseup",function(e){if(e.button==2)stopAndPrevent(e)});if(window[TaddEventListener])popDom[TaddEventListener]("DOMMouseScroll", stopAndPrevent,false);var maxClickFunc=function(e){var maxBt=me.map.infoWindowDoms.maxButton;if(!me.isWinMax)me.maximize();else me.restore();stopAndPrevent(e)};infoWndDoms.maxButton.onclick=maxClickFunc;if(isMobile()){baidu.on(closeButton,"touchend",clickFunc);baidu.on(infoWndDoms.maxButton,"touchend",maxClickFunc)}popDom=closeButton=infoWndDoms=null},_setWinSize:function(width,height){var config=this._config;width=width||config[Twidth];height=height||config[Theight];if(height<0)height=0;var left= config.offset[Twidth];var top=config.offset[Theight];var popWidth=[25,-1,25,-1,25,-1,25,34];var popHeight=[25,-1,25,-1,25,-1,25,50];popWidth[1]=width-popWidth[0]-popWidth[2];if(baidu.browser.ie&&Tdocument.compatMode!="CSS1Compat")popWidth[3]=width;else popWidth[3]=width-2;popWidth[5]=width-popWidth[4]-popWidth[6];popHeight[1]=popHeight[0];popHeight[3]=height-popHeight[0]-popHeight[4];if(baidu.browser.ie&&Tdocument.compatMode!="CSS1Compat")popHeight[5]=popHeight[4];else popHeight[5]=popHeight[4]-1; var popLeft=[0,popWidth[0],width-popWidth[2],0,0,popWidth[4],width-popWidth[6],TMath.ceil((width-popWidth[7])/2)];var popTop=[0,0,0,popHeight[0],height-popWidth[4],height-popWidth[4],height-popWidth[4],height-popWidth[4]];var allPopLeft=this._allPopLeft=left-TMath.round((width-popWidth[7])/2);var allPopTop=this._allPopTop=top-height-24;var allShadowHeight=TMath.floor((height+popHeight[7])/2.03)+30;var shadowWidth=[70,-1,70,-1,-1,-1,50,-1,140,-1,70];var shadowHeight=[30,30,30,25,25,25,60,60,60,60, 60];shadowWidth[7]=TMath.round((width+80-(shadowWidth[6]+shadowWidth[8]+shadowWidth[10])-50)/2);shadowWidth[9]=shadowWidth[7]+50;var allShadowWidthBottom=shadowWidth[6]+shadowWidth[7]+shadowWidth[8]+shadowWidth[9]+shadowWidth[10];shadowWidth[1]=allShadowWidthBottom-shadowWidth[0]-shadowWidth[2]-29;shadowWidth[5]=shadowWidth[3]=allShadowHeight-shadowHeight[0]-shadowHeight[6]+70;shadowHeight[3]=shadowHeight[4]=shadowHeight[5]=allShadowHeight-shadowHeight[0]-shadowHeight[6];shadowWidth[4]=shadowWidth[0]+ shadowWidth[1]+shadowWidth[2]+shadowHeight[3]+29-shadowWidth[5]-shadowWidth[3];var shadowLeft=[allShadowHeight-60-1,allShadowHeight-60-1+shadowWidth[0],allShadowHeight-60-1+shadowWidth[0]+shadowWidth[1],29,29+shadowWidth[3],29+shadowWidth[3]+shadowWidth[4],0,shadowWidth[6],shadowWidth[6]+shadowWidth[7],shadowWidth[6]+shadowWidth[7]+shadowWidth[8],shadowWidth[6]+shadowWidth[7]+shadowWidth[8]+shadowWidth[9]];var shadowTop=[0,0,0,shadowHeight[0],shadowHeight[0],shadowHeight[0],shadowHeight[0]+shadowHeight[3], shadowHeight[0]+shadowHeight[3],shadowHeight[0]+shadowHeight[3],shadowHeight[0]+shadowHeight[3],shadowHeight[0]+shadowHeight[3]];this._allShadowLeft=left-shadowWidth[6]-shadowWidth[7]-70;this._allShadowTop=top-allShadowHeight+30;var shadowLeftImageLeft=323-allShadowHeight+90;shadowRightImageLeft=740+shadowLeftImageLeft;var generatePopStyle=function(index){return"overflow: hidden; z-index: 1; position: absolute;              left:"+popLeft[index]+"px;              top:"+popTop[index]+"px;              width:"+ popWidth[index]+"px;              height:"+popHeight[index]+"px"};var generateShadowStyle=function(index){return"overflow: hidden; z-index: 1; position: absolute;              left:"+shadowLeft[index]+"px;              top:"+shadowTop[index]+"px;              width:"+shadowWidth[index]+"px;              height:"+shadowHeight[index]+"px;"};var bubble=this.map.infoWindowDoms;if(bubble&&bubble.popDivs)for(var i=0;i<8;i++)bubble.popDivs[i].style.cssText=generatePopStyle(i);if(bubble&&bubble.shadowDivs){for(var i= 0;i<bubble.shadowDivs[Tlength];i++)bubble.shadowDivs[i].style.cssText=generateShadowStyle(i);bubble.shadowDivs[3].firstChild.style.left="-"+shadowLeftImageLeft+"px";bubble.shadowDivs[5].firstChild.style.left="-"+shadowRightImageLeft+"px"}this.setPosition()},setWidth:function(width){width=width*1;if(!width&&width!=0||isNaN(width)||width<0)return;if(width!=0){if(width<220)width=220;if(width>730)width=730}this._config[Twidth]=width;if(this._isMyDom()&&this.isOpen()){var me=this;this.redraw(function(){me.setPanToWithDelay()})}}, setHeight:function(height){height=height*1;if(!height&&height!=0||isNaN(height)||height<0)return;if(height!=0){if(height<60)height=60;if(height>650)height=650}this._config[Theight]=height;var map=this.map;if(this._isMyDom()&&this.isOpen()){if(this._config[Twidth]!=0)map.infoWindowDoms.contentDiv.style[Twidth]=this._config[Twidth]+"px";var me=this;this.redraw(function(){me.setPanToWithDelay()})}},setMaxWidth:function(width){width=width*1;if(!width&&width!=0||isNaN(width)||width<0)return;if(width!= 0){if(width<220)width=220;if(width>730)width=730}this._config.maxWidth=width;if(this.isWinMax)this.redraw()},setTitle:function(title){this._config.title=title;if(!this._isMyDom())return;var map=this.map;var titleDiv=map.infoWindowDoms.titleDiv;if(!title)baidu.dom.hide(titleDiv);else{if(isString(title))titleDiv.innerHTML=title;else{titleDiv.innerHTML="";titleDiv[TappendChild](title)}baidu.dom.show(titleDiv)}var me=this;this.redraw(function(){me.setPanToWithDelay()})},setContent:function(content,notRedraw){this.content= content;if(!this._isMyDom())return;if(this.isWinMax)return;var map=this.map;var contentDiv=map.infoWindowDoms.contentDiv;var maxContentDiv=map.infoWindowDoms.maxContentDiv;if(isString(content))contentDiv.innerHTML=content;else{contentDiv.innerHTML="";contentDiv[TappendChild](content)}if(this._config.enableSearchTool){var tool=this.getSearchToolDom();contentDiv[TappendChild](tool)}if(this._config[Twidth]!=0)contentDiv.style[Twidth]=this._config[Twidth]+"px";maxContentDiv.style.display="none";contentDiv.style.display= "";if(!notRedraw){var me=this;this.redraw(function(){me.setPanToWithDelay()})}},setMaxContent:function(content){if(!content)content=this._config.maxContent;else this._config.maxContent=content;var map=this.map;if(!this._isMyDom())return;var bubble=map.infoWindowDoms;bubble.maxContentDiv.innerHTML=content;if(!this.isWinMax)return;bubble.contentDiv.style.display="none";bubble.maxContentDiv.style.display=""},redraw:function(callback,forceShow){if(!this._isMyDom())return;if(!forceShow&&!this.isOpen())return; var me=this,timeout=1,bubble=me.map.infoWindowDoms,titleHeight=0;callback=callback||function(){};if(bubble.titleDiv.style.display!="none")titleHeight=24;var btnOffsetX=7,btnMargin=20;if(isMobile()){btnOffsetX=5;btnMargin=20}if(this.isWinMax){w=me._config.maxWidth;setTimeout(function(){var h=titleHeight+bubble.maxContentDiv.scrollHeight;h=h>me.map[Theight]?me.map[Theight]-60:h;w=w<220?220:w;w=w>600?600:w;h=h<55?55:h;h=h>440?440:h;me._setWinSize(w+32,h+32);bubble.contentMain.style[Twidth]=w+"px";bubble.contentMain.style[Theight]= h+"px";bubble.closeButton.style.left=w+btnOffsetX+"px";bubble.maxButton.style.left=w-btnMargin+btnOffsetX+"px";bubble.contentMain.style.overflow="hidden";me.dispatchEvent(new BaseEvent("onresize"));callback()},timeout)}else{var contentStyle=bubble.contentDiv.style,titleStyle=bubble.titleDiv.style,mainStyle=bubble.contentMain.style;contentStyle[Twidth]=mainStyle[Twidth]=titleStyle[Twidth]="auto";contentStyle[Theight]=mainStyle[Theight]=titleStyle[Theight]="auto";contentStyle.whiteSpace="nowrap";if(bubble.popDom.style.display== "none")this.show();bubble.popDom.style.visibility="hidden";bubble.shadowDom.style.visibility="hidden";var w=bubble.contentMain.clientWidth||0;w=me._config[Twidth]==0?w:me._config[Twidth];w=w>me.map[Twidth]?me.map[Twidth]-60:w;w=w<220?220:w;w=w>600?600:w;mainStyle[Twidth]=w+"px";h=bubble.contentMain.scrollHeight||0;h=me._config[Theight]==0?h:me._config[Theight];me._setWinSize(w+32,h+32);setTimeout(function(){contentStyle.whiteSpace="";mainStyle.overflow="hidden";h=bubble.contentMain.scrollHeight|| 0;h=me._config[Theight]==0?h:me._config[Theight];h=h>me.map[Theight]-92?me.map[Theight]-92:h;h=h<55?55:h;h=h>440?440:h;me._setWinSize(w+32,h+32);bubble.popDom.style.visibility="";bubble.shadowDom.style.visibility="";mainStyle[Theight]=h+"px";bubble.closeButton.style.left=w+btnOffsetX+"px";bubble.maxButton.style.left=w-btnMargin+btnOffsetX+"px";me.dispatchEvent(new BaseEvent("onresize"));callback()},timeout)}},setPosition:function(){if(!this._isMyDom())return;var bubble=this.map.infoWindowDoms,overlay= this.overlay,pix=this.map.pointToOverlayPixel(overlay.getPosition()),overlayIcon=overlay.getIcon(),infoWndPix=new Pixel(pix.x-overlayIcon["anchor"][Twidth]+overlayIcon["infoWindowAnchor"][Twidth]+overlay.getOffset()[Twidth],pix.y-overlayIcon["anchor"][Theight]+overlayIcon["infoWindowAnchor"][Theight]+overlay.getOffset()[Theight]);if(this._allPopLeft!=undefined&&this._allPopTop!=undefined&&this._allShadowLeft!=undefined&&this._allShadowTop!=undefined){bubble.popDom.style.left=this._allPopLeft+infoWndPix.x+ "px";bubble.popDom.style.top=this._allPopTop+infoWndPix.y+"px";bubble.shadowDom.style.left=this._allShadowLeft+infoWndPix.x+"px";bubble.shadowDom.style.top=this._allShadowTop+infoWndPix.y+"px"}},setPanToWithDelay:function(delay){var me=this;setTimeout(function(){me.setPanTo()},delay||200)},setPanTo:function(){if(!this.overlay||!this.overlay.getPosition()||!this._config.enableAutoPan||!this._isMyDom())return;var map=this.map;var bubble=map.infoWindowDoms;var popDivs=bubble.popDivs;var popDom=bubble.popDom; if(!popDivs||!popDom)return;var w=TparseInt(popDivs[3].style[Twidth])+2;var h=TparseInt(popDivs[1].style[Theight])+TparseInt(popDivs[3].style[Theight])+TparseInt(popDivs[7].style[Theight]);var l=TparseInt(popDom.style.left)+this.map[ToffsetX];var t=TparseInt(popDom.style.top)+this.map[ToffsetY];var pix1=new Pixel(l,t);var pix2=new Pixel(w+l,h+t);if(this._config[Theight]!=0&&Tdocument.all){if(!map.temp.infoKey)map.temp.infoKey=-1;var panByX=-map.temp.infoKey;map.temp.infoKey=-map.temp.infoKey}var panByX= 0;var panByY=0;var popMargin=10;var popMarginT=this._config.margin[0];var popMarginR=this._config.margin[1];var popMarginB=this._config.margin[2];var popMarginL=this._config.margin[3];if(pix1.x<popMarginL)panByX=-pix1.x+popMarginL;if(pix1.y<popMarginT)panByY=-pix1.y+popMarginT;if(pix2.x>map[Twidth]-popMarginR)panByX=map[Twidth]-pix2.x-popMarginR;if(pix2.y>map[Theight]-popMarginB)panByY=map[Theight]-pix2.y-popMarginB;this._loadCollisions();var colls=this._config.collisions;if(pix1.x<colls[0][0]&&pix1.y< colls[0][1]){if(TMath.abs(-pix1.x+colls[0][0])<TMath.abs(-pix1.y+colls[0][1]))panByX=-pix1.x+colls[0][0];else if(map[Theight]-colls[0][1]-colls[3][1]<h)panByX=-pix1.x+colls[0][0];else panByY=-pix1.y+colls[0][1];if(map[Twidth]-colls[0][0]-colls[1][0]<w&&pix1.y<colls[1][1])panByY=-pix1.y+colls[1][1]}if(pix2.x>map[Twidth]-colls[1][0]&&pix1.y<colls[1][1])if(TMath.abs(-pix2.x+map[Twidth]-colls[1][0])<TMath.abs(-pix1.y+colls[1][1])&&map[Twidth]-colls[0][0]-colls[1][0]>=w)panByX=-pix2.x+map[Twidth]-colls[1][0]; else{panByY=-pix1.y+colls[1][1];if(map[Twidth]-colls[0][0]-colls[1][0]<w&&map[Twidth]-colls[0][0]<w)panByX=-pix1.x+colls[0][0]}if(pix1.x<colls[3][0]&&pix2.y>map[Theight]-colls[3][1]){if(TMath.abs(-pix1.x+colls[3][0])<TMath.abs(-pix2.y+map[Theight]-colls[3][1])&&(TMath.abs(-pix1.x+colls[3][0])<TMath.abs(panByY)&&panByY!=0||panByY==0)&&map[Twidth]-colls[3][0]>=w)panByX=-pix1.x+colls[3][0];else panByY=-pix2.y+map[Theight]-colls[3][1];if(map[Theight]-colls[0][1]-colls[3][1]<h&&pix1.x<colls[0][0])panByX= -pix1.x+colls[0][0]}if(pix2.x>map[Twidth]-colls[2][0]&&pix2.y>map[Theight]-colls[2][1])if(TMath.abs(-pix2.x+map[Twidth]-colls[2][0])<TMath.abs(-pix2.y+map[Theight]-colls[2][1])&&(TMath.abs(-pix2.x+map[Twidth]-colls[2][0])<TMath.abs(panByY)&&panByY!=0||panByY==0)&&map[Twidth]-colls[0][0]-colls[1][0]>=w)panByX=-pix2.x+map[Twidth]-colls[2][0];else{if(map[Theight]-colls[1][1]-colls[2][1]>=h)panByY=-pix2.y+map[Theight]-colls[2][1];else panByY=-pix1.y+colls[1][1];if(map[Twidth]-colls[0][0]-colls[2][0]< w)panByX=-pix1.x+colls[0][0]}if(panByX!=0||panByY!=0)map.panBy(panByX,panByY)},_loadCollisions:function(){if(!this.map)return;var map=this.map;this._config.collisions=[[10,10],[10,10],[10,10],[10,10]];var c=this.map.container;for(var i=0,l=c.children[Tlength];i<l;i++){var dom,cIndex,nonSysCtrl=!!(isDefined(c.children[i]._anchor)&&c.children[i]._offset);if(c.children[i]._jsobj&&c.children[i]._jsobj instanceof Control&&c.children[i]._jsobj.blockInfoWindow==true)dom=c.children[i];else if(nonSysCtrl)dom= c.children[i];else continue;var w=dom.offsetWidth,h=dom.offsetHeight,ctrl=dom._jsobj,offset,anchor;if(!ctrl||nonSysCtrl)if(isDefined(dom._anchor)&&dom._offset&&getCurrentStyle(dom).display!="none"&&getCurrentStyle(dom).visibility!="hidden"){offset=dom._offset;anchor=dom._anchor}else continue;else{if(ctrl.isVisible()==false)continue;offset=ctrl.getOffset();anchor=ctrl.getAnchor()}switch(anchor){case BMAP_ANCHOR_TOP_LEFT:cIndex=0;break;case BMAP_ANCHOR_TOP_RIGHT:cIndex=1;break;case BMAP_ANCHOR_BOTTOM_LEFT:cIndex= 3;break;case BMAP_ANCHOR_BOTTOM_RIGHT:cIndex=2;break;default:break}var c1=w+offset[Twidth]+10,c2=h+offset[Theight]+10,cur=this._config.collisions[cIndex];this._config.collisions[cIndex]=[c1>cur[0]?c1:cur[0],c2>cur[1]?c2:cur[1]]}},enableMaximize:function(){this._config.enableMaximize=true;if(this._isMyDom())this.map.infoWindowDoms.maxButton.style.display="block"},disableMaximize:function(){this._config.enableMaximize=false;if(this._isMyDom())this.map.infoWindowDoms.maxButton.style.display="none"}, show:function(){if(!this._isMyDom())return;var bubble=this.map.infoWindowDoms;if(bubble.popDom.style.display!="none")return;if(isObject(this.content)){bubble.contentDiv[TappendChild](this.content);if(this._config.enableSearchTool)bubble.contentDiv[TappendChild](this.getSearchToolDom())}if(isObject(this._config.title))bubble.titleDiv[TappendChild](this._config.title);baidu.dom.show(bubble.popDom);baidu.dom.show(bubble.shadowDom);var evt=new BaseEvent("onopen");evt["point"]=evt.point=this.getPosition(); this.dispatchEvent(evt);this.redraw()},hide:function(){if(!this._isMyDom())return false;var bubble=this.map.infoWindowDoms;if(bubble.popDom.style.display=="none")return false;if(this._config.onClosing()==false)return false;if(isObject(this.content)){bubble.contentDiv[TremoveChild](this.content);if(this._config.enableSearchTool)bubble.contentDiv[TremoveChild](this.getSearchToolDom())}if(isObject(this._config.title))bubble.titleDiv[TremoveChild](this._config.title);baidu.dom.hide(bubble.popDom);baidu.dom.hide(bubble.shadowDom); if(this.isWinMax){this.isWinMax=false;bubble.maxContentDiv.style.display="none";bubble.contentDiv.style.display="";bubble.maxButton.src=this.IMG_PATH+"iw_plus1d3.gif"}var evt=new BaseEvent("onclose");evt["point"]=evt.point=this.getPosition();this.dispatchEvent(evt);if(this.map.temp._clickCloseBindTimer){clearTimeout(this.map.temp._clickCloseBindTimer);this.map.temp._clickCloseBindTimer=null}else{this.map[TremoveEventListener]("click",this.map.temp._clickCloseHandler);this.map.temp._clickCloseBinded= false}baidu.lang.decontrol(this.guid);return true},maximize:function(){if(!this.map||!this.isOpen()||!this._config.enableMaximize||this.isWinMax)return;if(!this._isMyDom())return;var maxBt=this.map.infoWindowDoms.maxButton;var me=this;me.isWinMax=true;maxBt.src=me.IMG_PATH+"iw_minus1d3.gif";me.setMaxContent();me.map.infoWindowDoms.maxContentDiv.style.display="block";me.redraw();me.dispatchEvent(new BaseEvent("onmaximize"));me.setPanToWithDelay()},restore:function(){if(!this.map||!this.isOpen()||!this.isWinMax)return; if(!this._isMyDom())return;this.isWinMax=false;var me=this;var maxBt=me.map.infoWindowDoms.maxButton;maxBt.src=me.IMG_PATH+"iw_plus1d3.gif";me.setContent(this.content,true);me.map.infoWindowDoms.maxContentDiv.style.display="none";me.redraw();me.dispatchEvent(new BaseEvent("onrestore"));me.setPanToWithDelay()},_revert:function(){if(!this._isMyDom())return;this.isWinMax=false;var bubble=this.map.infoWindowDoms;bubble.titleDiv.innerHTML="";bubble.contentDiv.innerHTML="";bubble.maxContentDiv.innerHTML= "";bubble.maxButton.src=this.IMG_PATH+"iw_plus1d3.gif"},_setOverflow:function(){var map=this.map;if(!this._isMyDom())return;var bubble=map.infoWindowDoms,mainStyle=bubble.contentMain.style;bubble._overflowX=mainStyle.overflowX;bubble._overflowY=mainStyle.overflowY;mainStyle.overflowX="hidden";mainStyle.overflowY="hidden"},_resetOverflow:function(){var map=this.map;if(!this._isMyDom()||!map.infoWindowDoms._overflowX||!map.infoWindowDoms._overflowY)return;var bubble=map.infoWindowDoms,mainStyle=bubble.contentMain.style; mainStyle.overflowX=bubble._overflowX;mainStyle.overflowY=bubble._overflowY;delete bubble._overflowX;delete bubble._overflowY},isOpen:function(){if(!this.map)return false;var mapInfoWin=this.map.temp.infoWin;if(!mapInfoWin)return false;if(!this._isMyDom())return false;if(mapInfoWin&&mapInfoWin.overlay===this.overlay&&this.map.infoWindowDoms&&this.map.infoWindowDoms.popDom.style.display=="none")return false;else return true},setMaxScene:function(ifMax){var me=this;if(!this._isMyDom())return;var bubble= me.map.infoWindowDoms;bubble.maxButton.style.display="block";var maxBt=bubble.maxButton;if(!!ifMax==!!this.isWinMax)return;if(ifMax){me.isWinMax=true;maxBt.src=me.IMG_PATH+"iw_minus1d3.gif";me.setMaxContent();bubble.maxContentDiv.style.display="block"}else{me.isWinMax=false;maxBt.src=me.IMG_PATH+"iw_plus1d3.gif";me.setContent(this.content,true);bubble.maxContentDiv.style.display="none"}this.redraw()},_draw:function(){if(this._visible==true&&this.overlay)this.overlay.openInfoWindow(this)},_isMyDom:function(){return this.map&& this.map.infoWindowDoms&&this.map.infoWindowDoms.guid==this.guid},getSearchToolDom:function(){if(!this.map.searchTool)this.map.searchTool=new SearchTool(this);else this.map.searchTool.reset(this);return this.map.searchTool.getDom()}}); OverlayInternal[Tprototype].openInfoWindow=function(infoWin){var map=this.map;if(!map||!this.domElement||this.isVisible()==false||!infoWin instanceof InfoWindow)return;var temp=map.temp;if(temp.infoWin&&temp.infoWin.overlay&&temp.infoWin.overlay._fromMap)map.closeInfoWindow();if(temp.infoWin===infoWin&&temp.infoWin.isOpen()&&temp.infoWin.overlay===this){infoWin.setPanToWithDelay();return}map.closeInfoWindow();this.infoWindow=infoWin;if(temp.infoWin==null||temp.infoWin!=infoWin){if(map.infoWindowDoms){map.infoWindowDoms.closeButton.onclick= null;map.infoWindowDoms.maxButton.onclick=null}temp.infoWin=infoWin;infoWin["initialize"](this)}else infoWin.redraw(null,true);baidu.lang.Class.call(infoWin,infoWin.guid);if(!temp._clickCloseHandler)temp._clickCloseHandler=function(e){if(!e.overlay)if(map.temp.infoWin&&map.temp.infoWin._config.enableCloseOnClick){map.closeInfoWindow();map[TremoveEventListener]("click",arguments.callee);temp._clickCloseBinded=false}};if(!temp._clickCloseBinded)temp._clickCloseBindTimer=setTimeout(function(){map[TaddEventListener]("click", temp._clickCloseHandler);temp._clickCloseBinded=true;temp._clickCloseBindTimer=null},200);if(temp._infoWin)delete temp._infoWin;infoWin.overlay=this;var bubble=map.infoWindowDoms;this.map.getPanes().floatPane[TappendChild](bubble.popDom);this.map.getPanes().floatShadow[TappendChild](bubble.shadowDom);infoWin.setPanToWithDelay();this.dispatchEvent(new BaseEvent("oninfowindowopen"))}; OverlayInternal[Tprototype].closeInfoWindow=function(){if(!this.map||!this.map.infoWindowDoms)return;var me=this;if(me.infoWindow&&me.infoWindow.guid==me.map.infoWindowDoms.guid)try{if(me.infoWindow.hide()==true){me.dispatchEvent(new BaseEvent("oninfowindowclose"));me.map.temp.infoWin=me.infoWindow=null}}catch(ex){}};exportSymbol(OverlayInternalP,{"openInfoWindow":OverlayInternalP.openInfoWindow,"closeInfoWindow":OverlayInternalP.closeInfoWindow}); exportSymbol(InfoWindowP,{"redraw":InfoWindowP.redraw,"setTitle":InfoWindowP.setTitle,"setPosition":InfoWindowP.setPosition,"setWidth":InfoWindowP.setWidth,"setMaxWidth":InfoWindowP.setMaxWidth,"setHeight":InfoWindowP.setHeight,"setContent":InfoWindowP.setContent,"setMaxContent":InfoWindowP.setMaxContent,"enableMaximize":InfoWindowP.enableMaximize,"disableMaximize":InfoWindowP.disableMaximize,"isOpen":InfoWindowP.isOpen,"show":InfoWindowP.show,"hide":InfoWindowP.hide,"maximize":InfoWindowP.maximize, "restore":InfoWindowP.restore});function SearchTool(infoWindow){this.initialize(infoWindow)}baidu.lang.inherits(SearchTool,baidu.lang.Class,"SearchTool"); baidu[Textend](SearchTool[Tprototype],{config:{imgPath:MapConfig.imgPath+"iw_bg.png",blank:MapConfig.imgPath+"blank.gif"},initialize:function(infoWindow){var me=this,isOrigin=this.isOrigin=true;var dom=this.dom=create("div",{"style":"font-size:12px;"});var tabStyle="float:left;text-align:center;height:18px;line-height:18px;padding:6px 0;border-left:1px solid #dadada;",contentStyle="padding:10px 5px 0 5px;",txtStyle="height:22px;line-height:22px;padding:0;margin:0;border:1px solid #A5ACB2;",btnStyle= "width:50px;height:24px;line-height:24px;margin:0 0 0 5px;vertical-align:bottom;";var nearTab=this.nearTab=create("span",{"style":tabStyle}),toHereTab=this.toHereTab=create("span",{"style":tabStyle}),fromHereTab=this.fromHereTab=create("span",{"style":tabStyle});nearTab.style.borderLeft="";var iconStyle="border:none;vertical-align:-3px;margin-right:5px;_vertical-align:0;";nearTab.innerHTML="<img src=\'"+this.config.blank+"\' style=\'"+iconStyle+"width:14px;height:14px;background:url("+this.config.imgPath+ ") no-repeat -30px -136px;\'/>\\u5728\\u9644\\u8fd1\\u627e";toHereTab.innerHTML="<img src=\'"+this.config.blank+"\' style=\'"+iconStyle+"width:10px;height:15px;background:url("+this.config.imgPath+") no-repeat -15px -136px;\'/>\\u5230\\u8fd9\\u91cc\\u53bb";fromHereTab.innerHTML="<img src=\'"+this.config.blank+"\' style=\'"+iconStyle+"width:10px;height:15px;background:url("+this.config.imgPath+") no-repeat 0px -136px;\'/>\\u4ece\\u8fd9\\u91cc\\u51fa\\u53d1";baidu.on(nearTab,"click",function(){me.showTab("near")});baidu.on(toHereTab, "click",function(){me.showTab("toHere")});baidu.on(fromHereTab,"click",function(){me.showTab("fromHere")});var tools=create("div",{"style":"margin-top:5px;overflow:hidden;background:url("+this.config.imgPath+") repeat-x 0 0;*zoom:1;"});tools[TappendChild](nearTab);tools[TappendChild](toHereTab);tools[TappendChild](fromHereTab);var searchContent=this.searchContent=create("div",{"style":contentStyle});localSearchTxt=create("input",{"style":txtStyle+"width:230px;","type":"text"});localSearchBtn=create("input", {"style":btnStyle,"type":"button","value":"\\u641c\\u7d22"});searchContent[TappendChild](localSearchTxt);searchContent[TappendChild](localSearchBtn);baidu.on(localSearchBtn,"click",function(){var uri="http://api.map.baidu.com/place/search?query="+localSearchTxt.value+"&location="+me[Tposition]["lat"]+","+me[Tposition]["lng"]+"&radius=1000&output=html&src=jsapi&operate=searchtool&region="+me.getCityName();window.open(uri,"_blank")});var navContent=this.navContent=create("div",{"style":contentStyle}); baidu.dom.hide(navContent);navSearchLabel=this.navSearchLabel=create("span",{"style":"margin-right:5px;"});navSearchLabel.innerHTML="\\u8d77\\u70b9";navSearchTxt=create("input",{"style":txtStyle+"width:145px;","type":"text"});transitSearchBtn=create("input",{"style":btnStyle,"type":"button","value":"\\u516c\\u4ea4"});drivingSearchBtn=create("input",{"style":btnStyle,"type":"button","value":"\\u9a7e\\u8f66"});navContent[TappendChild](navSearchLabel);navContent[TappendChild](navSearchTxt);navContent[TappendChild](transitSearchBtn); navContent[TappendChild](drivingSearchBtn);baidu.on(transitSearchBtn,"click",function(){me.transitDrivingEvent("transit")});baidu.on(drivingSearchBtn,"click",function(){me.transitDrivingEvent("driving")});dom[TappendChild](tools);dom[TappendChild](searchContent);dom[TappendChild](navContent);this.reset(infoWindow)},reset:function(infoWindow){this.map=infoWindow.map;this.infoWindow=infoWindow;this[Tposition]=infoWindow.getPosition();this.showTab("near");this.adjustWidth()},adjustWidth:function(){var me= this;setTimeout(function(){var width=me.infoWindow._config[Twidth];var splitWidth=TMath.floor((width-2)/3);me.nearTab.style[Twidth]=splitWidth+"px";me.toHereTab.style[Twidth]=splitWidth+"px";me.fromHereTab.style[Twidth]=width-2-2*splitWidth+"px"},100)},getCityName:function(){return this.map.cityName},getDom:function(){return this.dom},transitDrivingEvent:function(mode){var nowPoint=this[Tposition]["lat"]+","+this[Tposition]["lng"],query=navSearchTxt.value,cityName=this.getCityName(),origin,destination; var title=this.infoWindow.getTitle();if(title){if(baidu.lang.isString(title))title=title.replace(/<\\/?[^>]*>/g,"");else title=title.innerHTML.replace(/<\\/?[^>]*>/g,"");title=title.replace(/\\u8be6\\u60c5&raquo;/g,"");nowPoint="name:"+title+"|latlng:"+nowPoint}if(this.isOrigin){origin=nowPoint;destination=query}else{origin=query;destination=nowPoint}var uri="http://api.map.baidu.com/direction?origin="+origin+"&destination="+destination+"&mode="+mode+"&output=html&src=jsapi&operate=searchtool&region="+ cityName;window.open(uri,"_blank")},showTab:function(tabType){var nearTab=this.nearTab,toHereTab=this.toHereTab,searchContent=this.searchContent,navSearchLabel=this.navSearchLabel,navContent=this.navContent,fromHereTab=this.fromHereTab;baidu.array.each([nearTab,toHereTab,fromHereTab],function(item){item.style.background="";item.style.cursor="pointer"});var hoverBackground="url("+this.config.imgPath+") repeat-x 0 -44px";var nowTab=null;switch(tabType){case "near":nowTab=nearTab;baidu.dom.show(searchContent); baidu.dom.hide(navContent);break;case "toHere":nowTab=toHereTab;baidu.dom.hide(searchContent);baidu.dom.show(navContent);navSearchLabel.innerHTML="\\u8d77\\u70b9";this.changeOrigin("destination");break;case "fromHere":nowTab=fromHereTab;baidu.dom.hide(searchContent);baidu.dom.show(navContent);navSearchLabel.innerHTML="\\u7ec8\\u70b9";this.changeOrigin("origin");break}nowTab.style.background=hoverBackground},changeOrigin:function(type){if(type=="origin")this.isOrigin=true;else this.isOrigin=false}}); ');